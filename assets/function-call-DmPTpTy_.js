import{P as T,m as z,u as M}from"./mount-component-CKC8OpDv.js";import{I as N}from"./index-DdOUakjv.js";import{d as L,v as g,a3 as p,q as k,aR as j,c as U,B as v,K as q,aP as R,a as s,a0 as b,a1 as V,ad as D,R as F,e as C,k as H,aa as K,r as _,a2 as A}from"./index-C9bZNooh.js";let f=0;function E(e){e?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(f--,f||document.body.classList.remove("van-toast--unclickable"))}const[G,i]=U("toast"),J=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],Q={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:g,iconSize:g,duration:j(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:p,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:p,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:g};var W=L({name:G,props:Q,emits:["update:show"],setup(e,{emit:t,slots:a}){let l,c=!1;const r=()=>{const n=e.show&&e.forbidClick;c!==n&&(c=n,E(c))},d=n=>t("update:show",n),y=()=>{e.closeOnClick&&d(!1)},u=()=>clearTimeout(l),P=()=>{const{icon:n,type:o,iconSize:h,iconPrefix:I,loadingType:B}=e;if(n||o==="success"||o==="fail")return s(N,{name:n||o,size:h,class:i("icon"),classPrefix:I},null);if(o==="loading")return s(D,{class:i("loading"),size:h,type:B},null)},x=()=>{const{type:n,message:o}=e;if(a.message)return s("div",{class:i("text")},[a.message()]);if(F(o)&&o!=="")return n==="html"?s("div",{key:0,class:i("text"),innerHTML:String(o)},null):s("div",{class:i("text")},[o])};return v(()=>[e.show,e.forbidClick],r),v(()=>[e.show,e.type,e.message,e.duration],()=>{u(),e.show&&e.duration>0&&(l=setTimeout(()=>{d(!1)},e.duration))}),q(r),R(r),()=>s(T,b({class:[i([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:u,"onUpdate:show":d},V(e,J)),{default:()=>[P(),x()]})}});const X={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let m=[],Y=!1,w=C({},X);const Z=new Map;function O(e){return K(e)?e:{message:e}}function $(){const{instance:e}=z({setup(){const t=_(""),{open:a,state:l,close:c,toggle:r}=M(),d=()=>{},y=()=>s(W,b(l,{onClosed:d,"onUpdate:show":r}),null);return v(t,u=>{l.message=u}),A().render=y,{open:a,close:c,message:t}}});return e}function ee(){if(!m.length||Y){const e=$();m.push(e)}return m[m.length-1]}function te(e={}){if(!H)return{};const t=ee(),a=O(e);return t.open(C({},w,Z.get(a.type||w.type),a)),t}const S=e=>t=>te(C({type:e},O(t))),ie=S("success"),le=S("fail");export{ie as a,W as b,te as c,le as s};
