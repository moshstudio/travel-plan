import{d as C,ae as b,y as T,K as x,ag as q,a as o,ai as m,am as l,ah as h,au as d,ap as S,af as p,aD as U,aq as P}from"./index-CpL1zRha.js";import{C as B,F as I,a as N}from"./index-BTvapICq.js";import{S as F,a as z}from"./index-Chr0kTgw.js";import{d as A,N as D}from"./index-s5J9asle.js";import{T as M,P as R}from"./TravelTagSelector-DbdAJ--R.js";import{B as E}from"./mount-component-COyTfLeg.js";import{s as c,a as G}from"./function-call-bTWHa3iy.js";import"./index-CvqAlFEX.js";const K={class:"w-screen h-screen flex flex-col overflow-hidden bg-[var(--van-background)]"},L={class:"flex-grow w-full h-full p-2 overflow-auto"},j={class:"p-4"},H=C({__name:"CreateChecklist",setup(J){const s=A(),{currentTravel:u}=b(s),e=T({name:"",tags:[],quantity:1,notes:"",priority:"medium",isPacked:!1}),f=async()=>{if(!e.name||!e.tags.length){c("请填写必填信息");return}if(!u.value){c("请先创建旅行"),p.push({name:"CreateTravel"});return}const n=new Date,t=U({name:e.name,travelId:u.value.travelId,tag:e.tags[0],isPacked:e.isPacked,quantity:e.quantity,importance:e.priority,notes:e.notes,createdAt:n,updatedAt:n});console.log("提交的清单项数据:",t),await s.addChecklistItem(t),G("清单项添加成功"),i()},i=()=>{p.push({name:"Travel"})},v=["衣物","电子设备","证件","洗漱用品","化妆品","药品","食品","户外用品","其他"];return x(()=>{}),(n,t)=>{const _=D,r=I,g=F,V=z,k=N,w=B,y=E;return h(),q("div",K,[o(_,{title:"添加清单项","left-arrow":"",onClickLeft:i}),m("div",L,[o(w,{inset:""},{default:l(()=>[o(r,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.name=a),label:"物品名称",placeholder:"请输入物品名称",clearable:"",required:""},null,8,["modelValue"]),o(M,{tags:e.tags,"custom-tags":d(s).customTravelChecklistTags,"onUpdate:tags":t[1]||(t[1]=a=>e.tags=a),"onUpdate:customTags":t[2]||(t[2]=a=>d(s).updateCustomTravelChecklistTags(a)),"default-tags":v,"max-tags":1},null,8,["tags","custom-tags"]),o(r,{modelValue:e.quantity,"onUpdate:modelValue":t[4]||(t[4]=a=>e.quantity=a),modelModifiers:{number:!0},label:"数量",type:"number"},{extra:l(()=>[o(g,{modelValue:e.quantity,"onUpdate:modelValue":t[3]||(t[3]=a=>e.quantity=a),min:"1"},null,8,["modelValue"])]),_:1},8,["modelValue"]),o(R,{modelValue:e.priority,"onUpdate:modelValue":t[5]||(t[5]=a=>e.priority=a)},null,8,["modelValue"]),o(k,{title:"打包状态"},{value:l(()=>[o(V,{modelValue:e.isPacked,"onUpdate:modelValue":t[6]||(t[6]=a=>e.isPacked=a),size:"24"},null,8,["modelValue"])]),_:1}),o(r,{modelValue:e.notes,"onUpdate:modelValue":t[7]||(t[7]=a=>e.notes=a),rows:"3",autosize:"",label:"备注",type:"textarea",placeholder:"请输入备注信息","show-word-limit":"",maxlength:"200"},null,8,["modelValue"])]),_:1}),m("div",j,[o(y,{round:"",block:"",type:"primary",class:"bg-blue-500",onClick:f},{default:l(()=>t[8]||(t[8]=[S(" 添加清单项 ")])),_:1,__:[8]})])])])}}}),te=P(H,[["__scopeId","data-v-51404e33"]]);export{te as default};
