import{d as w,r as m,y as T,K as _,L as b,ag as g,a as n,ai as k,am as u,ay as V,ah as y,ap as x,af as B}from"./index-d8_m604x.js";import{C,F as N}from"./index-BK36Oy50.js";import{a as I,N as U}from"./index-C3vBwbN3.js";import{D as A}from"./DateTimeRangePicker-BZ-lDnKq.js";import{B as E}from"./mount-component-BIseKc7z.js";import"./use-id-FzMcmI8R.js";import"./format-BUPkFkKG.js";import"./function-call-B-YzU1C_.js";const F={class:"w-screen h-screen flex flex-col overflow-hidden bg-[var(--van-background)]"},L={class:"flex-grow w-full h-full p-2 overflow-auto"},z=w({__name:"EditTravel",setup(R){const l=I(),p=V(),s=m(),a=m(),e=T({name:"",startDate:new Date,endDate:new Date(Date.now()+1*24*60*60*1e3),description:""}),i=()=>{s.value=p.params.travelId,a.value=l.getTravelById(s.value),a.value&&(e.name=a.value.name,e.description=a.value.description||"",e.startDate=a.value.startDateTime?new Date(a.value.startDateTime):new Date,e.endDate=a.value.endDateTime?new Date(a.value.endDateTime):new Date(Date.now()+1*24*60*60*1e3))};_(i),b(i);const v=async()=>{if(!a.value){console.error("旅行不存在");return}const r={id:a.value.id,travelId:a.value.travelId,name:e.name,description:e.description,startDateTime:e.startDate.getTime(),endDateTime:e.endDate.getTime(),createdAt:Date.now()};await l.updateTravel(r),B.back()};return(r,t)=>{const c=U,d=N,D=E,f=C;return y(),g("div",F,[n(c,{title:"编辑旅行","left-arrow":"",onClickLeft:t[0]||(t[0]=o=>r.$router.back())}),k("div",L,[n(f,{insert:""},{default:u(()=>[n(d,{modelValue:e.name,"onUpdate:modelValue":t[1]||(t[1]=o=>e.name=o),name:"travelName",label:"旅行名称",required:"",placeholder:"请输入旅行名称",class:"mb-4"},null,8,["modelValue"]),n(A,{"start-date-time":e.startDate,"onUpdate:startDateTime":t[2]||(t[2]=o=>e.startDate=o),"end-date-time":e.endDate,"onUpdate:endDateTime":t[3]||(t[3]=o=>e.endDate=o),"time-selectable":!1},null,8,["start-date-time","end-date-time"]),n(d,{modelValue:e.description,"onUpdate:modelValue":t[4]||(t[4]=o=>e.description=o),name:"description",label:"旅行描述",type:"textarea",rows:"3",placeholder:"请输入旅行描述",class:"mb-4"},null,8,["modelValue"]),n(D,{type:"primary","native-type":"submit",block:"",onClick:v},{default:u(()=>t[5]||(t[5]=[x(" 保存修改 ")])),_:1,__:[5]})]),_:1})])])}}});export{z as default};
