import{d as F,t as G,c as ee,r as M,u as Ke,a as p,w as ie,e as xe,b as Ze,f as T,g as Te,h as st,i as Dt,j as It,s as aa,o as na,k as Et,l as rt,m as Mt,n as Ot,p as de,q as _e,v as ve,x as it,y as je,z as Rt,A as sa,B as X,C as We,D as Se,E as pe,F as le,G as Pe,H as ze,I as zt,J as oa,K as be,L as ct,M as Re,N as la,O as et,P as tt,Q as Le,R as ot,S as ra,T as ia,U as vt,V as ca,W as ua,X as K,Y as da,Z as me,_ as Be,$ as ut,a0 as qe,a1 as Fe,a2 as ma,a3 as At,a4 as fa,a5 as va,a6 as ht,a7 as ha,a8 as ga,a9 as pa,aa as gt,ab as ba,ac as ya,ad as xa,ae as ke,af as dt,ag as w,ah as b,ai as n,aj as z,ak as $,al as mt,am as A,an as N,ao as Y,ap as J,aq as he,ar as Lt,as as ft,at as _a,au as H,av as De,aw as se,ax as wa,ay as $a,az as ka,aA as Ta,aB as Ca,aC as Pa}from"./index-CpL1zRha.js";import{A as Ie,T as Ft}from"./index-CvqAlFEX.js";import{u as Sa,a as Ba,r as Nt,o as jt,b as Wt,c as Da,B as Ia,s as Ea,d as fe,I as Ee,_ as Ae,N as Ma}from"./index-s5J9asle.js";import{T as ne}from"./TravelPlan-k6Lqvmii.js";import{B as ye,c as Yt,p as Oa,P as Vt,a as Ra,m as za,u as Aa}from"./mount-component-COyTfLeg.js";import{n as La,s as pt,b as at,a as Me,c as Oe,d as Fa,f as Xe}from"./format-BUPkFkKG.js";import{C as Na}from"./index-CI1npSWs.js";import{M as ja,T as bt,X as yt,o as Wa,f as xt,a as Ya,V as Va}from"./XYZ-CZPLbATp.js";import{t as Ha,a as Ua}from"./tdt-B-KCefEB.js";function _t(e,l){return e.reduce((a,u)=>Math.abs(a-l)<Math.abs(u-l)?a:u)}const[Ht,wt]=ee("action-bar"),Ut=Symbol(Ht),Xa={placeholder:Boolean,safeAreaInsetBottom:G};var Ka=F({name:Ht,props:Xa,setup(e,{slots:l}){const a=M(),u=Sa(a,wt),{linkChildren:i}=Ke(Ut);i();const t=()=>{var v;return p("div",{ref:a,class:[wt(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(v=l.default)==null?void 0:v.call(l)])};return()=>e.placeholder?u(t):t()}});const Za=ie(Ka),[qa,Ga]=ee("action-bar-button"),Ja=xe({},Nt,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Qa=F({name:qa,props:Ja,setup(e,{slots:l}){const a=Ba(),{parent:u,index:i}=Ze(Ut),t=T(()=>{if(u){const s=u.children[i.value-1];return!(s&&"isButton"in s)}}),v=T(()=>{if(u){const s=u.children[i.value+1];return!(s&&"isButton"in s)}});return Te({isButton:!0}),()=>{const{type:s,icon:r,text:o,color:m,loading:k,disabled:h}=e;return p(ye,{class:Ga([s,{last:v.value,first:t.value}]),size:"large",type:s,icon:r,color:m,loading:k,disabled:h,onClick:a},{default:()=>[l.default?l.default():o]})}}});const $t=ie(Qa);function en(e,l,a){let u,i=0;const t=e.scrollLeft,v=a===0?1:Math.round(a*1e3/16);let s=t;function r(){Dt(u)}function o(){s+=(l-t)/v,e.scrollLeft=s,++i<v&&(u=st(o))}return o(),r}function tn(e,l,a,u){let i,t=It(e);const v=t<l,s=a===0?1:Math.round(a*1e3/16),r=(l-t)/s;function o(){Dt(i)}function m(){t+=r,(v&&t>l||!v&&t<l)&&(t=l),aa(e,t),v&&t<l||!v&&t>l?i=st(m):u&&(i=st(u))}return m(),o}function an(){const e=M([]),l=[];return na(()=>{e.value=[]}),[e,u=>(l[u]||(l[u]=i=>{e.value[u]=i}),l[u])]}function Xt(e,l){if(!Et||!window.IntersectionObserver)return;const a=new IntersectionObserver(t=>{l(t[0].intersectionRatio>0)},{root:document.body}),u=()=>{e.value&&a.observe(e.value)},i=()=>{e.value&&a.unobserve(e.value)};rt(i),Mt(i),Ot(u)}const[nn,sn]=ee("sticky"),on={zIndex:ve,position:_e("top"),container:Object,offsetTop:de(0),offsetBottom:de(0)};var ln=F({name:nn,props:on,emits:["scroll","change"],setup(e,{emit:l,slots:a}){const u=M(),i=it(u),t=je({fixed:!1,width:0,height:0,transform:0}),v=M(!1),s=T(()=>Rt(e.position==="top"?e.offsetTop:e.offsetBottom)),r=T(()=>{if(v.value)return;const{fixed:h,height:f,width:c}=t;if(h)return{width:`${c}px`,height:`${f}px`}}),o=T(()=>{if(!t.fixed||v.value)return;const h=xe(sa(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${s.value}px`});return t.transform&&(h.transform=`translate3d(0, ${t.transform}px, 0)`),h}),m=h=>l("scroll",{scrollTop:h,isFixed:t.fixed}),k=()=>{if(!u.value||Se(u))return;const{container:h,position:f}=e,c=pe(u),g=It(window);if(t.width=c.width,t.height=c.height,f==="top")if(h){const d=pe(h),y=d.bottom-s.value-t.height;t.fixed=s.value>c.top&&d.bottom>0,t.transform=y<0?y:0}else t.fixed=s.value>c.top;else{const{clientHeight:d}=document.documentElement;if(h){const y=pe(h),_=d-y.top-s.value-t.height;t.fixed=d-s.value<c.bottom&&d>y.top,t.transform=_<0?-_:0}else t.fixed=d-s.value<c.bottom}m(g)};return X(()=>t.fixed,h=>l("change",h)),We("scroll",k,{target:i,passive:!0}),Xt(u,k),X([Pe,ze],()=>{!u.value||Se(u)||!t.fixed||(v.value=!0,le(()=>{const h=pe(u);t.width=h.width,t.height=h.height,v.value=!1}))}),()=>{var h;return p("div",{ref:u,style:r.value},[p("div",{class:sn({fixed:t.fixed&&!v.value}),style:o.value},[(h=a.default)==null?void 0:h.call(a)])])}}});const rn=ie(ln),[Kt,Ve]=ee("swipe"),cn={loop:G,width:ve,height:ve,vertical:Boolean,autoplay:de(0),duration:de(500),touchable:G,lazyRender:Boolean,initialSwipe:de(0),indicatorColor:String,showIndicators:G,stopPropagation:G},Zt=Symbol(Kt);var un=F({name:Kt,props:cn,emits:["change","dragStart","dragEnd"],setup(e,{emit:l,slots:a}){const u=M(),i=M(),t=je({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let v=!1;const s=zt(),{children:r,linkChildren:o}=Ke(Zt),m=T(()=>r.length),k=T(()=>t[e.vertical?"height":"width"]),h=T(()=>e.vertical?s.deltaY.value:s.deltaX.value),f=T(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-k.value*m.value:0),c=T(()=>k.value?Math.ceil(Math.abs(f.value)/k.value):m.value),g=T(()=>m.value*k.value),d=T(()=>(t.active+m.value)%m.value),y=T(()=>{const E=e.vertical?"vertical":"horizontal";return s.direction.value===E}),_=T(()=>{const E={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+t.offset.toFixed(2)}px)`};if(k.value){const j=e.vertical?"height":"width",W=e.vertical?"width":"height";E[j]=`${g.value}px`,E[W]=e[W]?`${e[W]}px`:""}return E}),S=E=>{const{active:j}=t;return E?e.loop?et(j+E,-1,m.value):et(j+E,0,c.value):j},P=(E,j=0)=>{let W=E*k.value;e.loop||(W=Math.min(W,-f.value));let te=j-W;return e.loop||(te=et(te,f.value,0)),te},x=({pace:E=0,offset:j=0,emitChange:W})=>{if(m.value<=1)return;const{active:te}=t,C=S(E),R=P(C,j);if(e.loop){if(r[0]&&R!==f.value){const L=R<f.value;r[0].setOffset(L?g.value:0)}if(r[m.value-1]&&R!==0){const L=R>0;r[m.value-1].setOffset(L?-g.value:0)}}t.active=C,t.offset=R,W&&C!==te&&l("change",d.value)},O=()=>{t.swiping=!0,t.active<=-1?x({pace:m.value}):t.active>=m.value&&x({pace:-m.value})},I=()=>{O(),s.reset(),Re(()=>{t.swiping=!1,x({pace:-1,emitChange:!0})})},U=()=>{O(),s.reset(),Re(()=>{t.swiping=!1,x({pace:1,emitChange:!0})})};let D;const B=()=>clearTimeout(D),V=()=>{B(),+e.autoplay>0&&m.value>1&&(D=setTimeout(()=>{U(),V()},+e.autoplay))},Z=(E=+e.initialSwipe)=>{if(!u.value)return;const j=()=>{var W,te;if(!Se(u)){const C={width:u.value.offsetWidth,height:u.value.offsetHeight};t.rect=C,t.width=+((W=e.width)!=null?W:C.width),t.height=+((te=e.height)!=null?te:C.height)}m.value&&(E=Math.min(m.value-1,E),E===-1&&(E=m.value-1)),t.active=E,t.swiping=!0,t.offset=P(E),r.forEach(C=>{C.setOffset(0)}),V()};Se(u)?le().then(j):j()},re=()=>Z(t.active);let oe;const q=E=>{!e.touchable||E.touches.length>1||(s.start(E),v=!1,oe=Date.now(),B(),O())},ce=E=>{e.touchable&&t.swiping&&(s.move(E),y.value&&(!e.loop&&(t.active===0&&h.value>0||t.active===m.value-1&&h.value<0)||(la(E,e.stopPropagation),x({offset:h.value}),v||(l("dragStart",{index:d.value}),v=!0))))},we=()=>{if(!e.touchable||!t.swiping)return;const E=Date.now()-oe,j=h.value/E;if((Math.abs(j)>.25||Math.abs(h.value)>k.value/2)&&y.value){const te=e.vertical?s.offsetY.value:s.offsetX.value;let C=0;e.loop?C=te>0?h.value>0?-1:1:0:C=-Math[h.value>0?"ceil":"floor"](h.value/k.value),x({pace:C,emitChange:!0})}else h.value&&x({pace:0});v=!1,t.swiping=!1,l("dragEnd",{index:d.value}),V()},Ge=(E,j={})=>{O(),s.reset(),Re(()=>{let W;e.loop&&E===m.value?W=t.active===0?0:E:W=E%m.value,j.immediate?Re(()=>{t.swiping=!1}):t.swiping=!1,x({pace:W-t.active,emitChange:!0})})},Je=(E,j)=>{const W=j===d.value,te=W?{backgroundColor:e.indicatorColor}:void 0;return p("i",{style:te,class:Ve("indicator",{active:W})},null)},Qe=()=>{if(a.indicator)return a.indicator({active:d.value,total:m.value});if(e.showIndicators&&m.value>1)return p("div",{class:Ve("indicators",{vertical:e.vertical})},[Array(m.value).fill("").map(Je)])};return Te({prev:I,next:U,state:t,resize:re,swipeTo:Ge}),o({size:k,props:e,count:m,activeIndicator:d}),X(()=>e.initialSwipe,E=>Z(+E)),X(m,()=>Z(t.active)),X(()=>e.autoplay,V),X([Pe,ze,()=>e.width,()=>e.height],re),X(oa(),E=>{E==="visible"?V():B()}),be(Z),ct(()=>Z(t.active)),jt(()=>Z(t.active)),rt(B),Mt(B),We("touchmove",ce,{target:i}),()=>{var E;return p("div",{ref:u,class:Ve()},[p("div",{ref:i,style:_.value,class:Ve("track",{vertical:e.vertical}),onTouchstartPassive:q,onTouchend:we,onTouchcancel:we},[(E=a.default)==null?void 0:E.call(a)]),Qe()])}}});const dn=ie(un),[mn,kt]=ee("tabs");var fn=F({name:mn,props:{count:tt(Number),inited:Boolean,animated:Boolean,duration:tt(ve),swipeable:Boolean,lazyRender:Boolean,currentIndex:tt(Number)},emits:["change"],setup(e,{emit:l,slots:a}){const u=M(),i=s=>l("change",s),t=()=>{var s;const r=(s=a.default)==null?void 0:s.call(a);return e.animated||e.swipeable?p(dn,{ref:u,loop:!1,class:kt("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:i},{default:()=>[r]}):r},v=s=>{const r=u.value;r&&r.state.active!==s&&r.swipeTo(s,{immediate:!e.inited})};return X(()=>e.currentIndex,v),be(()=>{v(e.currentIndex)}),Te({swipeRef:u}),()=>p("div",{class:kt("content",{animated:e.animated||e.swipeable})},[t()])}});const[qt,He]=ee("tabs"),vn={type:_e("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:de(0),duration:de(.3),animated:Boolean,ellipsis:G,swipeable:Boolean,scrollspy:Boolean,offsetTop:de(0),background:String,lazyRender:G,showHeader:G,lineWidth:ve,lineHeight:ve,beforeChange:Function,swipeThreshold:de(5),titleActiveColor:String,titleInactiveColor:String},Gt=Symbol(qt);var hn=F({name:qt,props:vn,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:l,slots:a}){let u,i,t,v,s;const r=M(),o=M(),m=M(),k=M(),h=Wt(),f=it(r),[c,g]=an(),{children:d,linkChildren:y}=Ke(Gt),_=je({inited:!1,position:"",lineStyle:{},currentIndex:-1}),S=T(()=>d.length>+e.swipeThreshold||!e.ellipsis||e.shrink),P=T(()=>({borderColor:e.color,background:e.background})),x=(C,R)=>{var L;return(L=C.name)!=null?L:R},O=T(()=>{const C=d[_.currentIndex];if(C)return x(C,_.currentIndex)}),I=T(()=>Rt(e.offsetTop)),U=T(()=>e.sticky?I.value+u:0),D=C=>{const R=o.value,L=c.value;if(!S.value||!R||!L||!L[_.currentIndex])return;const ae=L[_.currentIndex].$el,Q=ae.offsetLeft-(R.offsetWidth-ae.offsetWidth)/2;v&&v(),v=en(R,Q,C?0:+e.duration)},B=()=>{const C=_.inited;le(()=>{const R=c.value;if(!R||!R[_.currentIndex]||e.type!=="line"||Se(r.value))return;const L=R[_.currentIndex].$el,{lineWidth:ae,lineHeight:Q}=e,ge=L.offsetLeft+L.offsetWidth/2,$e={width:Le(ae),backgroundColor:e.color,transform:`translateX(${ge}px) translateX(-50%)`};if(C&&($e.transitionDuration=`${e.duration}s`),ot(Q)){const Ye=Le(Q);$e.height=Ye,$e.borderRadius=Ye}_.lineStyle=$e})},V=C=>{const R=C<_.currentIndex?-1:1;for(;C>=0&&C<d.length;){if(!d[C].disabled)return C;C+=R}},Z=(C,R)=>{const L=V(C);if(!ot(L))return;const ae=d[L],Q=x(ae,L),ge=_.currentIndex!==null;_.currentIndex!==L&&(_.currentIndex=L,R||D(),B()),Q!==e.active&&(l("update:active",Q),ge&&l("change",Q,ae.title)),t&&!e.scrollspy&&ia(Math.ceil(vt(r.value)-I.value))},re=(C,R)=>{const L=d.findIndex((ae,Q)=>x(ae,Q)===C);Z(L===-1?0:L,R)},oe=(C=!1)=>{if(e.scrollspy){const R=d[_.currentIndex].$el;if(R&&f.value){const L=vt(R,f.value)-U.value;i=!0,s&&s(),s=tn(f.value,L,C?0:+e.duration,()=>{i=!1})}}},q=(C,R,L)=>{const{title:ae,disabled:Q}=d[R],ge=x(d[R],R);Q||(Yt(e.beforeChange,{args:[ge],done:()=>{Z(R),oe()}}),Da(C)),l("clickTab",{name:ge,title:ae,event:L,disabled:Q})},ce=C=>{t=C.isFixed,l("scroll",C)},we=C=>{le(()=>{re(C),oe(!0)})},Ge=()=>{for(let C=0;C<d.length;C++){const{top:R}=pe(d[C].$el);if(R>U.value)return C===0?0:C-1}return d.length-1},Je=()=>{if(e.scrollspy&&!i){const C=Ge();Z(C)}},Qe=()=>{if(e.type==="line"&&d.length)return p("div",{class:He("line"),style:_.lineStyle},null)},E=()=>{var C,R,L;const{type:ae,border:Q,sticky:ge}=e,$e=[p("div",{ref:ge?void 0:m,class:[He("wrap"),{[ra]:ae==="line"&&Q}]},[p("div",{ref:o,role:"tablist",class:He("nav",[ae,{shrink:e.shrink,complete:S.value}]),style:P.value,"aria-orientation":"horizontal"},[(C=a["nav-left"])==null?void 0:C.call(a),d.map(Ye=>Ye.renderTitle(q)),Qe(),(R=a["nav-right"])==null?void 0:R.call(a)])]),(L=a["nav-bottom"])==null?void 0:L.call(a)];return ge?p("div",{ref:m},[$e]):$e},j=()=>{B(),le(()=>{var C,R;D(!0),(R=(C=k.value)==null?void 0:C.swipeRef.value)==null||R.resize()})};X(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],B),X(Pe,j),X(()=>e.active,C=>{C!==O.value&&re(C)}),X(()=>d.length,()=>{_.inited&&(re(e.active),B(),le(()=>{D(!0)}))});const W=()=>{re(e.active,!0),le(()=>{_.inited=!0,m.value&&(u=pe(m.value).height),D(!0)})},te=(C,R)=>l("rendered",C,R);return Te({resize:j,scrollTo:we}),ct(B),jt(B),Ot(W),Xt(r,B),We("scroll",Je,{target:f,passive:!0}),y({id:h,props:e,setLine:B,scrollable:S,onRendered:te,currentName:O,setTitleRefs:g,scrollIntoView:D}),()=>p("div",{ref:r,class:He([e.type])},[e.showHeader?e.sticky?p(rn,{container:r.value,offsetTop:I.value,onScroll:ce},{default:()=>[E()]}):E():null,p(fn,{ref:k,count:d.length,inited:_.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:_.currentIndex,onChange:Z},{default:()=>{var C;return[(C=a.default)==null?void 0:C.call(a)]}})])}});const Jt=Symbol(),gn=()=>ca(Jt,null),[pn,Tt]=ee("tab"),bn=F({name:pn,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:ve,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:G},setup(e,{slots:l}){const a=T(()=>{const i={},{type:t,color:v,disabled:s,isActive:r,activeColor:o,inactiveColor:m}=e;v&&t==="card"&&(i.borderColor=v,s||(r?i.backgroundColor=v:i.color=v));const h=r?o:m;return h&&(i.color=h),i}),u=()=>{const i=p("span",{class:Tt("text",{ellipsis:!e.scrollable})},[l.title?l.title():e.title]);return e.dot||ot(e.badge)&&e.badge!==""?p(Ia,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[i]}):i};return()=>p("div",{id:e.id,role:"tab",class:[Tt([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:a.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[u()])}}),[yn,xn]=ee("swipe-item");var _n=F({name:yn,setup(e,{slots:l}){let a;const u=je({offset:0,inited:!1,mounted:!1}),{parent:i,index:t}=Ze(Zt);if(!i)return;const v=T(()=>{const o={},{vertical:m}=i.props;return i.size.value&&(o[m?"height":"width"]=`${i.size.value}px`),u.offset&&(o.transform=`translate${m?"Y":"X"}(${u.offset}px)`),o}),s=T(()=>{const{loop:o,lazyRender:m}=i.props;if(!m||a)return!0;if(!u.mounted)return!1;const k=i.activeIndicator.value,h=i.count.value-1,f=k===0&&o?h:k-1,c=k===h&&o?0:k+1;return a=t.value===k||t.value===f||t.value===c,a}),r=o=>{u.offset=o};return be(()=>{le(()=>{u.mounted=!0})}),Te({setOffset:r}),()=>{var o;return p("div",{class:xn(),style:v.value},[s.value?(o=l.default)==null?void 0:o.call(l):null])}}});const wn=ie(_n),[$n,nt]=ee("tab"),kn=xe({},Nt,{dot:Boolean,name:ve,badge:ve,title:String,disabled:Boolean,titleClass:At,titleStyle:[String,Object],showZeroBadge:G});var Tn=F({name:$n,props:kn,setup(e,{slots:l}){const a=Wt(),u=M(!1),i=ma(),{parent:t,index:v}=Ze(Gt);if(!t)return;const s=()=>{var c;return(c=e.name)!=null?c:v.value},r=()=>{u.value=!0,t.props.lazyRender&&le(()=>{t.onRendered(s(),e.title)})},o=T(()=>{const c=s()===t.currentName.value;return c&&!u.value&&r(),c}),m=M(""),k=M("");ua(()=>{const{titleClass:c,titleStyle:g}=e;m.value=c?K(c):"",k.value=g&&typeof g!="string"?da(me(g)):g});const h=c=>p(bn,qe({key:a,id:`${t.id}-${v.value}`,ref:t.setTitleRefs(v.value),style:k.value,class:m.value,isActive:o.value,controls:a,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:g=>c(i.proxy,v.value,g)},Fe(t.props,["type","color","shrink"]),Fe(e,["dot","badge","title","disabled","showZeroBadge"])),{title:l.title}),f=M(!o.value);return X(o,c=>{c?f.value=!1:Re(()=>{f.value=!0})}),X(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),fa(Jt,o),Te({id:a,renderTitle:h}),()=>{var c;const g=`${t.id}-${v.value}`,{animated:d,swipeable:y,scrollspy:_,lazyRender:S}=t.props;if(!l.default&&!d)return;const P=_||o.value;if(d||y)return p(wn,{id:a,role:"tabpanel",class:nt("panel-wrapper",{inactive:f.value}),tabindex:o.value?0:-1,"aria-hidden":!o.value,"aria-labelledby":g,"data-allow-mismatch":"attribute"},{default:()=>{var I;return[p("div",{class:nt("panel")},[(I=l.default)==null?void 0:I.call(l)])]}});const O=u.value||_||!S?(c=l.default)==null?void 0:c.call(l):null;return Be(p("div",{id:a,role:"tabpanel",class:nt("panel"),tabindex:P?0:-1,"aria-labelledby":g,"data-allow-mismatch":"attribute"},[O]),[[ut,P]])}}});const Cn=ie(Tn),Pn=ie(hn),[Qt,Sn]=ee("row"),ea=Symbol(Qt),Bn={tag:_e("div"),wrap:G,align:String,gutter:{type:[String,Number,Array],default:0},justify:String};var Dn=F({name:Qt,props:Bn,setup(e,{slots:l}){const{children:a,linkChildren:u}=Ke(ea),i=T(()=>{const s=[[]];let r=0;return a.forEach((o,m)=>{r+=Number(o.span),r>24?(s.push([m]),r-=24):s[s.length-1].push(m)}),s}),t=T(()=>{let s=0;Array.isArray(e.gutter)?s=Number(e.gutter[0])||0:s=Number(e.gutter);const r=[];return s&&i.value.forEach(o=>{const m=s*(o.length-1)/o.length;o.forEach((k,h)=>{if(h===0)r.push({right:m});else{const f=s-r[k-1].right,c=m-f;r.push({left:f,right:c})}})}),r}),v=T(()=>{const{gutter:s}=e,r=[];if(Array.isArray(s)&&s.length>1){const o=Number(s[1])||0;if(o<=0)return r;i.value.forEach((m,k)=>{k!==i.value.length-1&&m.forEach(()=>{r.push({bottom:o})})})}return r});return u({spaces:t,verticalSpaces:v}),()=>{const{tag:s,wrap:r,align:o,justify:m}=e;return p(s,{class:Sn({[`align-${o}`]:o,[`justify-${m}`]:m,nowrap:!r})},{default:()=>{var k;return[(k=l.default)==null?void 0:k.call(l)]}})}}});const[In,En]=ee("col"),Mn={tag:_e("div"),span:de(0),offset:ve};var On=F({name:In,props:Mn,setup(e,{slots:l}){const{parent:a,index:u}=Ze(ea),i=T(()=>{if(!a)return;const{spaces:t,verticalSpaces:v}=a;let s={};if(t&&t.value&&t.value[u.value]){const{left:o,right:m}=t.value[u.value];s={paddingLeft:o?`${o}px`:null,paddingRight:m?`${m}px`:null}}const{bottom:r}=v.value[u.value]||{};return xe(s,{marginBottom:r?`${r}px`:null})});return()=>{const{tag:t,span:v,offset:s}=e;return p(t,{style:i.value,class:En({[v]:v,[`offset-${s}`]:s})},{default:()=>{var r;return[(r=l.default)==null?void 0:r.call(l)]}})}}});const Rn=ie(On),[zn,ue,Ue]=ee("dialog"),An=xe({},Ra,{title:String,theme:String,width:ve,message:[String,Function],callback:Function,allowHtml:Boolean,className:At,transition:_e("van-dialog-bounce"),messageAlign:String,closeOnPopstate:G,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:G,closeOnClickOverlay:Boolean,keyboardEnabled:G,destroyOnClose:Boolean}),Ln=[...Oa,"transition","closeOnPopstate","destroyOnClose"];var Fn=F({name:zn,props:An,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:l,slots:a}){const u=M(),i=je({confirm:!1,cancel:!1}),t=y=>l("update:show",y),v=y=>{var _;t(!1),(_=e.callback)==null||_.call(e,y)},s=y=>()=>{e.show&&(l(y),e.beforeClose?(i[y]=!0,Yt(e.beforeClose,{args:[y],done(){v(y),i[y]=!1},canceled(){i[y]=!1}})):v(y))},r=s("cancel"),o=s("confirm"),m=va(y=>{var _,S;if(!e.keyboardEnabled||y.target!==((S=(_=u.value)==null?void 0:_.popupRef)==null?void 0:S.value))return;({Enter:e.showConfirmButton?o:ht,Escape:e.showCancelButton?r:ht})[y.key](),l("keydown",y)},["enter","esc"]),k=()=>{const y=a.title?a.title():e.title;if(y)return p("div",{class:ue("header",{isolated:!e.message&&!a.default})},[y])},h=y=>{const{message:_,allowHtml:S,messageAlign:P}=e,x=ue("message",{"has-title":y,[P]:P}),O=ha(_)?_():_;return S&&typeof O=="string"?p("div",{class:x,innerHTML:O},null):p("div",{class:x},[O])},f=()=>{if(a.default)return p("div",{class:ue("content")},[a.default()]);const{title:y,message:_,allowHtml:S}=e;if(_){const P=!!(y||a.title);return p("div",{key:S?1:0,class:ue("content",{isolated:!P})},[h(P)])}},c=()=>p("div",{class:[pa,ue("footer")]},[e.showCancelButton&&p(ye,{size:"large",text:e.cancelButtonText||Ue("cancel"),class:ue("cancel"),style:{color:e.cancelButtonColor},loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:r},null),e.showConfirmButton&&p(ye,{size:"large",text:e.confirmButtonText||Ue("confirm"),class:[ue("confirm"),{[ga]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:o},null)]),g=()=>p(Za,{class:ue("footer")},{default:()=>[e.showCancelButton&&p($t,{type:"warning",text:e.cancelButtonText||Ue("cancel"),class:ue("cancel"),color:e.cancelButtonColor,loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:r},null),e.showConfirmButton&&p($t,{type:"danger",text:e.confirmButtonText||Ue("confirm"),class:ue("confirm"),color:e.confirmButtonColor,loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:o},null)]}),d=()=>a.footer?a.footer():e.theme==="round-button"?g():c();return()=>{const{width:y,title:_,theme:S,message:P,className:x}=e;return p(Vt,qe({ref:u,role:"dialog",class:[ue([S]),x],style:{width:Le(y)},tabindex:0,"aria-labelledby":_||P,onKeydown:m,"onUpdate:show":t},Fe(e,Ln)),{default:()=>[k(),f(),d()]})}}});let lt;const Nn={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let jn=xe({},Nn);function Wn(){({instance:lt}=za({setup(){const{state:l,toggle:a}=Aa();return()=>p(Fn,qe(l,{"onUpdate:show":a}),null)}}))}function Yn(e){return Et?new Promise((l,a)=>{lt||Wn(),lt.open(xe({},jn,e,{callback:u=>{(u==="confirm"?l:a)(u)}}))}):Promise.resolve(void 0)}const Ne=e=>Yn(xe({showCancelButton:!0},e)),[Vn,Hn]=ee("divider"),Un={dashed:Boolean,hairline:G,vertical:Boolean,contentPosition:_e("center")};var Xn=F({name:Vn,props:Un,setup(e,{slots:l}){return()=>{var a;return p("div",{role:"separator",class:Hn({dashed:e.dashed,hairline:e.hairline,vertical:e.vertical,[`content-${e.contentPosition}`]:!!l.default&&!e.vertical})},[!e.vertical&&((a=l.default)==null?void 0:a.call(l))])}}});const Kn=ie(Xn),Zn={gap:{type:[Number,Object],default:24},icon:String,axis:_e("y"),magnetic:String,offset:{type:Object,default:()=>({x:-1,y:-1})},teleport:{type:[String,Object],default:"body"}},[qn,Ct]=ee("floating-bubble");var Gn=F({name:qn,inheritAttrs:!1,props:Zn,emits:["click","update:offset","offsetChange"],setup(e,{slots:l,emit:a,attrs:u}){const i=M(),t=M({x:0,y:0,width:0,height:0}),v=T(()=>gt(e.gap)?e.gap.x:e.gap),s=T(()=>gt(e.gap)?e.gap.y:e.gap),r=T(()=>({top:s.value,right:Pe.value-t.value.width-v.value,bottom:ze.value-t.value.height-s.value,left:v.value})),o=M(!1);let m=!1;const k=T(()=>{const x={},O=Le(t.value.x),I=Le(t.value.y);return x.transform=`translate3d(${O}, ${I}, 0)`,(o.value||!m)&&(x.transition="none"),x}),h=()=>{if(!P.value)return;const{width:x,height:O}=pe(i.value),{offset:I}=e;t.value={x:I.x>-1?I.x:Pe.value-x-v.value,y:I.y>-1?I.y:ze.value-O-s.value,width:x,height:O}},f=zt();let c=0,g=0;const d=x=>{f.start(x),o.value=!0,c=t.value.x,g=t.value.y};We("touchmove",x=>{if(x.preventDefault(),f.move(x),e.axis!=="lock"&&!f.isTap.value){if(e.axis==="x"||e.axis==="xy"){let I=c+f.deltaX.value;I<r.value.left&&(I=r.value.left),I>r.value.right&&(I=r.value.right),t.value.x=I}if(e.axis==="y"||e.axis==="xy"){let I=g+f.deltaY.value;I<r.value.top&&(I=r.value.top),I>r.value.bottom&&(I=r.value.bottom),t.value.y=I}const O=Fe(t.value,["x","y"]);a("update:offset",O)}},{target:i});const _=()=>{o.value=!1,le(()=>{if(e.magnetic==="x"){const x=_t([r.value.left,r.value.right],t.value.x);t.value.x=x}if(e.magnetic==="y"){const x=_t([r.value.top,r.value.bottom],t.value.y);t.value.y=x}if(!f.isTap.value){const x=Fe(t.value,["x","y"]);a("update:offset",x),(c!==x.x||g!==x.y)&&a("offsetChange",x)}})},S=x=>{f.isTap.value?a("click",x):x.stopPropagation()};be(()=>{h(),le(()=>{m=!0})}),X([Pe,ze,v,s,()=>e.offset],h,{deep:!0});const P=M(!0);return ct(()=>{P.value=!0}),rt(()=>{e.teleport&&(P.value=!1)}),()=>{const x=Be(p("div",qe({class:Ct(),ref:i,onTouchstartPassive:d,onTouchend:_,onTouchcancel:_,onClickCapture:S,style:k.value},u),[l.default?l.default():p(Ea,{name:e.icon,class:Ct("icon")},null)]),[[ut,P.value]]);return e.teleport?p(ba,{to:e.teleport},{default:()=>[x]}):x}}});const Jn=ie(Gn),[Qn,Ce,es]=ee("list"),ts={error:Boolean,offset:de(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:_e("down"),loadingText:String,finishedText:String,immediateCheck:G};var as=F({name:Qn,props:ts,emits:["load","update:error","update:loading"],setup(e,{emit:l,slots:a}){const u=M(e.loading),i=M(),t=M(),v=gn(),s=it(i),r=T(()=>e.scroller||s.value),o=()=>{le(()=>{if(u.value||e.finished||e.disabled||e.error||(v==null?void 0:v.value)===!1)return;const{direction:c}=e,g=+e.offset,d=pe(r);if(!d.height||Se(i))return;let y=!1;const _=pe(t);c==="up"?y=d.top-_.top<=g:y=_.bottom-d.bottom<=g,y&&(u.value=!0,l("update:loading",!0),l("load"))})},m=()=>{if(e.finished){const c=a.finished?a.finished():e.finishedText;if(c)return p("div",{class:Ce("finished-text")},[c])}},k=()=>{l("update:error",!1),o()},h=()=>{if(e.error){const c=a.error?a.error():e.errorText;if(c)return p("div",{role:"button",class:Ce("error-text"),tabindex:0,onClick:k},[c])}},f=()=>{if(u.value&&!e.finished&&!e.disabled)return p("div",{class:Ce("loading")},[a.loading?a.loading():p(xa,{class:Ce("loading-icon")},{default:()=>[e.loadingText||es("loading")]})])};return X(()=>[e.loading,e.finished,e.error],o),v&&X(v,c=>{c&&o()}),ya(()=>{u.value=e.loading}),be(()=>{e.immediateCheck&&o()}),Te({check:o}),We("scroll",o,{target:r,passive:!0}),()=>{var c;const g=(c=a.default)==null?void 0:c.call(a),d=p("div",{ref:t,class:Ce("placeholder")},null);return p("div",{ref:i,role:"feed",class:Ce(),"aria-busy":u.value},[e.direction==="down"?g:d,f(),m(),h(),e.direction==="up"?g:d])}}});const ta=ie(as),ns=ie(Dn),ss="/travel-plan/assets/empty-travel-B0sIUAVX.png";function os(e,l){const a=l.getTime();if(e.status=="completed")return ne.completed;if(e.status=="deleted")return ne.deleted;if(e.status=="cancelled")return ne.cancelled;const u=24*60*60*1e3;return a>=e.startDateTime-u&&a<e.startDateTime&&e.status!=ne.upcoming&&(e.status=ne.upcoming,fe().updateTravelPlan(e)),a>e.endDateTime&&e.status!=ne.expired&&(e.status=ne.expired,fe().updateTravelPlan(e)),a>=e.startDateTime&&a<=e.endDateTime&&e.status!=ne.inProgress&&(e.status=ne.inProgress,fe().updateTravelPlan(e)),e.status}function ls(e,l){const a=l.getTime();if(a<e.startDateTime)return 0;if(a>e.endDateTime)return 100;const u=e.endDateTime-e.startDateTime,i=a-e.startDateTime;return Math.round(i/u*100)}const rs={class:"card-content relative z-10"},is={class:"card-header flex justify-between items-start mb-3 gap-2"},cs={class:"plan-title flex-1 text-base font-semibold text-gray-800 truncate mr-2"},us={class:"header-right flex items-center gap-1.5"},ds={key:0,class:"tags-container flex flex-wrap gap-1.5 mb-2.5"},ms={key:1,class:"location-info flex items-center text-sm text-gray-500 mb-2.5"},fs={class:"location-text"},vs={key:2,class:"plan-description text-sm text-gray-600 mb-3 line-clamp-2 leading-relaxed"},hs={key:3,class:"budget-info flex items-center text-sm text-gray-500 mb-3"},gs={class:"budget-text"},ps={key:4,class:"progress-container h-2 bg-gray-200 rounded mb-3 mt-4 relative"},bs={class:"progress-text absolute right-0 -top-4 text-xs text-green-500 font-medium"},ys={class:"time-info flex mt-2"},xs={class:"time-item flex items-center w-full"},_s={class:"time-details flex-1"},ws={class:"time-range text-xs text-gray-600 inline-flex items-center gap-1 flex-wrap"},$s={class:"font-bold"},ks={class:"font-bold"},Ts={key:0,class:"all-day-badge text-xs px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded ml-1.5"},Cs=F({__name:"PlanCard",props:{plan:{}},emits:["update-plan","cancel-plan"],setup(e,{emit:l}){const a=e,u=fe(),{now:i}=ke(u),t=T(()=>os(a.plan,i.value)),v=T(()=>ls(a.plan,i.value)),s=T(()=>a.plan.status==="cancelled"),r=T(()=>t.value==="completed"),o=M(!1),m=T(()=>{const D=[];return s.value?D.push({name:"撤销取消",icon:"revoke",callback:()=>{a.plan.status=ne.planned,u.updateTravelPlan(a.plan)}}):(r.value?D.push({name:"撤销完成",icon:"revoke",callback:()=>{a.plan.status=ne.planned,u.updateTravelPlan(a.plan)}}):(D.push({name:"编辑",icon:"edit",color:"green",callback:U}),D.push({name:"标记完成",icon:"success",color:"#10B981",callback:()=>{a.plan.status=ne.completed,u.updateTravelPlan(a.plan)}}),D.push({name:"延后一天",icon:"clock-o",color:"#1E90FF",callback:()=>{a.plan.startDateTime+=24*60*60*1e3,a.plan.endDateTime+=24*60*60*1e3,u.updateTravelPlan(a.plan)}})),D.push({name:"取消计划",icon:"delete-o",color:"#FF8C00",callback:()=>{a.plan.status=ne.cancelled,u.updateTravelPlan(a.plan)}}),D.push({name:"删除计划",icon:"fail",color:"red",callback:()=>{Ne({title:"确定要删除此计划吗？",confirmButtonText:"确定"}).then(()=>{a.plan.status=ne.deleted,u.deleteTravelPlan(a.plan)})}})),D}),k=T(()=>s.value?"bg-gray-50":""),h=T(()=>({planned:"bg-gray-400",upcoming:"bg-yellow-400","in-progress":"bg-green-400",completed:"bg-blue-400",expired:"bg-red-400",cancelled:"bg-gray-400",deleted:"bg-gray-400"})[t.value]),f=T(()=>({planned:"bg-gray-100 text-gray-800",upcoming:"bg-yellow-100 text-yellow-800","in-progress":"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",expired:"bg-red-100 text-red-800",cancelled:"bg-gray-200 text-gray-700",deleted:"bg-gray-100 text-gray-800"})[t.value]),c=T(()=>({planned:"未开始",upcoming:"即将开始","in-progress":"进行中",completed:"已完成",expired:"已结束",cancelled:"已取消",deleted:"已删除"})[t.value]),g=T(()=>({low:"bg-blue-100 text-blue-800",high:"bg-red-100 text-red-800",medium:""})[a.plan.priority]),d=T(()=>({low:"低优先级",high:"高优先级",medium:""})[a.plan.priority]),y=T(()=>{switch(t.value){case"cancelled":return"此计划已取消";case"upcoming":return`计划即将在 ${I.value} 后开始`;case"planned":return`${I.value} 后开始`;default:return null}}),_=T(()=>{switch(t.value){case"cancelled":return"text-red-500 bg-red-50";case"upcoming":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}}),S=T(()=>{switch(t.value){case"cancelled":return"info-o";case"upcoming":return"warning-o";default:return"clock-o"}}),P=D=>{const B=new Date(D);return{date:B.toLocaleDateString(),time:B.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}},x=T(()=>P(a.plan.startDateTime)),O=T(()=>P(a.plan.endDateTime)),I=T(()=>{const D=a.plan.startDateTime-i.value.getTime();if(D<=0)return"";const B=Math.floor(D/(1e3*60*60)),V=Math.floor(D%(1e3*60*60)/(1e3*60));return B>=24?`${Math.floor(B/24)}天`:B>=1?`${B}小时${V}分钟`:`${V}分钟`}),U=()=>{dt.push({name:"EditPlan",params:{travelPlanId:a.plan.travelPlanId}})};return(D,B)=>{const V=Ee,Z=ye,re=Ie;return b(),w("div",{class:K(["plan-card relative w-full bg-white rounded-xl shadow-sm p-4 mb-4 overflow-hidden transition-all duration-300 active:scale-[0.98] border border-gray-100",k.value]),onClick:U},[n("div",{class:K(["card-accent absolute top-0 left-0 w-1 h-full",h.value])},null,2),D.plan.priority!=="medium"?(b(),w("div",{key:0,class:K(["priority-flag absolute bottom-3 -right-5 w-20 py-0.5 text-center text-xs font-medium transform -rotate-45 z-100",g.value])},$(d.value),3)):z("",!0),n("div",rs,[n("div",is,[n("h3",cs,$(D.plan.title),1),n("div",us,[n("div",{class:K(["status-badge text-xs px-2 py-1 rounded-xl font-medium whitespace-nowrap ml-2",f.value])},$(c.value),3),p(Z,{round:"",size:"mini",plain:"",onClick:B[0]||(B[0]=mt(oe=>o.value=!0,["stop"])),class:"action-button p-0 w-6 h-6 min-w-6 border border-gray-200 bg-white text-gray-500"},{default:A(()=>[p(V,{name:"ellipsis",size:"14"})]),_:1})])]),D.plan.tags&&D.plan.tags.length>0?(b(),w("div",ds,[(b(!0),w(N,null,Y(D.plan.tags,(oe,q)=>(b(),w("span",{key:q,class:"tag text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-xl inline-flex items-center"},$(oe),1))),128))])):z("",!0),D.plan.location?(b(),w("div",ms,[p(V,{name:"location-o",class:"location-icon mr-1.5 text-gray-400"}),n("span",fs,$(D.plan.location.name),1)])):z("",!0),D.plan.description?(b(),w("p",vs,$(D.plan.description),1)):z("",!0),D.plan.budget?(b(),w("div",hs,[p(V,{name:"balance-o",class:"budget-icon mr-1.5 text-gray-400"}),n("span",gs,"预算: ¥"+$(D.plan.budget.toLocaleString()),1)])):z("",!0),t.value==="in-progress"?(b(),w("div",ps,[n("div",{class:"progress-bar h-full rounded bg-gradient-to-r from-green-400 to-green-600 transition-all duration-600 ease-in-out",style:me({width:`${v.value}%`})},null,4),n("span",bs,$(v.value)+"% ",1)])):z("",!0),n("div",ys,[n("div",xs,[p(V,{name:"calendar-o",class:"time-icon mr-2 text-gray-400 text-sm flex-shrink-0"}),n("div",_s,[n("span",ws,[n("span",$s,$(x.value.date),1),J(" "+$(x.value.time)+" ",1),B[2]||(B[2]=n("span",{class:"time-separator text-gray-400 mx-1 font-normal"},"→",-1)),n("span",ks,$(O.value.date),1),J(" "+$(O.value.time),1)]),D.plan.isAllDay?(b(),w("span",Ts,"全天")):z("",!0)])])]),y.value?(b(),w("div",{key:5,class:K(["status-hint flex items-center text-xs px-2.5 py-1.5 rounded mt-2.5",_.value])},[p(V,{name:S.value,class:"hint-icon mr-1.5 text-sm"},null,8,["name"]),n("span",null,$(y.value),1)],2)):z("",!0)]),p(re,{teleport:"body",show:o.value,"onUpdate:show":B[1]||(B[1]=oe=>o.value=oe),title:D.plan.title,actions:m.value,"cancel-text":"取消","close-on-click-action":"",class:"action-sheet"},null,8,["show","title","actions"])],2)}}}),Pt=he(Cs,[["__scopeId","data-v-4ec6f8b5"]]);function Ps(e,l,a){const[u,i]=La(a==null?void 0:a.in,e,l);return+pt(u,a)==+pt(i,a)}const Ss={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},Bs=(e,l,a)=>{let u;const i=Ss[e];return typeof i=="string"?u=i:l===1?u=i.one:u=i.other.replace("{{count}}",String(l)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?u+"内":u+"前":u},Ds={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},Is={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},Es={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Ms={date:at({formats:Ds,defaultWidth:"full"}),time:at({formats:Is,defaultWidth:"full"}),dateTime:at({formats:Es,defaultWidth:"full"})};function St(e,l,a){const u="eeee p";return Ps(e,l,a)?u:e.getTime()>l.getTime()?"'下个'"+u:"'上个'"+u}const Os={lastWeek:St,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:St,other:"PP p"},Rs=(e,l,a,u)=>{const i=Os[e];return typeof i=="function"?i(l,a,u):i},zs={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},As={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},Ls={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},Fs={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},Ns={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},js={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Ws=(e,l)=>{const a=Number(e);switch(l==null?void 0:l.unit){case"date":return a.toString()+"日";case"hour":return a.toString()+"时";case"minute":return a.toString()+"分";case"second":return a.toString()+"秒";default:return"第 "+a.toString()}},Ys={ordinalNumber:Ws,era:Me({values:zs,defaultWidth:"wide"}),quarter:Me({values:As,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Me({values:Ls,defaultWidth:"wide"}),day:Me({values:Fs,defaultWidth:"wide"}),dayPeriod:Me({values:Ns,defaultWidth:"wide",formattingValues:js,defaultFormattingWidth:"wide"})},Vs=/^(第\s*)?\d+(日|时|分|秒)?/i,Hs=/\d+/i,Us={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},Xs={any:[/^(前)/i,/^(公元)/i]},Ks={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},Zs={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},qs={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},Gs={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},Js={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},Qs={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},eo={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},to={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},ao={ordinalNumber:Fa({matchPattern:Vs,parsePattern:Hs,valueCallback:e=>parseInt(e,10)}),era:Oe({matchPatterns:Us,defaultMatchWidth:"wide",parsePatterns:Xs,defaultParseWidth:"any"}),quarter:Oe({matchPatterns:Ks,defaultMatchWidth:"wide",parsePatterns:Zs,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Oe({matchPatterns:qs,defaultMatchWidth:"wide",parsePatterns:Gs,defaultParseWidth:"any"}),day:Oe({matchPatterns:Js,defaultMatchWidth:"wide",parsePatterns:Qs,defaultParseWidth:"any"}),dayPeriod:Oe({matchPatterns:eo,defaultMatchWidth:"any",parsePatterns:to,defaultParseWidth:"any"})},Bt={code:"zh-CN",formatDistance:Bs,formatLong:Ms,formatRelative:Rs,localize:Ys,match:ao,options:{weekStartsOn:1,firstWeekContainsDate:4}},no={class:"w-full h-full flex flex-col gap-4 overflow-auto thin-scrollbar"},so={key:0,class:"expired-plans-section"},oo={class:"current-plans-section"},lo={class:"date-header rounded sticky top-0 z-1000 bg-white px-4 py-1 backdrop-blur-sm"},ro={class:"text-sm font-medium text-gray-800"},io={class:"ml-2 text-xs text-gray-500"},co={key:1,class:"empty-state"},uo=F({__name:"index",setup(e){Lt();const l=fe(),{currentTravel:a,travelPlansBeforeToday:u,travelPlansFromToday:i}=ke(l),t=M(!1),v=r=>{const o=new Date,m=new Date(o);return m.setDate(m.getDate()+1),r.toDateString()===o.toDateString()?"今天":r.toDateString()===m.toDateString()?"明天":r.getFullYear()===o.getFullYear()?Xe(r,"M月d日 EEE",{locale:Bt}):Xe(r,"yyyy年M月d日 EEE",{locale:Bt})},s=T(()=>{var o;const r={};return(o=i.value)==null||o.forEach(m=>{const k=new Date(m.startDateTime).toDateString();r[k]||(r[k]=[]),r[k].push(m)}),r});return(r,o)=>{var h,f;const m=Kn,k=ft("remember-scroll");return Be((b(),w("div",no,[p(_a,{name:"fade-slide-y"},{default:A(()=>{var c;return[t.value&&((c=H(u))!=null&&c.length)?(b(),w("div",so,[o[1]||(o[1]=n("div",{class:"section-header text-gray-500 text-sm px-2 py-1"}," 已结束的计划 ",-1)),p(De,{name:"list",tag:"div",class:"px-4"},{default:A(()=>[(b(!0),w(N,null,Y(H(u),(g,d)=>(b(),se(Pt,{key:g.id,plan:g,class:"expired-plan"},null,8,["plan"]))),128))]),_:1})])):z("",!0)]}),_:1}),Be(n("div",null,[p(m,{class:"custom-divider"},{default:A(()=>[n("span",{class:"divider-text",onClick:o[0]||(o[0]=c=>t.value=!t.value)},$(t.value?"隐藏更早的计划":"显示更早的计划"),1)]),_:1})],512),[[ut,(h=H(u))==null?void 0:h.length]]),n("div",oo,[(f=H(i))!=null&&f.length?(b(!0),w(N,{key:0},Y(s.value,(c,g)=>(b(),w("div",{key:g,class:"plan-group"},[n("div",lo,[n("span",ro,$(v(new Date(g))),1),n("span",io," 开始"+$(c.length)+"个计划 ",1)]),p(De,{name:"list",tag:"div",class:"px-4"},{default:A(()=>[(b(!0),w(N,null,Y(c,d=>(b(),se(Pt,{key:d.id,plan:d,class:"current-plan"},null,8,["plan"]))),128))]),_:2},1024)]))),128)):(b(),w("div",co,o[2]||(o[2]=[n("img",{src:ss,alt:"空状态",class:"empty-image"},null,-1),n("p",{class:"empty-text"},"暂无旅行计划",-1),n("p",{class:"empty-hint"},"点击下方按钮创建您的旅行计划",-1)]))),o[3]||(o[3]=n("div",{class:"shrink-0 h-[220px]"},null,-1))])])),[[k]])}}}),mo=he(uo,[["__scopeId","data-v-ba7c1a7f"]]),fo="/travel-plan/assets/empty-checklist-HhKlvO9r.png",vo={class:"item-main flex items-start"},ho={class:"item-content flex-1"},go={class:"item-header flex justify-between items-center mb-1.5"},po={class:"item-meta flex items-center mb-1.5"},bo={class:"quantity text-sm text-gray-600"},yo={key:0,class:"item-notes flex items-center text-sm text-gray-500"},xo=F({__name:"ChecklistItemCard",props:{item:{}},setup(e){const l=e,a=fe(),u={low:"#1989fa",medium:"#ff976a",high:"#ee0a24"},i=T({get:()=>l.item.isPacked,set:c=>{l.item.isPacked=c,a.updateTravelChecklist(l.item)}}),t=M(!1),v=T(()=>Ae.filter([{name:"编辑",value:"edit",color:"green",icon:"edit"},{name:"设为高优先级",value:"high",color:"#ee0a24",icon:"fire"},{name:"设为中优先级",value:"medium",color:"#ff976a",icon:"warning"},{name:"设为低优先级",value:"low",color:"#1989fa",icon:"arrow-down"},{name:"删除",value:"delete",color:"red",icon:"delete"}],c=>c.value!==l.item.importance)),s=c=>{switch(c.value){case"edit":dt.push({name:"EditChecklist",params:{itemId:l.item.itemId}});break;case"delete":Ne({title:"确定删除该条清单吗？",message:"删除后无法恢复",confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{a.deleteTravelChecklist(l.item)});break;case"high":case"medium":case"low":l.item.importance=c.value,a.updateTravelChecklist(l.item);break}},r=M(1),o=M(!1),m=()=>{o.value=!0,r.value=.98},k=()=>{o.value=!1,r.value=1},h=()=>{},f=c=>{i.value=c};return(c,g)=>{const d=Na,y=Ee,_=ye,S=Ft,P=Ie;return b(),w("div",{class:K(["checklist-item relative w-full bg-white rounded-xl shadow-sm p-4 mb-3 transition-all duration-300 border border-gray-100 active:scale-[0.98]",{"bg-gray-50 opacity-80":c.item.isPacked}]),onClick:h,onTouchstart:m,onTouchend:k,style:me({transform:`scale(${r.value})`,"border-left":`4px solid ${u[c.item.importance]}`})},[n("div",vo,[p(d,{modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=x=>i.value=x),name:c.item.id.toString(),onChange:f,class:"item-checkbox mr-3 mt-0.5",shape:"square","checked-color":"#07c160","icon-size":"18px"},null,8,["modelValue","name"]),n("div",ho,[n("div",go,[n("h3",{class:K(["item-name flex-1 text-base font-medium text-gray-800 truncate mr-2",{"line-through text-gray-500":c.item.isPacked}])},$(c.item.name),3),p(_,{round:"",size:"mini",plain:"",onClick:g[1]||(g[1]=mt(x=>t.value=!0,["stop"])),class:"action-button p-0 w-6 h-6 min-w-6 border border-gray-200 bg-white text-gray-500"},{default:A(()=>[p(y,{name:"ellipsis",size:"14"})]),_:1})]),n("div",po,[p(S,{class:"category-tag mr-2 text-xs rounded",plain:"",type:"primary",size:"medium"},{default:A(()=>[J($(c.item.tag),1)]),_:1}),n("span",bo," x"+$(c.item.quantity),1)]),c.item.notes?(b(),w("div",yo,[p(y,{name:"notes-o",size:"14",class:"mr-1"}),n("span",null,$(c.item.notes),1)])):z("",!0)])]),p(P,{teleport:"body",show:t.value,"onUpdate:show":g[2]||(g[2]=x=>t.value=x),actions:v.value,title:c.item.name,"cancel-text":"取消","close-on-click-action":"",onSelect:s},null,8,["show","actions","title"])],38)}}}),_o=he(xo,[["__scopeId","data-v-e0781993"]]),wo={class:"w-full h-full p-0 flex flex-col overflow-auto thin-scrollbar"},$o={class:"grouping-control"},ko={key:0,class:"empty-state"},To={class:"section-header"},Co={class:"category-title"},Po={class:"category-count"},So=F({__name:"index",setup(e){const l=fe(),{travelChecklists:a}=ke(l),u=[{value:"tag",name:"标签"},{value:"importance",name:"优先级"},{value:"packed",name:"打包"}],i=M("tag"),t=M(!1),v=T(()=>{const o=a.value||[],m={};o.forEach(f=>{let c="";switch(i.value){case"tag":c=f.tag||"未分类";break;case"importance":c=f.importance||"medium";break;case"packed":c=f.isPacked?"已打包":"未打包";break}m[c]||(m[c]=[]),m[c].push(f)});const k={},h=Object.keys(m);switch(i.value){case"importance":["high","medium","low"].forEach(f=>{h.includes(f)&&(k[f]=m[f])});break;case"packed":["未打包","已打包"].forEach(f=>{h.includes(f)&&(k[f]=m[f])});break;default:h.sort().forEach(f=>{k[f]=m[f]})}return k}),s=T(()=>Object.keys(v.value).map(o=>i.value==="importance"?{key:o,display:o==="high"?"高优先级":o==="medium"?"中优先级":"低优先级",icon:o==="high"?"warning-o":o==="medium"?"records":"circle"}:i.value==="packed"?{key:o,display:o,icon:o==="已打包"?"checked":"clear"}:{key:o,display:o,icon:"label-o"}));async function r(o,m){o.isPacked=m,await l.updateTravelChecklist(o)}return(o,m)=>{const k=Ee,h=ye,f=Ie,c=ta,g=ft("remember-scroll");return Be((b(),w("div",wo,[n("div",$o,[p(h,{plain:"",hairline:"",type:"primary",size:"small",onClick:m[0]||(m[0]=d=>t.value=!0)},{icon:A(()=>[p(k,{name:"apps-o"})]),default:A(()=>{var d;return[J(" "+$((d=u.find(y=>y.value===i.value))==null?void 0:d.name),1)]}),_:1}),p(f,{teleport:"body",show:t.value,"onUpdate:show":m[1]||(m[1]=d=>t.value=d),actions:u,"cancel-text":"取消","close-on-click-action":"",onSelect:m[2]||(m[2]=d=>{i.value=d.value})},null,8,["show"])]),p(c,{class:"travel-checklist-list thin-scrollbar"},{default:A(()=>[s.value.length===0?(b(),w("div",ko,m[3]||(m[3]=[n("img",{src:fo,alt:"空状态",class:"empty-image"},null,-1),n("p",{class:"empty-text"},"暂无清单项",-1),n("p",{class:"empty-hint"},"点击下方按钮添加您的旅行物品",-1)]))):(b(),se(De,{key:1,name:"fade-slide-y",tag:"div",class:"categories-container"},{default:A(()=>[(b(!0),w(N,null,Y(s.value,({key:d,display:y,icon:_})=>(b(),w("div",{key:d,class:K(["category-section",{"packed-section":i.value==="packed"&&d==="已打包"}])},[n("div",To,[p(k,{name:_,class:"category-icon"},null,8,["name"]),n("span",Co,$(y),1),n("span",Po,$(v.value[d].length),1)]),p(De,{name:"list",tag:"div",class:"item-container"},{default:A(()=>[(b(!0),w(N,null,Y(v.value[d],S=>(b(),se(_o,{key:S.id,item:S,class:K({"packed-item":S.isPacked}),"onUpdate:isPacked":P=>r(S,P)},null,8,["item","class","onUpdate:isPacked"]))),128))]),_:2},1024)],2))),128))]),_:1})),m[4]||(m[4]=n("div",{class:"shrink-0 h-[220px]"},null,-1))]),_:1,__:[4]})])),[[g]])}}}),Bo=he(So,[["__scopeId","data-v-3001d752"]]),Do="/travel-plan/assets/empty-expense-CM_oImbK.png",Io={class:"item-main flex items-start"},Eo={class:"item-content flex-1"},Mo={class:"item-header flex justify-between items-center mb-1.5"},Oo={class:"amount-info flex items-baseline"},Ro={class:"currency text-sm font-medium text-gray-500 mr-1"},zo={key:0,class:"location-info flex items-center text-sm text-gray-500 mb-2.5"},Ao={class:"location-text"},Lo={class:"item-meta flex flex-col mb-1.5"},Fo={key:0,class:"description text-sm text-gray-700 mb-1"},No={class:"date-info flex items-center text-xs text-gray-500"},jo={class:"item-footer flex flex-wrap items-center"},Wo=F({__name:"ExpenseCard",props:{item:{}},setup(e){const l=e,a=fe(),u=T(()=>l.item.amount>1e3?"#ee0a24":l.item.amount>500?"#ff976a":"#1989fa"),i=M(!1),t=T(()=>Ae.reject([{name:"编辑",value:"edit",color:"green",icon:"edit"},{name:"标记为已报销",value:"reimburse",color:"#07c160",icon:"passed"},{name:"标记为未报销",value:"unreimburse",color:"#1989fa",icon:"revoke"},{name:"删除",value:"delete",color:"red",icon:"delete"}],c=>c.value==="reimburse"&&l.item.isReimbursed||c.value==="unreimburse"&&!l.item.isReimbursed)),v=c=>{switch(c.value){case"edit":dt.push({name:"EditExpense",params:{expenseId:l.item.expenseId}});break;case"delete":Ne({title:"确定删除这笔花费吗？",message:"删除后无法恢复",confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{a.deleteTravelExpense(l.item)});break;case"reimburse":l.item.isReimbursed=!0;break;case"unreimburse":l.item.isReimbursed=!1;break}},s=M(1),r=M(!1),o=()=>{r.value=!0,s.value=.98},m=()=>{r.value=!1,s.value=1},k=()=>{},h=c=>Xe(new Date(c),"yyyy/MM/dd HH:mm"),f=c=>({cash:"现金",credit_card:"信用卡",alipay:"支付宝",wechat_pay:"微信支付",bank_transfer:"银行转账",other:"其他"})[c]||c;return(c,g)=>{const d=Ee,y=ye,_=Ft,S=Ie;return b(),w("div",{class:K(["expense-item relative w-full bg-white rounded-xl shadow-sm p-4 mb-3 transition-all duration-300 border border-gray-100 active:scale-[0.98]",{"bg-gray-50 opacity-80":c.item.isReimbursed}]),onClick:k,onTouchstart:o,onTouchend:m,style:me({transform:`scale(${s.value})`,"border-left":`4px solid ${u.value}`})},[n("div",Io,[n("div",Eo,[n("div",Mo,[n("div",Oo,[n("span",Ro,$(c.item.currency),1),n("h3",{class:K(["amount text-xl font-semibold text-gray-800",{"line-through text-gray-500":c.item.isReimbursed}])},$(c.item.amount),3)]),p(y,{round:"",size:"mini",plain:"",onClick:g[0]||(g[0]=mt(P=>i.value=!0,["stop"])),class:"action-button p-0 w-6 h-6 min-w-6 border border-gray-200 bg-white text-gray-500"},{default:A(()=>[p(d,{name:"ellipsis",size:"14"})]),_:1})]),c.item.location?(b(),w("div",zo,[p(d,{name:"location-o",class:"location-icon mr-1.5 text-gray-400"}),n("span",Ao,$(c.item.location.name),1)])):z("",!0),n("div",Lo,[c.item.description?(b(),w("p",Fo,$(c.item.description),1)):z("",!0),n("div",No,[p(d,{name:"clock-o",size:"12",class:"mr-1"}),n("span",null,$(h(c.item.dateTime)),1)])]),n("div",jo,[c.item.paymentMethod?(b(),se(_,{key:0,class:"payment-tag mr-2 mb-1 text-xs rounded",plain:"",type:"primary",size:"medium"},{default:A(()=>[J($(f(c.item.paymentMethod)),1)]),_:1})):z("",!0),(b(!0),w(N,null,Y(c.item.tags,P=>(b(),se(_,{key:P,class:"expense-tag mr-2 mb-1 text-xs rounded",plain:"",type:"success",size:"medium"},{default:A(()=>[J($(P),1)]),_:2},1024))),128)),c.item.isReimbursed?(b(),se(_,{key:1,class:"reimbursed-tag mr-2 mb-1 text-xs rounded",plain:"",type:"success",size:"medium"},{default:A(()=>g[2]||(g[2]=[J(" 已报销 ")])),_:1,__:[2]})):z("",!0)])])]),p(S,{teleport:"body",show:i.value,"onUpdate:show":g[1]||(g[1]=P=>i.value=P),actions:t.value,title:c.item.description||"旅行花费","cancel-text":"取消","close-on-click-action":"",onSelect:v},null,8,["show","actions","title"])],38)}}}),Yo=he(Wo,[["__scopeId","data-v-91241413"]]),Vo={class:"w-full h-full p-0 flex flex-col overflow-auto thin-scrollbar"},Ho={class:"grouping-control"},Uo={key:0,class:"empty-state"},Xo={key:0,class:"summary-cards"},Ko={class:"summary-card total"},Zo={class:"summary-amount"},qo={class:"summary-card reimbursed"},Go={class:"summary-amount"},Jo={class:"section-header"},Qo={class:"category-title"},el={class:"category-count"},tl={class:"category-total"},al=F({__name:"index",setup(e){const l=fe(),{travelExpenses:a}=ke(l),u=[{value:"tag",name:"标签"},{value:"date",name:"日期"},{value:"currency",name:"货币"},{value:"payment",name:"支付方式"}],i=M("date"),t=M(!1),v=h=>new Date(h).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric",weekday:"short"}),s=T(()=>{const h=a.value||[],f={};h.forEach(d=>{var _;let y="";switch(i.value){case"tag":y=(_=d.tags)!=null&&_.length?d.tags[0]:"未分类";break;case"date":y=v(d.dateTime);break;case"currency":y=d.currency||"未知货币";break;case"payment":y=d.paymentMethod||"其他";break}f[y]||(f[y]=[]),f[y].push(d)});const c={};let g=Object.keys(f);switch(i.value){case"date":g.sort((_,S)=>f[S][0].dateTime-f[_][0].dateTime);break;case"currency":const d=["CNY","USD","EUR","JPY","GBP"];g.sort((_,S)=>{const P=d.indexOf(_),x=d.indexOf(S);return P===-1&&x===-1?_.localeCompare(S):P===-1?1:x===-1?-1:P-x});break;case"payment":const y=["alipay","wechat_pay","credit_card","cash","bank_transfer"];g.sort((_,S)=>{const P=y.indexOf(_),x=y.indexOf(S);return P===-1&&x===-1?_.localeCompare(S):P===-1?1:x===-1?-1:P-x});break;case"tag":default:g.sort((_,S)=>_.localeCompare(S))}return g.forEach(d=>{c[d]=f[d]}),c}),r=T(()=>{const h={};return Object.keys(s.value).forEach(f=>{const c=s.value[f];if(i.value==="currency")h[f]={amount:c.reduce((g,d)=>g+d.amount,0),currency:f};else{const g={};c.forEach(d=>{g[d.currency]||(g[d.currency]=0),g[d.currency]+=d.amount}),h[f]={amount:Object.values(g).reduce((d,y)=>d+y,0),currency:Object.entries(g).map(([d,y])=>`${y.toFixed(2)} ${d}`).join(" + ")}}}),h}),o=T(()=>{const h={};return(a.value||[]).forEach(f=>{h[f.currency]||(h[f.currency]=0),h[f.currency]+=f.amount}),h}),m=T(()=>{const h={};return(a.value||[]).filter(f=>f.isReimbursed).forEach(f=>{h[f.currency]||(h[f.currency]=0),h[f.currency]+=f.amount}),h}),k=T(()=>Object.keys(s.value).map(h=>i.value==="payment"?{key:h,display:h==="cash"?"现金":h==="credit_card"?"信用卡":h==="alipay"?"支付宝":h==="wechat_pay"?"微信支付":h==="bank_transfer"?"银行转账":"其他支付",icon:h==="cash"?"cash-o":h==="credit_card"?"credit-pay":h==="alipay"?"alipay":h==="wechat_pay"?"wechat":h==="bank_transfer"?"balance-o":"more-o"}:i.value==="currency"?{key:h,display:h==="CNY"?"人民币":h==="USD"?"美元":h==="EUR"?"欧元":h==="JPY"?"日元":h==="GBP"?"英镑":h,icon:"gold-coin-o"}:{key:h,display:h,icon:i.value==="date"?"calendar-o":"label-o"}));return(h,f)=>{const c=Ee,g=ye,d=Ie,y=Rn,_=ns,S=ta,P=ft("remember-scroll");return Be((b(),w("div",Vo,[n("div",Ho,[p(g,{plain:"",hairline:"",type:"primary",size:"small",onClick:f[0]||(f[0]=x=>t.value=!0)},{icon:A(()=>[p(c,{name:"apps-o"})]),default:A(()=>{var x;return[J(" "+$((x=u.find(O=>O.value===i.value))==null?void 0:x.name),1)]}),_:1}),p(d,{teleport:"body",show:t.value,"onUpdate:show":f[1]||(f[1]=x=>t.value=x),actions:u,"cancel-text":"取消","close-on-click-action":"",onSelect:f[2]||(f[2]=x=>{i.value=x.value})},null,8,["show"])]),p(S,{class:"travel-expense-list thin-scrollbar"},{default:A(()=>[k.value.length===0?(b(),w("div",Uo,f[3]||(f[3]=[n("img",{src:Do,alt:"空状态",class:"empty-image"},null,-1),n("p",{class:"empty-text"},"暂无花费记录",-1),n("p",{class:"empty-hint"},"点击下方按钮添加您的旅行花费",-1)]))):(b(),se(De,{key:1,name:"fade-slide-y",tag:"div",class:"categories-container"},{default:A(()=>[H(a)&&H(a).length>0?(b(),w("div",Xo,[p(_,{gutter:"8"},{default:A(()=>[p(y,{span:"12"},{default:A(()=>[n("div",Ko,[f[4]||(f[4]=n("div",{class:"summary-title"},"总花费",-1)),n("div",Zo,[Object.keys(o.value).length>1?(b(!0),w(N,{key:0},Y(o.value,(x,O)=>(b(),w("div",{key:O},$(x.toFixed(2))+" "+$(O),1))),128)):(b(),w(N,{key:1},[J($(Object.values(o.value)[0]||"0.00")+" "+$(Object.keys(o.value)[0]||"CNY"),1)],64))])])]),_:1}),p(y,{span:"12"},{default:A(()=>{var x;return[n("div",qo,[f[5]||(f[5]=n("div",{class:"summary-title"},"已报销",-1)),n("div",Go,[Object.keys(m.value).length>1?(b(!0),w(N,{key:0},Y(m.value,(O,I)=>(b(),w("div",{key:I},$(O.toFixed(2))+" "+$(I),1))),128)):(b(),w(N,{key:1},[J($(((x=Object.values(m.value)[0])==null?void 0:x.toFixed(2))||"0.00")+" "+$(Object.keys(m.value)[0]||"CNY"),1)],64))])])]}),_:1})]),_:1})])):z("",!0),(b(!0),w(N,null,Y(k.value,({key:x,display:O,icon:I})=>(b(),w("div",{key:x,class:"category-section"},[n("div",Jo,[p(c,{name:I,class:"category-icon"},null,8,["name"]),n("span",Qo,$(O),1),n("span",el,$(s.value[x].length)+"项 ",1),n("span",tl,$(r.value[x].currency),1)]),p(De,{name:"list",tag:"div",class:"item-container"},{default:A(()=>[(b(!0),w(N,null,Y(s.value[x],U=>(b(),se(Yo,{key:U.expenseId,item:U,class:K({"reimbursed-item":U.isReimbursed})},null,8,["item","class"]))),128))]),_:2},1024)]))),128))]),_:1})),f[6]||(f[6]=n("div",{class:"shrink-0 h-[220px]"},null,-1))]),_:1,__:[6]})])),[[P]])}}}),nl=he(al,[["__scopeId","data-v-25622eff"]]),sl={class:"bg-white rounded-xl shadow-sm p-4 border border-gray-100"},ol={class:"space-y-4"},ll={class:"bg-blue-50 p-4 rounded-lg"},rl={class:"text-base font-medium text-gray-800 mb-1"},il={key:0,class:"text-sm text-gray-600"},cl={class:"grid grid-cols-2 gap-3"},ul={class:"bg-gray-50 p-3 rounded-lg"},dl={class:"text-sm font-medium text-gray-700"},ml={class:"bg-gray-50 p-3 rounded-lg"},fl={class:"text-sm font-medium text-gray-700"},vl=F({__name:"TravelBasicInfo",props:{travel:{},travelDays:{}},setup(e){const l=e,a=T(()=>{if(!l.travel.startDateTime||!l.travel.endDateTime)return"";const i=new Date(l.travel.startDateTime),t=new Date(l.travel.endDateTime);return`${i.toLocaleDateString()} - ${t.toLocaleDateString()}`}),u=T(()=>l.travel.description&&l.travel.description.trim().length>0);return(i,t)=>(b(),w("div",sl,[t[2]||(t[2]=n("div",{class:"flex items-center mb-4"},[n("div",{class:"h-5 w-1 bg-blue-500 rounded-full mr-2"}),n("h2",{class:"text-lg font-semibold text-gray-800"},"旅行基本信息")],-1)),n("div",ol,[n("div",ll,[n("h3",rl,$(i.travel.name),1),u.value?(b(),w("p",il,$(i.travel.description),1)):z("",!0)]),n("div",cl,[n("div",ul,[t[0]||(t[0]=n("p",{class:"text-xs text-gray-500 mb-1"},"旅行时间",-1)),n("p",dl,$(a.value),1)]),n("div",ml,[t[1]||(t[1]=n("p",{class:"text-xs text-gray-500 mb-1"},"旅行天数",-1)),n("p",fl,$(i.travelDays)+" 天",1)])])])]))}}),hl=he(vl,[["__scopeId","data-v-d25876fd"]]),gl=F({__name:"MapView",props:{plans:{},travelId:{}},setup(e){const l=e,a=M(null),u=M(),i=M(),t=M([]),v={low:"#4CAF50",medium:"#FFC107",high:"#F44336"},s={completed:"#9E9E9E",cancelled:"#607D8B",expired:"#795548",default:"#2196F3"},r={飞机出行:"fa fa-plane",高铁出行:"fa fa-train",自驾游:"fa fa-car",租车服务:"fa fa-car",酒店住宿:"fa fa-bed",特色民宿:"fa fa-home",青旅体验:"fa fa-users",露营帐篷:"fa fa-fire",景区门票:"fa fa-ticket",导游服务:"fa fa-female",旅行保险:"fa fa-shield",行李托运:"fa fa-suitcase",机场接送:"fa fa-plane",当地美食:"fa fa-cutlery",美食街:"fa fa-road",特产购物:"fa fa-shopping-bag",景点拍照:"fa fa-camera",徒步路线:"fa fa-male",签证服务:"fa fa-book"},o=g=>Xe(new Date(g),"yyyy/MM/dd HH:mm"),m=async()=>{a.value&&(u.value=new ja({target:a.value,layers:[new bt({source:new yt({url:await Ha(),maxZoom:17})}),new bt({source:new yt({url:await Ua(),maxZoom:17})})],overlays:[]}),i.value=new Wa({popupClass:"default",closeBox:!0,onclose:()=>{var g;(g=u.value)==null||g.getTargetElement().focus()}}),u.value.addOverlay(i.value))},k=(g,d)=>{var S,P;if(!i.value||g.length===0)return;const y=Ae.sortBy(g,"startDateTime");let _='<div class="plan-popup">';g.length>1&&(_+=`<div class="popup-header">
      <h4>${g.length}项计划</h4>
    </div>`),_+='<div class="plan-list">',y.forEach(x=>{var D;const O=o(x.startDateTime),I=o(x.endDateTime),U=h(x);_+=`
      <div class="plan-item" data-plan-id="${x.travelPlanId}">
        <div class="plan-header">
          <span class="status-dot" style="background-color: ${U}"></span>
          <h5>${x.title}</h5>
          <span class="plan-status">${f(x.status)}</span>
        </div>
        <div class="plan-time">
          <i class="fa fa-clock-o"></i> ${O} - ${I}
        </div>
        ${x.description?`<div class="plan-description">${x.description}</div>`:""}
        ${(D=x.tags)!=null&&D.length?`
          <div class="plan-tags">
            ${x.tags.map(B=>`
              <span class="plan-tag">
                <i class="${r[B]||"fa fa-tag"}"></i> ${B}
              </span>
            `).join("")}
          </div>
        `:""}
      </div>
      <hr class="plan-divider">
    `}),_+="</div></div>",(S=i.value)==null||S.show(d,_),(P=i.value)==null||P.setPosition(d)},h=g=>{const d=Date.now();return g.status==="completed"?s.completed:g.status==="cancelled"?s.cancelled:g.endDateTime<d?s.expired:v[g.priority]||s.default},f=g=>({planning:"计划中",inProgress:"进行中",completed:"已完成",cancelled:"已取消"})[g]||"",c=()=>{var d;[...t.value].forEach(y=>{var _;l.plans.findIndex(S=>{var P;return(P=y.getElement())==null?void 0:P.className.includes(S.travelPlanId)})===-1&&((_=u.value)==null||_.removeOverlay(y),Ae.remove(t.value,y))});const g=Ae.groupBy(l.plans,y=>`${y.location.coordinates.lng},${y.location.coordinates.lat}`);if(Object.entries(g).forEach(([y,_])=>{var Z,re,oe;const[S,P]=y.split(",").map(Number),O=xt([S,P]),I=_[0],U=(Z=I.tags)!=null&&Z.length&&r[I.tags[0]]?`<i class="${r[I.tags[0]]}"></i>`:'<i class="fa fa-map-marker"></i>',D=h(I),B=_.length>1?"#9C27B0":D,V=t.value.findIndex(q=>_.some(ce=>{var we;return(we=q.getElement())==null?void 0:we.className.includes(ce.travelPlanId)}));if(V===-1){const q=new Ya({color:B});t.value.push(q),(re=u.value)==null||re.addOverlay(q),q.setClassName(_.map(ce=>ce.travelPlanId).join(" ")),q.show(O,U),(oe=q.getElement())==null||oe.addEventListener("click",ce=>{ce.stopPropagation(),k(_,O)})}else{const q=t.value[V];q.setColor(B),q.show(O,U),q.setClassName(_.map(ce=>ce.travelPlanId).join(" "))}}),l.plans.length){const y=l.plans[l.plans.length-1],_=[y.location.coordinates.lng,y.location.coordinates.lat];(d=u.value)==null||d.setView(new Va({center:xt(_),zoom:12}))}};return X(()=>l.plans,()=>{c()},{deep:!0}),be(async()=>{await le(),await m(),await c()}),(g,d)=>(b(),w("div",{ref_key:"mapElement",ref:a,class:"w-full h-full"},null,512))}}),pl=he(gl,[["__scopeId","data-v-ee42ea03"]]),bl={class:"p-4"},yl={class:"mb-6"},xl={class:"grid grid-cols-2 gap-3"},_l={class:"text-sm font-medium capitalize"},wl={class:"text-2xl font-bold mt-1"},$l={class:"mb-6"},kl={class:"flex space-x-3 overflow-x-auto pb-2"},Tl={class:"text-sm font-medium capitalize"},Cl={class:"text-xl font-bold mt-1"},Pl={class:"mb-6"},Sl={class:"flex flex-wrap gap-2"},Bl={class:"text-purple-600"},Dl={key:0,class:"mb-6"},Il={class:"flex justify-between items-center mb-3"},El={class:"flex items-center"},Ml={class:"text-sm text-gray-500 mr-2"},Ol=F({__name:"PlanStatistics",props:{plans:{},travelId:{}},setup(e){const l=e,a=T(()=>{const f={planned:0,upcoming:0,"in-progress":0,expired:0,completed:0,cancelled:0};return l.plans.forEach(c=>{c.status in f&&f[c.status]++}),f}),u=f=>{switch(f){case"planned":return"计划";case"upcoming":return"即将开始";case"in-progress":return"进行中";case"expired":return"已结束";case"completed":return"已完成";case"cancelled":return"已取消";default:return f}},i=T(()=>l.plans.reduce((f,c)=>(f[c.priority]=(f[c.priority]||0)+1,f),{})),t=f=>{switch(f){case"high":return"高";case"medium":return"中";case"low":return"低";default:return f}},v=T(()=>{const f=new Map;return l.plans.forEach(c=>{var g;(g=c.tags)==null||g.forEach(d=>{f.set(d,(f.get(d)||0)+1)})}),Array.from(f.entries()).sort((c,g)=>g[1]-c[1])}),s=T(()=>l.plans.filter(f=>{var c;return((c=f.location)==null?void 0:c.coordinates)&&f.startDateTime>=new Date().setHours(0,0,0,0)})),r=M(!1),o=M(!1);be(()=>{setTimeout(()=>{r.value=!0},300)});const m={planned:"bg-indigo-100 text-indigo-800",upcoming:"bg-blue-100 text-blue-800",inProgress:"bg-amber-100 text-amber-800",expired:"bg-gray-100 text-gray-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},k={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"},h=()=>{o.value=!o.value};return(f,c)=>(b(),w("div",bl,[c[4]||(c[4]=n("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"旅行计划统计",-1)),n("div",yl,[c[0]||(c[0]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"计划状态",-1)),n("div",xl,[(b(!0),w(N,null,Y(a.value,(g,d)=>(b(),w("div",{key:d,class:K(["sub-card rounded-xl p-3 shadow-sm",m[d]])},[n("div",_l,$(u(d)),1),n("div",wl,$(g),1)],2))),128))])]),n("div",$l,[c[1]||(c[1]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"优先级分布",-1)),n("div",kl,[(b(!0),w(N,null,Y(i.value,(g,d)=>(b(),w("div",{key:d,class:K(["sub-card flex-shrink-0 rounded-xl p-4 shadow-sm min-w-[120px]",k[d]])},[n("div",Tl,$(t(d)),1),n("div",Cl,$(g),1)],2))),128))])]),n("div",Pl,[c[2]||(c[2]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"热门标签",-1)),n("div",Sl,[(b(!0),w(N,null,Y(v.value.slice(0,8),([g,d],y)=>(b(),w("span",{key:y,class:"sub-card bg-gradient-to-r from-purple-100 to-blue-100 text-purple-800 text-sm px-3 py-2 rounded-lg font-medium shadow-xs"},[J(" #"+$(g)+" ",1),n("span",Bl,"("+$(d)+")",1)]))),128))])]),s.value.length>0?(b(),w("div",Dl,[n("div",Il,[c[3]||(c[3]=n("h3",{class:"text-lg font-semibold text-gray-800"},"位置分布",-1)),n("div",El,[n("span",Ml,$(s.value.length)+" 个地点 ",1),n("div",{onClick:h,class:"text-sm text-blue-600 hover:text-blue-800 focus:outline-none transition-colors"},$(o.value?"▼":"▲"),1)])]),n("div",{class:K(["bg-gray-50 rounded-xl overflow-hidden shadow-sm border border-gray-100 transition-all duration-300 ease-in-out",{"h-60":!o.value,"h-[80vh]":o.value}])},[r.value?(b(),se(pl,{key:0,plans:s.value,travelId:f.travelId},null,8,["plans","travelId"])):z("",!0)],2)])):z("",!0)]))}}),Rl=he(Ol,[["__scopeId","data-v-0fd3eb60"]]),zl={class:"px-4 py-6"},Al={class:"bg-white rounded-xl shadow-sm p-5 mb-6"},Ll={class:"flex items-center justify-between mb-2"},Fl={class:"text-gray-600 text-sm"},Nl={class:"font-bold text-primary-600"},jl={class:"relative pt-1"},Wl={class:"overflow-hidden h-3 mb-4 text-xs flex rounded-full bg-gray-200"},Yl={class:"text-xs text-gray-500 mt-1"},Vl={key:0,class:"bg-white rounded-xl shadow-sm p-5 mb-6"},Hl={class:"space-y-4"},Ul={class:"flex justify-between items-center mb-1"},Xl={class:"text-gray-700 font-medium"},Kl={class:"text-sm font-semibold"},Zl={class:"text-primary-600"},ql={class:"w-full bg-gray-100 rounded-full h-2"},Gl={key:1,class:"bg-white rounded-xl shadow-sm p-5"},Jl={class:"space-y-4"},Ql={class:"flex justify-between items-center mb-1"},er={class:"flex items-center"},tr={class:"text-gray-700 font-medium capitalize"},ar={class:"text-sm font-semibold"},nr={class:"text-primary-600"},sr={class:"w-full bg-gray-100 rounded-full h-2"},or=F({__name:"ChecklistStatistics",props:{items:{}},setup(e){const l=e,a=T(()=>{const s=l.items.length,r=l.items.filter(m=>m.isPacked).length,o=s-r;return{total:s,completed:r,remaining:o,percentage:s>0?Math.round(r/s*100):0}}),u=T(()=>{const s=new Map;return l.items.forEach(r=>{s.has(r.tag)||s.set(r.tag,{total:0,completed:0});const o=s.get(r.tag);o.total++,r.isPacked&&o.completed++}),Array.from(s.entries()).sort((r,o)=>o[1].total-r[1].total)}),i=T(()=>l.items.reduce((s,r)=>(s[r.importance]||(s[r.importance]={total:0,completed:0}),s[r.importance].total++,r.isPacked&&s[r.importance].completed++,s),{})),t=s=>({high:"bg-red-500",medium:"bg-yellow-500",low:"bg-green-500"})[s.toLowerCase()]||"bg-purple-500",v=s=>({high:"高",medium:"中",low:"低"})[s.toLowerCase()]||"未知";return(s,r)=>(b(),w("div",zl,[r[3]||(r[3]=n("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"旅行清单统计",-1)),n("div",Al,[r[0]||(r[0]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"完成进度",-1)),n("div",Ll,[n("span",Fl,$(a.value.completed)+" / "+$(a.value.total)+" 已完成",1),n("span",Nl,$(a.value.percentage)+"%",1)]),n("div",jl,[n("div",Wl,[n("div",{style:me({width:`${a.value.percentage}%`}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-gradient-to-r from-blue-500 to-teal-400"},null,4)])]),n("p",Yl,$(a.value.remaining)+" 项待完成 ",1)]),u.value.length>0?(b(),w("div",Vl,[r[1]||(r[1]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"分类统计",-1)),n("ul",Hl,[(b(!0),w(N,null,Y(u.value,([o,m],k)=>(b(),w("li",{key:k,class:"flex flex-col"},[n("div",Ul,[n("span",Xl,$(o),1),n("span",Kl,[n("span",Zl,$(m.completed),1),J(" / "+$(m.total),1)])]),n("div",ql,[n("div",{class:"h-2 rounded-full bg-gradient-to-r from-blue-400 to-indigo-500",style:me({width:`${m.completed/m.total*100}%`})},null,4)])]))),128))])])):z("",!0),Object.keys(i.value).length>0?(b(),w("div",Gl,[r[2]||(r[2]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"优先级统计",-1)),n("ul",Jl,[(b(!0),w(N,null,Y(i.value,(o,m)=>(b(),w("li",{key:m,class:"flex flex-col"},[n("div",Ql,[n("div",er,[n("span",{class:K(["w-3 h-3 rounded-full mr-2",t(m)])},null,2),n("span",tr,$(v(m)),1)]),n("span",ar,[n("span",nr,$(o.completed),1),J(" / "+$(o.total),1)])]),n("div",sr,[n("div",{class:K(["h-2 rounded-full",t(m)]),style:me({width:`${o.completed/o.total*100}%`})},null,6)])]))),128))])])):z("",!0)]))}}),lr=he(or,[["__scopeId","data-v-ecfaec9f"]]),rr={key:0,class:"bg-white rounded-xl shadow-sm p-4"},ir={class:"relative"},cr={key:0,class:"flex justify-center space-x-2 mb-2 overflow-x-auto pb-2"},ur={key:0},dr={class:"overflow-x-auto pb-2 -mx-2 px-2 scroll-touch",style:{"scrollbar-width":"none","-ms-overflow-style":"none"}},mr={class:"flex space-x-3 min-w-max relative"},fr={key:0,class:"absolute -top-8 left-1/2 -translate-x-1/2 text-xs font-medium text-gray-500 whitespace-nowrap"},vr={key:1,class:"absolute -top-7 left-1/2 -translate-x-1/2 text-xs text-gray-500 whitespace-nowrap"},hr={key:0,class:"text-gray-400"},gr={class:"relative h-32 w-9 flex flex-col justify-end"},pr={class:"absolute -top-6 left-1/2 -translate-x-1/2 text-[11px] font-medium bg-indigo-100 text-indigo-700 px-1.5 rounded-full shadow-sm whitespace-nowrap"},br={class:"mt-2 text-center space-y-0.5"},yr={class:"text-xs font-medium text-gray-700"},xr={class:"text-[11px] text-gray-400"},_r=F({__name:"ExpenseTrandCard",props:{expenses:{}},setup(e){const l=e,a=T(()=>{const i=new Map;l.expenses.forEach(o=>{const m=new Date(o.dateTime),k=m.toISOString().split("T")[0],h=`${m.getFullYear()}-${m.getMonth()}`;i.has(k)||i.set(k,{date:m,amount:0,monthKey:h,monthLabel:m.toLocaleDateString("zh-CN",{month:"long"}),yearLabel:m.getFullYear().toString(),showMonthLabel:!1,showYearLabel:!1}),i.get(k).amount+=o.amount});const t=Array.from(i.values()).sort((o,m)=>+o.date-+m.date);let v=0,s="",r=0;return t.forEach(o=>{v=Math.max(v,o.amount),o.date.getFullYear()!==r&&(o.showYearLabel=!0,r=o.date.getFullYear()),o.monthKey!==s&&(o.showMonthLabel=!0,s=o.monthKey)}),{items:t,maxAmount:v,monthDividers:t.reduce((o,m,k)=>(m.showMonthLabel&&o.push(k),o),[])}}),u=i=>a.value.maxAmount?`${i/a.value.maxAmount*80}%`:"0%";return(i,t)=>a.value.items.length>0?(b(),w("div",rr,[t[2]||(t[2]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"每日花费趋势",-1)),n("div",ir,[a.value.monthDividers.length>1?(b(),w("div",cr,[(b(!0),w(N,null,Y(a.value.monthDividers,(v,s)=>(b(),w("div",{key:s,class:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600 whitespace-nowrap"},[J($(a.value.items[v].monthLabel)+" ",1),a.value.items[v].showYearLabel?(b(),w("span",ur,$(a.value.items[v].yearLabel)+"年 ",1)):z("",!0)]))),128))])):z("",!0),n("div",dr,[n("div",mr,[(b(!0),w(N,null,Y(a.value.monthDividers,(v,s)=>(b(),w("div",{key:"divider-"+s,class:"absolute bottom-0 top-7 w-px bg-gray-200/80 z-10",style:me({left:`${v*40}px`})},null,4))),128)),(b(!0),w(N,null,Y(a.value.items,(v,s)=>(b(),w("div",{key:v.date.toISOString(),class:"flex flex-col items-center px-1 relative z-0"},[v.showYearLabel&&v.date.getMonth()===0?(b(),w("div",fr,$(v.yearLabel)+"年 ",1)):z("",!0),v.showMonthLabel?(b(),w("div",vr,[J($(v.monthLabel)+" ",1),v.date.getMonth()===0&&!v.showYearLabel?(b(),w("span",hr," ("+$(v.yearLabel)+") ",1)):z("",!0)])):z("",!0),n("div",gr,[t[0]||(t[0]=wa('<div class="absolute inset-0 flex flex-col justify-between"><div class="border-t border-gray-100/50"></div><div class="border-t border-gray-100/50"></div><div class="border-t border-gray-100/50"></div><div class="border-t border-gray-100/50"></div></div>',1)),n("div",{class:"relative w-full rounded-t-lg bg-gradient-to-t from-indigo-400 to-indigo-300 shadow-sm hover:shadow-md transition-all active:scale-[0.98]",style:me({height:u(v.amount)})},[n("div",pr," ¥"+$(v.amount.toFixed(0)),1)],4)]),n("div",br,[n("div",yr,$(v.date.getDate())+"日 ",1),n("div",xr,$(v.date.toLocaleDateString("zh-CN",{weekday:"short"})),1)])]))),128))])]),t[1]||(t[1]=n("div",{class:"absolute right-0 top-0 h-full w-8 bg-gradient-to-l from-white to-transparent pointer-events-none"},null,-1))])])):z("",!0)}}),wr={class:"p-4"},$r={class:"mb-6 bg-white rounded-xl shadow-sm p-5 active:scale-[0.98] transition-transform"},kr={class:"flex items-end"},Tr={class:"text-3xl font-bold text-indigo-600"},Cr={class:"grid grid-cols-1 gap-4 mb-6"},Pr={key:0,class:"bg-white rounded-xl shadow-sm p-5"},Sr={class:"space-y-4"},Br={class:"flex justify-between text-base mb-1"},Dr={class:"text-gray-700 font-medium"},Ir={class:"font-medium"},Er={class:"flex items-center"},Mr={class:"w-full bg-gray-100 rounded-full h-2.5 mr-2"},Or={class:"text-xs text-gray-400"},Rr={key:1,class:"bg-white rounded-xl shadow-sm p-5"},zr={class:"space-y-4"},Ar={class:"flex justify-between text-base mb-1"},Lr={class:"text-gray-700 font-medium capitalize"},Fr={class:"font-medium"},Nr={class:"flex items-center"},jr={class:"w-full bg-gray-100 rounded-full h-2.5 mr-2"},Wr={class:"text-xs text-gray-400"},Yr=F({__name:"ExpenseStatistics",props:{expenses:{}},setup(e){const l=e,a=T(()=>l.expenses.reduce((v,s)=>v+s.amount,0)),u=T(()=>{const v=new Map;return l.expenses.forEach(s=>{var r;(r=s.tags)==null||r.forEach(o=>{v.set(o,(v.get(o)||0)+s.amount)}),(!s.tags||s.tags.length===0)&&v.set("其他",(v.get("其他")||0)+s.amount)}),Array.from(v.entries()).sort((s,r)=>r[1]-s[1])}),i=T(()=>l.expenses.reduce((v,s)=>(v[s.paymentMethod]=(v[s.paymentMethod]||0)+s.amount,v),{})),t=v=>{switch(v){case"cash":return"现金";case"credit_card":return"信用卡";case"alipay":return"支付宝";case"wechat_pay":return"微信支付";case"bank_transfer":return"银行转账";case"other":return"其他";default:return v}};return(v,s)=>(b(),w("div",wr,[s[4]||(s[4]=n("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"旅行花费统计",-1)),n("div",$r,[s[1]||(s[1]=n("h3",{class:"text-sm font-medium text-gray-500 mb-1"},"总花费",-1)),n("div",kr,[n("p",Tr,$(a.value.toFixed(2)),1),s[0]||(s[0]=n("span",{class:"text-sm text-gray-500 ml-1 mb-1"},"元",-1))])]),n("div",Cr,[u.value.length>0?(b(),w("div",Pr,[s[2]||(s[2]=n("h3",{class:"text-lg font-semibold text-gray-700 mb-3"},"分类统计",-1)),n("ul",Sr,[(b(!0),w(N,null,Y(u.value,([r,o],m)=>(b(),w("li",{key:m,class:"active:scale-[0.98] transition-transform"},[n("div",Br,[n("span",Dr,$(r),1),n("span",Ir,$(o.toFixed(2))+" 元",1)]),n("div",Er,[n("div",Mr,[n("div",{class:"bg-gradient-to-r from-indigo-400 to-purple-400 h-2.5 rounded-full",style:me({width:`${o/a.value*100}%`})},null,4)]),n("span",Or,$((o/a.value*100).toFixed(1))+"%",1)])]))),128))])])):z("",!0),Object.keys(i.value).length>0?(b(),w("div",Rr,[s[3]||(s[3]=n("h3",{class:"text-lg font-semibold text-gray-700 mb-3"},"支付方式",-1)),n("ul",zr,[(b(!0),w(N,null,Y(i.value,(r,o)=>(b(),w("li",{key:o,class:"active:scale-[0.98] transition-transform"},[n("div",Ar,[n("span",Lr,$(t(o)),1),n("span",Fr,$(r.toFixed(2))+" 元",1)]),n("div",Nr,[n("div",jr,[n("div",{class:"bg-gradient-to-r from-amber-400 to-orange-400 h-2.5 rounded-full",style:me({width:`${r/a.value*100}%`})},null,4)]),n("span",Wr,$((r/a.value*100).toFixed(1))+"%",1)])]))),128))])])):z("",!0)]),p(_r,{expenses:l.expenses},null,8,["expenses"])]))}}),Vr={key:0,class:"text-center text-gray-600"},Hr={key:1,class:"w-full h-full p-2 flex gap-4 flex-col overflow-auto thin-scrollbar"},Ur=F({__name:"index",setup(e){$a();const l=fe(),{currentTravel:a,travelPlans:u,travelChecklists:i,travelExpenses:t}=ke(l),v=T(()=>{if(!a.value||!a.value.startDateTime||!a.value.endDateTime)return 0;const r=a.value.endDateTime-a.value.startDateTime;return Math.ceil(r/(1e3*60*60*24))+1}),s=async()=>{console.log("Loading data for travel")};return be(()=>{s()}),(r,o)=>H(a)?(b(),w("div",Hr,[p(hl,{travel:H(a),travelDays:v.value},null,8,["travel","travelDays"]),H(u)?(b(),se(Rl,{key:0,plans:H(u),travelId:H(a).travelId,class:"bg-white rounded-lg shadow p-6"},null,8,["plans","travelId"])):z("",!0),H(i)?(b(),se(lr,{key:1,items:H(i),class:"bg-white rounded-lg shadow p-6"},null,8,["items"])):z("",!0),H(t)?(b(),se(Yr,{key:2,expenses:H(t),class:"bg-white rounded-lg shadow p-6 mb-8"},null,8,["expenses"])):z("",!0),o[0]||(o[0]=n("div",{class:"shrink-0 h-[220px]"},null,-1))])):(b(),w("div",Vr," 请先创建旅行 "))}});function Xr(e){return new Promise(l=>setTimeout(l,e))}const Kr={class:"travel-plans-app"},Zr={class:"w-full h-full overflow-hidden rounded-lg shadow-lg thin-scrollbar"},qr=F({__name:"index",setup(e){const l=Lt(),a=fe(),u=ka(),{currentTravel:i,travelPlansBeforeToday:t,travelPlansFromToday:v,travelPlans:s}=ke(a),{activeTabName:r}=ke(u),o=M(!1),m=T(()=>{var g;return(g=a.travels)==null?void 0:g.map(d=>({text:d.name,value:d.travelId}))}),k=()=>{switch(console.log(r.value),r.value){case"plan":l.push({name:"CreatePlan"});break;case"checklist":l.push({name:"CreateChecklist"});break;case"expense":l.push({name:"CreateExpense"});break;case"stats":l.push({name:"stats"});break;default:console.error("无效的选项");return}},h=g=>{var y;console.log(g);const d=(y=a.travels)==null?void 0:y.find(_=>_.travelId===g.selectedValues[0]);d&&(a.switchTravel(d),o.value=!1)};be(async()=>{await Xr(1e3),i.value||Ne({title:"提示",message:"您还没有创建任何旅行, 是否立即创建?",confirmButtonText:"创建旅行",cancelButtonText:"取消"}).then(()=>{l.push({name:"CreateTravel"})})});const f=M(!1),c=[{name:"创建新旅行",color:"green",callback:()=>{l.push({name:"CreateTravel"})}},{name:"重命名旅行",color:"#1E90FF",callback:()=>{i.value&&l.push({name:"EditTravel",params:{travelId:i.value.travelId}})}},{name:"删除此旅行",color:"red",callback:()=>{Ne({title:"提示",message:"确定要删除此旅行吗?",confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{i.value&&a.deleteTravel(i.value)})}}];return(g,d)=>{var D;const y=Ee,_=Ma,S=Cn,P=Pn,x=Jn,O=Pa,I=Vt,U=Ie;return b(),w("div",Kr,[p(_,{title:((D=H(i))==null?void 0:D.name)||"旅行计划",class:"app-nav-bar",border:!1},Ta({right:A(()=>[p(y,{name:"ellipsis",size:"18",color:"white",onClick:d[0]||(d[0]=B=>f.value=!0)})]),_:2},[H(i)?{name:"title",fn:A(()=>{var B;return[n("div",{onClick:d[1]||(d[1]=V=>o.value=!0),class:"active:scale-95 transition-all"},[J($(((B=H(i))==null?void 0:B.name)||"旅行计划")+" ",1),p(y,{name:"arrow-down",size:"14",color:"white"})])]}),key:"0"}:void 0]),1032,["title"]),d[6]||(d[6]=n("div",{class:"app-background"},null,-1)),n("div",Zr,[p(P,{active:H(r),"onUpdate:active":d[2]||(d[2]=B=>Ca(r)?r.value=B:null),background:"linear-gradient(135deg, #6a11cb 0%, #2575fc 100%)",color:"#fff","title-active-color":"#fff","title-inactive-color":"rgba(255,255,255,0.7)",sticky:"",shrink:"",swipeable:!1,animated:"","lazy-render":"","offset-top":46,class:"w-full h-full overflow-hidden"},{default:A(()=>[p(S,{title:"计划",name:"plan",class:"w-full h-full overflow-hidden"},{default:A(()=>[p(mo)]),_:1}),p(S,{title:"清单",name:"checklist",class:"w-full h-full overflow-hidden"},{default:A(()=>[p(Bo)]),_:1}),p(S,{title:"花费",name:"expense",class:"w-full h-full overflow-hidden"},{default:A(()=>[p(nl)]),_:1}),p(S,{title:"统计",name:"stats",class:"w-full h-full overflow-hidden"},{default:A(()=>[p(Ur)]),_:1})]),_:1},8,["active"])]),H(r)!=="stats"?(b(),se(x,{key:0,axis:"xy",magnetic:"x",icon:"plus",onClick:k,class:"add-button"})):z("",!0),p(I,{show:o.value,"onUpdate:show":d[4]||(d[4]=B=>o.value=B),position:"bottom"},{default:A(()=>[p(O,{title:"选择旅行",columns:m.value,onCancel:d[3]||(d[3]=B=>o.value=!1),onConfirm:h},null,8,["columns"])]),_:1},8,["show"]),p(U,{teleport:"body","cancel-text":"取消",show:f.value,"onUpdate:show":d[5]||(d[5]=B=>f.value=B),actions:c,"close-on-click-action":""},null,8,["show"])])}}}),li=he(qr,[["__scopeId","data-v-2dddb0f4"]]);export{li as default};
