import{d as O,r as V,f as h,ag as i,ah as s,an as T,a as r,am as u,ap as g,ak as m,aq as F,B as E,X as L,ao as w,ai as n,aj as X,a5 as G,aw as C}from"./index-d8_m604x.js";import{A as H,T as J}from"./index-DLYdaup7.js";import{a as U,F as M}from"./index-BK36Oy50.js";import{B as K,P as Q}from"./mount-component-BIseKc7z.js";import{I as R,_ as A}from"./index-C3vBwbN3.js";import{c as I}from"./function-call-B-YzU1C_.js";const W=O({__name:"PrioritySelector",props:{modelValue:{}},emits:["update:modelValue"],setup(c,{emit:S}){const t=c,y=S,d=V(!1),p=h(()=>[{name:"高优先级",color:t.modelValue==="high"?"#ee0a24":"",icon:"warning-o",className:t.modelValue==="high"?"priority-high-active":"",callback:()=>_("high")},{name:"中优先级",color:t.modelValue==="medium"?"#ff976a":"",icon:"flag-o",className:t.modelValue==="medium"?"priority-medium-active":"",callback:()=>_("medium")},{name:"低优先级",color:t.modelValue==="low"?"#1989fa":"",icon:"more-o",className:t.modelValue==="low"?"priority-low-active":"",callback:()=>_("low")}]),o=h(()=>({high:"高优先级",medium:"中优先级",low:"低优先级"})[t.modelValue]||"选择优先级"),b=h(()=>({high:"warning-o",medium:"flag-o",low:"more-o"})[t.modelValue]||"more-o"),k=h(()=>({high:"#ee0a24",medium:"#ff976a",low:"#1989fa"})[t.modelValue]||"#1989fa"),_=f=>{y("update:modelValue",f)};return(f,x)=>{const $=R,N=K,P=U,e=H;return s(),i(T,null,[r(P,{title:"优先级",center:""},{value:u(()=>[r(N,{size:"small",color:k.value,plain:"",round:"",onClick:x[0]||(x[0]=a=>d.value=!0)},{default:u(()=>[r($,{name:b.value},null,8,["name"]),g(" "+m(o.value),1)]),_:1},8,["color"])]),_:1}),r(e,{teleport:"body",show:d.value,"onUpdate:show":x[1]||(x[1]=a=>d.value=a),actions:p.value,"cancel-text":"取消","close-on-click-action":"",title:"选择优先级"},null,8,["show","actions"])],64)}}}),xe=F(W,[["__scopeId","data-v-7a45082e"]]),Y={class:"tag-selector"},Z={key:0,class:"selected-tags-container"},ee={key:1,class:"text-gray-400"},te={class:"p-4 h-full flex flex-col"},oe={class:"text-lg font-bold mb-4 text-center"},ae={class:"mb-6"},le={class:"flex flex-wrap gap-2"},se={class:"mb-4 flex-1"},ne={class:"flex gap-2 mb-3"},ie={key:0,class:"flex flex-wrap gap-2"},ue={key:1,class:"text-gray-400 text-sm"},ce={key:0,class:"mb-4"},re={class:"flex flex-wrap gap-2"},de={class:"mt-4 flex gap-3"},me=O({__name:"TravelTagSelector",props:{title:{type:String,default:"选择标签"},placeholder:{type:String,default:"请选择标签"},maxTags:{type:Number,default:5},tags:{type:Array,default:()=>[]},defaultTags:{type:Array,default:()=>["飞机出行","高铁出行","自驾游","租车服务","酒店住宿","特色民宿","青旅体验","露营帐篷","景区门票","导游服务","旅行保险","行李托运","机场接送","当地美食","美食街","特产购物","景点拍照","徒步路线","签证服务"]},customTags:{type:Array,default:()=>[]}},emits:["update:customTags","update:tags","cancel"],setup(c,{emit:S}){const t=c,y=S,d=V(!1),p=V(""),o=V([]),b=h(()=>o.value.filter(e=>!t.defaultTags.includes(e)&&!t.customTags.includes(e)));E(()=>t.tags,e=>{o.value=[...e]},{deep:!0,immediate:!0});function k(e){return o.value.includes(e)?"primary":"default"}function _(e){if(t.maxTags===1)o.value=[e];else{const a=o.value.indexOf(e);a>-1?o.value.splice(a,1):o.value.length<t.maxTags?o.value.push(e):I(`最多只能选择${t.maxTags}个标签`)}}function f(){const e=p.value.trim();e&&(t.maxTags===1?(t.customTags.includes(e)||y("update:customTags",[e,...t.customTags]),o.value=[e],p.value=""):o.value.includes(e)||(o.value.length<t.maxTags?(t.customTags.includes(e)||y("update:customTags",[e,...t.customTags]),o.value.push(e),p.value=""):I(`最多只能选择${t.maxTags}个标签`)))}function x(e){t.customTags.indexOf(e)>-1&&y("update:customTags",A.filter(t.customTags,v=>v!==e)),o.value.includes(e)&&(o.value=A.filter(o.value,v=>v!==e))}function $(e){const a=o.value.indexOf(e);a>-1&&o.value.splice(a,1)}function N(){console.log("confirmSelection",[...o.value]),y("update:tags",[...o.value]),d.value=!1}function P(){console.log("取消操作",[...t.tags]),o.value=[...t.tags],d.value=!1,y("cancel")}return(e,a)=>{const v=J,j=U,q=M,z=K,D=Q;return s(),i("div",Y,[r(j,{title:c.title,onClick:a[0]||(a[0]=l=>d.value=!0),"is-link":"",class:L({"text-gray-400":o.value.length===0})},{value:u(()=>[o.value.length>0?(s(),i("div",Z,[(s(!0),i(T,null,w(o.value,l=>(s(),C(v,{key:l,type:"primary",size:"medium",round:"",class:"mr-1 mb-1"},{default:u(()=>[g(m(l),1)]),_:2},1024))),128))])):(s(),i("span",ee,m(c.placeholder),1))]),_:1},8,["title","class"]),r(D,{show:d.value,"onUpdate:show":a[2]||(a[2]=l=>d.value=l),position:"bottom",round:"",style:{height:"70%"}},{default:u(()=>[n("div",te,[n("h2",oe,m(c.title),1),n("div",ae,[a[3]||(a[3]=n("h3",{class:"text-md font-semibold mb-3 text-gray-700"},"热门标签",-1)),n("div",le,[(s(!0),i(T,null,w(c.defaultTags,l=>(s(),C(v,{key:l,type:k(l),size:"medium",round:"",onClick:B=>_(l)},{default:u(()=>[g(m(l),1)]),_:2},1032,["type","onClick"]))),128))])]),n("div",se,[a[5]||(a[5]=n("h3",{class:"text-md font-semibold mb-3 text-gray-700"},"自定义标签",-1)),n("div",ne,[r(q,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=l=>p.value=l),placeholder:"输入自定义标签",clearable:"",class:"flex-1 rounded-lg",onKeyup:G(f,["enter"])},null,8,["modelValue"]),r(z,{type:"primary",size:"small",onClick:f,disabled:!p.value.trim(),class:"rounded-lg"},{default:u(()=>a[4]||(a[4]=[g(" 添加 ")])),_:1,__:[4]},8,["disabled"])]),c.customTags.length>0?(s(),i("div",ie,[(s(!0),i(T,null,w(c.customTags,l=>(s(),C(v,{key:"custom-"+l,type:k(l),size:"medium",round:"",closeable:"",onClose:B=>x(l),onClick:B=>_(l),class:"px-3 py-1 transition-all duration-200 cursor-pointer select-none"},{default:u(()=>[g(m(l),1)]),_:2},1032,["type","onClose","onClick"]))),128))])):(s(),i("div",ue," 暂无自定义标签，输入后点击添加 "))]),b.value.length>0?(s(),i("div",ce,[a[6]||(a[6]=n("h3",{class:"text-md font-semibold mb-3 text-gray-700"}," 已选但不在列表中的标签 ",-1)),n("div",re,[(s(!0),i(T,null,w(b.value,l=>(s(),C(v,{key:"orphan-"+l,type:"primary",size:"medium",round:"",closeable:"",onClose:B=>$(l),class:"px-3 py-1 transition-all duration-200 cursor-pointer select-none"},{default:u(()=>[g(m(l),1)]),_:2},1032,["onClose"]))),128))])])):X("",!0),n("div",de,[r(z,{type:"default",block:"",onClick:P,class:"rounded-lg"},{default:u(()=>a[7]||(a[7]=[g(" 取消 ")])),_:1,__:[7]}),r(z,{type:"primary",block:"",onClick:N,class:"rounded-lg bg-gradient-to-r from-blue-500 to-indigo-500"},{default:u(()=>[g(" 确定 ("+m(o.value.length)+"/"+m(c.maxTags)+") ",1)]),_:1})])])]),_:1},8,["show"])])}}}),he=F(me,[["__scopeId","data-v-d26fdd76"]]);export{xe as P,he as T};
