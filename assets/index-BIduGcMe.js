import{d as q,a3 as B,v as b,c as J,aF as Q,a as c,Q as z,ad as ee,w as U,p as v,t as h,r as G,f as T,aG as ae,B as L,_,$ as E,a0 as H,aH as K,aI as O,R as W,F as te,aJ as ne,N as F,aK as le,aL as ie}from"./index-BiKhJLtw.js";import{c as oe}from"./mount-component-JK79YKnU.js";const[ue,M]=J("switch"),se={size:b,loading:Boolean,disabled:Boolean,modelValue:B,activeColor:String,inactiveColor:String,activeValue:{type:B,default:!0},inactiveValue:{type:B,default:!1}};var ce=q({name:ue,props:se,emits:["change","update:modelValue"],setup(e,{emit:l,slots:u}){const g=()=>e.modelValue===e.activeValue,s=()=>{if(!e.disabled&&!e.loading){const t=g()?e.inactiveValue:e.activeValue;l("update:modelValue",t),l("change",t)}},S=()=>{if(e.loading){const t=g()?e.activeColor:e.inactiveColor;return c(ee,{class:M("loading"),color:t},null)}if(u.node)return u.node()};return Q(()=>e.modelValue),()=>{var t;const{size:d,loading:r,disabled:V,activeColor:w,inactiveColor:N}=e,m=g(),f={fontSize:z(d),backgroundColor:m?w:N};return c("div",{role:"switch",class:M({on:m,loading:r,disabled:V}),style:f,tabindex:V?void 0:0,"aria-checked":m,onClick:s},[c("div",{class:M("node")},[S()]),(t=u.background)==null?void 0:t.call(u)])}}});const he=U(ce),[de,I]=J("stepper"),re=200,x=(e,l)=>String(e)===String(l),me={min:v(1),max:v(1/0),name:v(""),step:v(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:h,showMinus:h,showInput:h,longPress:h,autoFixed:h,allowEmpty:Boolean,modelValue:b,inputWidth:b,buttonSize:b,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:v(1),decimalLength:b};var ge=q({name:de,props:me,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:l}){const u=(a,n=!0)=>{const{min:i,max:C,allowEmpty:o,decimalLength:y}=e;return o&&a===""||(a=O(String(a),!e.integer),a=a===""?0:+a,a=Number.isNaN(a)?+i:a,a=n?Math.max(Math.min(+C,a),+i):a,W(y)&&(a=a.toFixed(+y))),a},g=()=>{var a;const n=(a=e.modelValue)!=null?a:e.defaultValue,i=u(n);return x(i,e.modelValue)||l("update:modelValue",i),i};let s;const S=G(),t=G(g()),d=T(()=>e.disabled||e.disableMinus||+t.value<=+e.min),r=T(()=>e.disabled||e.disablePlus||+t.value>=+e.max),V=T(()=>({width:z(e.inputWidth),height:z(e.buttonSize)})),w=T(()=>ae(e.buttonSize)),N=()=>{const a=u(t.value);x(a,t.value)||(t.value=a)},m=a=>{e.beforeChange?oe(e.beforeChange,{args:[a],done(){t.value=a}}):t.value=a},f=()=>{if(s==="plus"&&r.value||s==="minus"&&d.value){l("overlimit",s);return}const a=s==="minus"?-e.step:+e.step,n=u(ie(+t.value,a));m(n),l(s)},j=a=>{const n=a.target,{value:i}=n,{decimalLength:C}=e;let o=O(String(i),!e.integer);if(W(C)&&o.includes(".")){const A=o.split(".");o=`${A[0]}.${A[1].slice(0,+C)}`}e.beforeChange?n.value=String(t.value):x(i,o)||(n.value=o);const y=o===String(+o);m(y?+o:o)},X=a=>{var n;e.disableInput?(n=S.value)==null||n.blur():l("focus",a)},Y=a=>{const n=a.target,i=u(n.value,e.autoFixed);n.value=String(i),t.value=i,te(()=>{l("blur",a),ne()})};let k,P;const D=()=>{P=setTimeout(()=>{f(),D()},re)},Z=()=>{e.longPress&&(k=!1,clearTimeout(P),P=setTimeout(()=>{k=!0,f(),D()},le))},R=a=>{e.longPress&&(clearTimeout(P),k&&F(a))},p=a=>{e.disableInput&&F(a)},$=a=>({onClick:n=>{F(n),s=a,f()},onTouchstartPassive:()=>{s=a,Z()},onTouchend:R,onTouchcancel:R});return L(()=>[e.max,e.min,e.integer,e.decimalLength],N),L(()=>e.modelValue,a=>{x(a,t.value)||(t.value=u(a))}),L(t,a=>{l("update:modelValue",a),l("change",a,{name:e.name})}),Q(()=>e.modelValue),()=>c("div",{role:"group",class:I([e.theme])},[_(c("button",H({type:"button",style:w.value,class:[I("minus",{disabled:d.value}),{[K]:!d.value}],"aria-disabled":d.value||void 0},$("minus")),null),[[E,e.showMinus]]),_(c("input",{ref:S,type:e.integer?"tel":"text",role:"spinbutton",class:I("input"),value:t.value,style:V.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,autocomplete:"off","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":t.value,onBlur:Y,onInput:j,onFocus:X,onMousedown:p},null),[[E,e.showInput]]),_(c("button",H({type:"button",style:w.value,class:[I("plus",{disabled:r.value}),{[K]:!r.value}],"aria-disabled":r.value||void 0},$("plus")),null),[[E,e.showPlus]])])}});const be=U(ge);export{be as S,he as a};
