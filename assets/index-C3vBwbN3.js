var Sg=Object.defineProperty;var Tg=(v,w,s)=>w in v?Sg(v,w,{enumerable:!0,configurable:!0,writable:!0,value:s}):v[w]=s;var gr=(v,w,s)=>Tg(v,typeof w!="symbol"?w+"":w,s);import{V as tf,B as Xa,r as Au,K as rf,F as Gc,E as Eg,G as Ig,H as Og,a as Fe,d as Za,q as Ua,t as Wa,v as Su,c as Qa,f as Oo,Q as Qr,R as $c,b8 as Pg,w as Va,a0 as Cg,b9 as Rg,aH as Hc,A as kg,ba as Bg,bb as Dg,aB as Kg,b0 as Lg,bc as Fg,bd as Mg,ay as qg,aD as bu,af as Le}from"./index-d8_m604x.js";const Ng=Symbol();function Ug(v){const w=tf(Ng,null);w&&Xa(w,s=>{s&&v()})}const Wg=(v,w)=>{const s=Au(),S=()=>{s.value=Eg(v).height};return rf(()=>{Gc(S);for(let K=1;K<=3;K++)setTimeout(S,100*K)}),Ug(()=>Gc(S)),Xa([Ig,Og],S),s};function Gg(v,w){const s=Wg(v);return S=>Fe("div",{class:w("placeholder"),style:{height:s.value?`${s.value}px`:void 0}},[S()])}const[$g,zc]=Qa("badge"),Hg={dot:Boolean,max:Su,tag:Ua("div"),color:String,offset:Array,content:Su,showZero:Wa,position:Ua("top-right")};var zg=Za({name:$g,props:Hg,setup(v,{slots:w}){const s=()=>{if(w.content)return!0;const{content:H,showZero:X}=v;return $c(H)&&H!==""&&(X||H!==0&&H!=="0")},S=()=>{const{dot:H,max:X,content:V}=v;if(!H&&s())return w.content?w.content():$c(X)&&Pg(V)&&+V>+X?`${X}+`:V},K=H=>H.startsWith("-")?H.replace("-",""):`-${H}`,D=Oo(()=>{const H={background:v.color};if(v.offset){const[X,V]=v.offset,{position:ln}=v,[sn,Dn]=ln.split("-");w.default?(typeof V=="number"?H[sn]=Qr(sn==="top"?V:-V):H[sn]=sn==="top"?Qr(V):K(V),typeof X=="number"?H[Dn]=Qr(Dn==="left"?X:-X):H[Dn]=Dn==="left"?Qr(X):K(X)):(H.marginTop=Qr(V),H.marginLeft=Qr(X))}return H}),q=()=>{if(s()||v.dot)return Fe("div",{class:zc([v.position,{dot:v.dot,fixed:!!w.default}]),style:D.value},[S()])};return()=>{if(w.default){const{tag:H}=v;return Fe(H,{class:zc("wrapper")},{default:()=>[w.default(),q()]})}return q()}}});const Yg=Va(zg),[jg,Yc]=Qa("icon"),Xg=v=>v==null?void 0:v.includes("/"),Zg={dot:Boolean,tag:Ua("i"),name:String,size:Su,badge:Su,color:String,badgeProps:Object,classPrefix:String};var Qg=Za({name:jg,props:Zg,setup(v,{slots:w}){const s=tf(Rg,null),S=Oo(()=>v.classPrefix||(s==null?void 0:s.iconPrefix)||Yc());return()=>{const{tag:K,dot:D,name:q,size:H,badge:X,color:V}=v,ln=Xg(q);return Fe(Yg,Cg({dot:D,tag:K,class:[S.value,ln?"":`${S.value}-${q}`],style:{color:V,fontSize:Qr(H)},content:X},v.badgeProps),{default:()=>{var sn;return[(sn=w.default)==null?void 0:sn.call(w),ln&&Fe("img",{class:Yc("image"),src:q},null)]}})}}});const uf=Va(Qg);var Wy=uf;const[Vg,Gt]=Qa("nav-bar"),Jg={title:String,fixed:Boolean,zIndex:Su,border:Wa,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:Wa};var ny=Za({name:Vg,props:Jg,emits:["clickLeft","clickRight"],setup(v,{emit:w,slots:s}){const S=Au(),K=Gg(S,Gt),D=ln=>{v.leftDisabled||w("clickLeft",ln)},q=ln=>{v.rightDisabled||w("clickRight",ln)},H=()=>s.left?s.left():[v.leftArrow&&Fe(uf,{class:Gt("arrow"),name:"arrow-left"},null),v.leftText&&Fe("span",{class:Gt("text")},[v.leftText])],X=()=>s.right?s.right():Fe("span",{class:Gt("text")},[v.rightText]),V=()=>{const{title:ln,fixed:sn,border:Dn,zIndex:pn}=v,On=kg(pn),En=v.leftArrow||v.leftText||s.left,Xn=v.rightText||s.right;return Fe("div",{ref:S,style:On,class:[Gt({fixed:sn}),{[Bg]:Dn,"van-safe-area-top":v.safeAreaInsetTop}]},[Fe("div",{class:Gt("content")},[En&&Fe("div",{class:[Gt("left",{disabled:v.leftDisabled}),v.clickable&&!v.leftDisabled?Hc:""],onClick:D},[H()]),Fe("div",{class:[Gt("title"),"van-ellipsis"]},[s.title?s.title():ln]),Xn&&Fe("div",{class:[Gt("right",{disabled:v.rightDisabled}),v.clickable&&!v.rightDisabled?Hc:""],onClick:q},[X()])])])};return()=>v.fixed&&v.placeholder?K(V):V()}});const Gy=Va(ny);var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function of(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}var xu={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var ey=xu.exports,jc;function ty(){return jc||(jc=1,function(v,w){(function(){var s,S="4.17.21",K=200,D="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",q="Expected a function",H="Invalid `variable` option passed into `_.template`",X="__lodash_hash_undefined__",V=500,ln="__lodash_placeholder__",sn=1,Dn=2,pn=4,On=1,En=2,Xn=1,Me=2,At=4,de=8,Ie=16,me=32,ee=64,Fn=128,st=256,yr=512,mr=30,Jr="...",St=800,ze=16,ni=1,_e=2,Zn=3,$t=1/0,te=9007199254740991,Y=17976931348623157e292,nn=NaN,mn=4294967295,Ro=mn-1,Ht=mn>>>1,Eu=[["ary",Fn],["bind",Xn],["bindKey",Me],["curry",de],["curryRight",Ie],["flip",yr],["partial",me],["partialRight",ee],["rearg",st]],Ye="[object Arguments]",je="[object Array]",Di="[object AsyncFunction]",_r="[object Boolean]",rn="[object Date]",Iu="[object DOMException]",Tt="[object Error]",Tn="[object Function]",zt="[object GeneratorFunction]",Oe="[object Map]",Pe="[object Number]",ko="[object Null]",Xe="[object Object]",Ou="[object Promise]",Bo="[object Proxy]",Et="[object RegExp]",Un="[object Set]",Yt="[object String]",ct="[object Symbol]",Pu="[object Undefined]",Ze="[object WeakMap]",It="[object WeakSet]",Ce="[object ArrayBuffer]",ft="[object DataView]",Ot="[object Float32Array]",br="[object Float64Array]",jt="[object Int8Array]",Qe="[object Int16Array]",Xt="[object Int32Array]",wr="[object Uint8Array]",qe="[object Uint8ClampedArray]",en="[object Uint16Array]",Pt="[object Uint32Array]",Ct=/\b__p \+= '';/g,ei=/\b(__p \+=) '' \+/g,Z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ti=/&(?:amp|lt|gt|quot|#39);/g,Ki=/[&<>"']/g,Li=RegExp(ti.source),Cu=RegExp(Ki.source),Fi=/<%-([\s\S]+?)%>/g,Do=/<%([\s\S]+?)%>/g,Ru=/<%=([\s\S]+?)%>/g,Zt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qt=/^\w*$/,Mi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vt=/[\\^$.*+?()[\]{}|]/g,Kn=RegExp(Vt.source),Wn=/^\s+/,Ko=/\s/,ri=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ii=/\{\n\/\* \[wrapped with (.+)\] \*/,ui=/,? & /,Lo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,Jt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xr=/\w*$/,Fo=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,ku=/^\[object .+?Constructor\]$/,Rt=/^0o[0-7]+$/i,Bu=/^(?:0|[1-9]\d*)$/,qi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ln=/($^)/,kt=/['\n\r\u2028\u2029\\]/g,be="\\ud800-\\udfff",Du="\\u0300-\\u036f",nr="\\ufe20-\\ufe2f",oi="\\u20d0-\\u20ff",ai=Du+nr+oi,si="\\u2700-\\u27bf",pt="a-z\\xdf-\\xf6\\xf8-\\xff",Ku="\\xac\\xb1\\xd7\\xf7",ci="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Lu="\\u2000-\\u206f",wn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ni="A-Z\\xc0-\\xd6\\xd8-\\xde",Ui="\\ufe0e\\ufe0f",Wi=Ku+ci+Lu+wn,Cn="['’]",Ar="["+be+"]",er="["+Wi+"]",Ve="["+ai+"]",fi="\\d+",Gi="["+si+"]",Sr="["+pt+"]",$i="[^"+be+Wi+fi+si+pt+Ni+"]",tr="\\ud83c[\\udffb-\\udfff]",Fu="(?:"+Ve+"|"+tr+")",rr="[^"+be+"]",li="(?:\\ud83c[\\udde6-\\uddff]){2}",Hi="[\\ud800-\\udbff][\\udc00-\\udfff]",_n="["+Ni+"]",hi="\\u200d",Mu="(?:"+Sr+"|"+$i+")",Mo="(?:"+_n+"|"+$i+")",ae="(?:"+Cn+"(?:d|ll|m|re|s|t|ve))?",Bt="(?:"+Cn+"(?:D|LL|M|RE|S|T|VE))?",Tr=Fu+"?",Je="["+Ui+"]?",qu="(?:"+hi+"(?:"+[rr,li,Hi].join("|")+")"+Je+Tr+")*",Nu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Re=Je+Tr+qu,Er="(?:"+[Gi,li,Hi].join("|")+")"+Re,Ir="(?:"+[rr+Ve+"?",Ve,li,Hi,Ar].join("|")+")",zi=RegExp(Cn,"g"),vt=RegExp(Ve,"g"),Yi=RegExp(tr+"(?="+tr+")|"+Ir+Re,"g"),Ne=RegExp([_n+"?"+Sr+"+"+ae+"(?="+[er,_n,"$"].join("|")+")",Mo+"+"+Bt+"(?="+[er,_n+Mu,"$"].join("|")+")",_n+"?"+Mu+"+"+ae,_n+"+"+Bt,Yn,Nu,fi,Er].join("|"),"g"),ji=RegExp("["+hi+be+ai+Ui+"]"),Uu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Or=-1,Rn={};Rn[Ot]=Rn[br]=Rn[jt]=Rn[Qe]=Rn[Xt]=Rn[wr]=Rn[qe]=Rn[en]=Rn[Pt]=!0,Rn[Ye]=Rn[je]=Rn[Ce]=Rn[_r]=Rn[ft]=Rn[rn]=Rn[Tt]=Rn[Tn]=Rn[Oe]=Rn[Pe]=Rn[Xe]=Rn[Et]=Rn[Un]=Rn[Yt]=Rn[Ze]=!1;var kn={};kn[Ye]=kn[je]=kn[Ce]=kn[ft]=kn[_r]=kn[rn]=kn[Ot]=kn[br]=kn[jt]=kn[Qe]=kn[Xt]=kn[Oe]=kn[Pe]=kn[Xe]=kn[Et]=kn[Un]=kn[Yt]=kn[ct]=kn[wr]=kn[qe]=kn[en]=kn[Pt]=!0,kn[Tt]=kn[Tn]=kn[Ze]=!1;var qo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Pr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},No={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Uo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},di=parseFloat,pi=parseInt,vi=typeof wu=="object"&&wu&&wu.Object===Object&&wu,Wo=typeof self=="object"&&self&&self.Object===Object&&self,Qn=vi||Wo||Function("return this")(),Zi=w&&!w.nodeType&&w,nt=Zi&&!0&&v&&!v.nodeType&&v,gi=nt&&nt.exports===Zi,yi=gi&&vi.process,re=function(){try{var l=nt&&nt.require&&nt.require("util").types;return l||yi&&yi.binding&&yi.binding("util")}catch{}}(),Cr=re&&re.isArrayBuffer,Rr=re&&re.isDate,Qi=re&&re.isMap,Wu=re&&re.isRegExp,kr=re&&re.isSet,mi=re&&re.isTypedArray;function ie(l,y,h){switch(h.length){case 0:return l.call(y);case 1:return l.call(y,h[0]);case 2:return l.call(y,h[0],h[1]);case 3:return l.call(y,h[0],h[1],h[2])}return l.apply(y,h)}function Vi(l,y,h,A){for(var _=-1,E=l==null?0:l.length;++_<E;){var P=l[_];y(A,P,h(P),l)}return A}function se(l,y){for(var h=-1,A=l==null?0:l.length;++h<A&&y(l[h],h,l)!==!1;);return l}function Jn(l,y){for(var h=l==null?0:l.length;h--&&y(l[h],h,l)!==!1;);return l}function ir(l,y){for(var h=-1,A=l==null?0:l.length;++h<A;)if(!y(l[h],h,l))return!1;return!0}function we(l,y){for(var h=-1,A=l==null?0:l.length,_=0,E=[];++h<A;){var P=l[h];y(P,h,l)&&(E[_++]=P)}return E}function Br(l,y){var h=l==null?0:l.length;return!!h&&ar(l,y,0)>-1}function ur(l,y,h){for(var A=-1,_=l==null?0:l.length;++A<_;)if(h(y,l[A]))return!0;return!1}function Bn(l,y){for(var h=-1,A=l==null?0:l.length,_=Array(A);++h<A;)_[h]=y(l[h],h,l);return _}function et(l,y){for(var h=-1,A=y.length,_=l.length;++h<A;)l[_+h]=y[h];return l}function or(l,y,h,A){var _=-1,E=l==null?0:l.length;for(A&&E&&(h=l[++_]);++_<E;)h=y(h,l[_],_,l);return h}function Ji(l,y,h,A){var _=l==null?0:l.length;for(A&&_&&(h=l[--_]);_--;)h=y(h,l[_],_,l);return h}function tt(l,y){for(var h=-1,A=l==null?0:l.length;++h<A;)if(y(l[h],h,l))return!0;return!1}var nu=Lr("length");function eu(l){return l.split("")}function _i(l){return l.match(Lo)||[]}function bi(l,y,h){var A;return h(l,function(_,E,P){if(y(_,E,P))return A=E,!1}),A}function Dr(l,y,h,A){for(var _=l.length,E=h+(A?1:-1);A?E--:++E<_;)if(y(l[E],E,l))return E;return-1}function ar(l,y,h){return y===y?gt(l,y,h):Dr(l,Kr,h)}function tu(l,y,h,A){for(var _=h-1,E=l.length;++_<E;)if(A(l[_],y))return _;return-1}function Kr(l){return l!==l}function Gu(l,y){var h=l==null?0:l.length;return h?ru(l,y)/h:nn}function Lr(l){return function(y){return y==null?s:y[l]}}function Fr(l){return function(y){return l==null?s:l[y]}}function $u(l,y,h,A,_){return _(l,function(E,P,T){h=A?(A=!1,E):y(h,E,P,T)}),h}function Hu(l,y){var h=l.length;for(l.sort(y);h--;)l[h]=l[h].value;return l}function ru(l,y){for(var h,A=-1,_=l.length;++A<_;){var E=y(l[A]);E!==s&&(h=h===s?E:h+E)}return h}function wi(l,y){for(var h=-1,A=Array(l);++h<l;)A[h]=y(h);return A}function zu(l,y){return Bn(y,function(h){return[h,l[h]]})}function Yu(l){return l&&l.slice(0,u(l)+1).replace(Wn,"")}function ce(l){return function(y){return l(y)}}function Mr(l,y){return Bn(y,function(h){return l[h]})}function sr(l,y){return l.has(y)}function iu(l,y){for(var h=-1,A=l.length;++h<A&&ar(y,l[h],0)>-1;);return h}function ju(l,y){for(var h=l.length;h--&&ar(y,l[h],0)>-1;);return h}function Go(l,y){for(var h=l.length,A=0;h--;)l[h]===y&&++A;return A}var $o=Fr(qo),xi=Fr(Pr);function rt(l){return"\\"+Uo[l]}function qn(l,y){return l==null?s:l[y]}function it(l){return ji.test(l)}function xe(l){return Uu.test(l)}function Ho(l){for(var y,h=[];!(y=l.next()).done;)h.push(y.value);return h}function qr(l){var y=-1,h=Array(l.size);return l.forEach(function(A,_){h[++y]=[_,A]}),h}function uu(l,y){return function(h){return l(y(h))}}function fe(l,y){for(var h=-1,A=l.length,_=0,E=[];++h<A;){var P=l[h];(P===y||P===ln)&&(l[h]=ln,E[_++]=h)}return E}function cr(l){var y=-1,h=Array(l.size);return l.forEach(function(A){h[++y]=A}),h}function fr(l){var y=-1,h=Array(l.size);return l.forEach(function(A){h[++y]=[A,A]}),h}function gt(l,y,h){for(var A=h-1,_=l.length;++A<_;)if(l[A]===y)return A;return-1}function Xu(l,y,h){for(var A=h+1;A--;)if(l[A]===y)return A;return A}function t(l){return it(l)?c(l):nu(l)}function i(l){return it(l)?d(l):eu(l)}function u(l){for(var y=l.length;y--&&Ko.test(l.charAt(y)););return y}var a=Fr(No);function c(l){for(var y=Yi.lastIndex=0;Yi.test(l);)++y;return y}function d(l){return l.match(Yi)||[]}function m(l){return l.match(Ne)||[]}var x=function l(y){y=y==null?Qn:O.defaults(Qn.Object(),y,O.pick(Qn,Xi));var h=y.Array,A=y.Date,_=y.Error,E=y.Function,P=y.Math,T=y.Object,R=y.RegExp,B=y.String,k=y.TypeError,L=h.prototype,G=E.prototype,z=T.prototype,W=y["__core-js_shared__"],$=G.toString,N=z.hasOwnProperty,j=0,J=function(){var n=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),fn=z.toString,vn=$.call(T),gn=Qn._,pe=R("^"+$.call(N).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cn=gi?y.Buffer:s,Mn=y.Symbol,$n=y.Uint8Array,Nr=cn?cn.allocUnsafe:s,jn=uu(T.getPrototypeOf,T),yt=T.create,Ai=z.propertyIsEnumerable,Zu=L.splice,is=Mn?Mn.isConcatSpreadable:s,ou=Mn?Mn.iterator:s,Ur=Mn?Mn.toStringTag:s,Qu=function(){try{var n=zr(T,"defineProperty");return n({},"",{}),n}catch{}}(),Af=y.clearTimeout!==Qn.clearTimeout&&y.clearTimeout,Sf=A&&A.now!==Qn.Date.now&&A.now,Tf=y.setTimeout!==Qn.setTimeout&&y.setTimeout,Vu=P.ceil,Ju=P.floor,zo=T.getOwnPropertySymbols,Ef=cn?cn.isBuffer:s,us=y.isFinite,If=L.join,Of=uu(T.keys,T),Vn=P.max,le=P.min,Pf=A.now,Cf=y.parseInt,os=P.random,Rf=L.reverse,Yo=zr(y,"DataView"),au=zr(y,"Map"),jo=zr(y,"Promise"),Si=zr(y,"Set"),su=zr(y,"WeakMap"),cu=zr(T,"create"),no=su&&new su,Ti={},kf=Yr(Yo),Bf=Yr(au),Df=Yr(jo),Kf=Yr(Si),Lf=Yr(su),eo=Mn?Mn.prototype:s,fu=eo?eo.valueOf:s,as=eo?eo.toString:s;function p(n){if(Gn(n)&&!hn(n)&&!(n instanceof An)){if(n instanceof Ue)return n;if(N.call(n,"__wrapped__"))return sc(n)}return new Ue(n)}var Ei=function(){function n(){}return function(e){if(!Nn(e))return{};if(yt)return yt(e);n.prototype=e;var r=new n;return n.prototype=s,r}}();function to(){}function Ue(n,e){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=s}p.templateSettings={escape:Fi,evaluate:Do,interpolate:Ru,variable:"",imports:{_:p}},p.prototype=to.prototype,p.prototype.constructor=p,Ue.prototype=Ei(to.prototype),Ue.prototype.constructor=Ue;function An(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=mn,this.__views__=[]}function Ff(){var n=new An(this.__wrapped__);return n.__actions__=Ae(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Ae(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Ae(this.__views__),n}function Mf(){if(this.__filtered__){var n=new An(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function qf(){var n=this.__wrapped__.value(),e=this.__dir__,r=hn(n),o=e<0,f=r?n.length:0,g=Ql(0,f,this.__views__),b=g.start,I=g.end,C=I-b,F=o?I:b-1,M=this.__iteratees__,U=M.length,Q=0,tn=le(C,this.__takeCount__);if(!r||!o&&f==C&&tn==C)return Rs(n,this.__actions__);var on=[];n:for(;C--&&Q<tn;){F+=e;for(var yn=-1,an=n[F];++yn<U;){var xn=M[yn],Sn=xn.iteratee,De=xn.type,ye=Sn(an);if(De==_e)an=ye;else if(!ye){if(De==ni)continue n;break n}}on[Q++]=an}return on}An.prototype=Ei(to.prototype),An.prototype.constructor=An;function Wr(n){var e=-1,r=n==null?0:n.length;for(this.clear();++e<r;){var o=n[e];this.set(o[0],o[1])}}function Nf(){this.__data__=cu?cu(null):{},this.size=0}function Uf(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}function Wf(n){var e=this.__data__;if(cu){var r=e[n];return r===X?s:r}return N.call(e,n)?e[n]:s}function Gf(n){var e=this.__data__;return cu?e[n]!==s:N.call(e,n)}function $f(n,e){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=cu&&e===s?X:e,this}Wr.prototype.clear=Nf,Wr.prototype.delete=Uf,Wr.prototype.get=Wf,Wr.prototype.has=Gf,Wr.prototype.set=$f;function Dt(n){var e=-1,r=n==null?0:n.length;for(this.clear();++e<r;){var o=n[e];this.set(o[0],o[1])}}function Hf(){this.__data__=[],this.size=0}function zf(n){var e=this.__data__,r=ro(e,n);if(r<0)return!1;var o=e.length-1;return r==o?e.pop():Zu.call(e,r,1),--this.size,!0}function Yf(n){var e=this.__data__,r=ro(e,n);return r<0?s:e[r][1]}function jf(n){return ro(this.__data__,n)>-1}function Xf(n,e){var r=this.__data__,o=ro(r,n);return o<0?(++this.size,r.push([n,e])):r[o][1]=e,this}Dt.prototype.clear=Hf,Dt.prototype.delete=zf,Dt.prototype.get=Yf,Dt.prototype.has=jf,Dt.prototype.set=Xf;function Kt(n){var e=-1,r=n==null?0:n.length;for(this.clear();++e<r;){var o=n[e];this.set(o[0],o[1])}}function Zf(){this.size=0,this.__data__={hash:new Wr,map:new(au||Dt),string:new Wr}}function Qf(n){var e=go(this,n).delete(n);return this.size-=e?1:0,e}function Vf(n){return go(this,n).get(n)}function Jf(n){return go(this,n).has(n)}function nl(n,e){var r=go(this,n),o=r.size;return r.set(n,e),this.size+=r.size==o?0:1,this}Kt.prototype.clear=Zf,Kt.prototype.delete=Qf,Kt.prototype.get=Vf,Kt.prototype.has=Jf,Kt.prototype.set=nl;function Gr(n){var e=-1,r=n==null?0:n.length;for(this.__data__=new Kt;++e<r;)this.add(n[e])}function el(n){return this.__data__.set(n,X),this}function tl(n){return this.__data__.has(n)}Gr.prototype.add=Gr.prototype.push=el,Gr.prototype.has=tl;function ut(n){var e=this.__data__=new Dt(n);this.size=e.size}function rl(){this.__data__=new Dt,this.size=0}function il(n){var e=this.__data__,r=e.delete(n);return this.size=e.size,r}function ul(n){return this.__data__.get(n)}function ol(n){return this.__data__.has(n)}function al(n,e){var r=this.__data__;if(r instanceof Dt){var o=r.__data__;if(!au||o.length<K-1)return o.push([n,e]),this.size=++r.size,this;r=this.__data__=new Kt(o)}return r.set(n,e),this.size=r.size,this}ut.prototype.clear=rl,ut.prototype.delete=il,ut.prototype.get=ul,ut.prototype.has=ol,ut.prototype.set=al;function ss(n,e){var r=hn(n),o=!r&&jr(n),f=!r&&!o&&vr(n),g=!r&&!o&&!f&&Ci(n),b=r||o||f||g,I=b?wi(n.length,B):[],C=I.length;for(var F in n)(e||N.call(n,F))&&!(b&&(F=="length"||f&&(F=="offset"||F=="parent")||g&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||qt(F,C)))&&I.push(F);return I}function cs(n){var e=n.length;return e?n[ua(0,e-1)]:s}function sl(n,e){return yo(Ae(n),$r(e,0,n.length))}function cl(n){return yo(Ae(n))}function Xo(n,e,r){(r!==s&&!ot(n[e],r)||r===s&&!(e in n))&&Lt(n,e,r)}function lu(n,e,r){var o=n[e];(!(N.call(n,e)&&ot(o,r))||r===s&&!(e in n))&&Lt(n,e,r)}function ro(n,e){for(var r=n.length;r--;)if(ot(n[r][0],e))return r;return-1}function fl(n,e,r,o){return lr(n,function(f,g,b){e(o,f,r(f),b)}),o}function fs(n,e){return n&&_t(e,ne(e),n)}function ll(n,e){return n&&_t(e,Te(e),n)}function Lt(n,e,r){e=="__proto__"&&Qu?Qu(n,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[e]=r}function Zo(n,e){for(var r=-1,o=e.length,f=h(o),g=n==null;++r<o;)f[r]=g?s:Ca(n,e[r]);return f}function $r(n,e,r){return n===n&&(r!==s&&(n=n<=r?n:r),e!==s&&(n=n>=e?n:e)),n}function We(n,e,r,o,f,g){var b,I=e&sn,C=e&Dn,F=e&pn;if(r&&(b=f?r(n,o,f,g):r(n)),b!==s)return b;if(!Nn(n))return n;var M=hn(n);if(M){if(b=Jl(n),!I)return Ae(n,b)}else{var U=he(n),Q=U==Tn||U==zt;if(vr(n))return Ds(n,I);if(U==Xe||U==Ye||Q&&!f){if(b=C||Q?{}:Js(n),!I)return C?Wl(n,ll(b,n)):Ul(n,fs(b,n))}else{if(!kn[U])return f?n:{};b=nh(n,U,I)}}g||(g=new ut);var tn=g.get(n);if(tn)return tn;g.set(n,b),Oc(n)?n.forEach(function(an){b.add(We(an,e,r,an,n,g))}):Ec(n)&&n.forEach(function(an,xn){b.set(xn,We(an,e,r,xn,n,g))});var on=F?C?ga:va:C?Te:ne,yn=M?s:on(n);return se(yn||n,function(an,xn){yn&&(xn=an,an=n[xn]),lu(b,xn,We(an,e,r,xn,n,g))}),b}function hl(n){var e=ne(n);return function(r){return ls(r,n,e)}}function ls(n,e,r){var o=r.length;if(n==null)return!o;for(n=T(n);o--;){var f=r[o],g=e[f],b=n[f];if(b===s&&!(f in n)||!g(b))return!1}return!0}function hs(n,e,r){if(typeof n!="function")throw new k(q);return mu(function(){n.apply(s,r)},e)}function hu(n,e,r,o){var f=-1,g=Br,b=!0,I=n.length,C=[],F=e.length;if(!I)return C;r&&(e=Bn(e,ce(r))),o?(g=ur,b=!1):e.length>=K&&(g=sr,b=!1,e=new Gr(e));n:for(;++f<I;){var M=n[f],U=r==null?M:r(M);if(M=o||M!==0?M:0,b&&U===U){for(var Q=F;Q--;)if(e[Q]===U)continue n;C.push(M)}else g(e,U,o)||C.push(M)}return C}var lr=qs(mt),ds=qs(Vo,!0);function dl(n,e){var r=!0;return lr(n,function(o,f,g){return r=!!e(o,f,g),r}),r}function io(n,e,r){for(var o=-1,f=n.length;++o<f;){var g=n[o],b=e(g);if(b!=null&&(I===s?b===b&&!Be(b):r(b,I)))var I=b,C=g}return C}function pl(n,e,r,o){var f=n.length;for(r=dn(r),r<0&&(r=-r>f?0:f+r),o=o===s||o>f?f:dn(o),o<0&&(o+=f),o=r>o?0:Cc(o);r<o;)n[r++]=e;return n}function ps(n,e){var r=[];return lr(n,function(o,f,g){e(o,f,g)&&r.push(o)}),r}function ue(n,e,r,o,f){var g=-1,b=n.length;for(r||(r=th),f||(f=[]);++g<b;){var I=n[g];e>0&&r(I)?e>1?ue(I,e-1,r,o,f):et(f,I):o||(f[f.length]=I)}return f}var Qo=Ns(),vs=Ns(!0);function mt(n,e){return n&&Qo(n,e,ne)}function Vo(n,e){return n&&vs(n,e,ne)}function uo(n,e){return we(e,function(r){return Nt(n[r])})}function Hr(n,e){e=dr(e,n);for(var r=0,o=e.length;n!=null&&r<o;)n=n[bt(e[r++])];return r&&r==o?n:s}function gs(n,e,r){var o=e(n);return hn(n)?o:et(o,r(n))}function ve(n){return n==null?n===s?Pu:ko:Ur&&Ur in T(n)?Zl(n):ch(n)}function Jo(n,e){return n>e}function vl(n,e){return n!=null&&N.call(n,e)}function gl(n,e){return n!=null&&e in T(n)}function yl(n,e,r){return n>=le(e,r)&&n<Vn(e,r)}function na(n,e,r){for(var o=r?ur:Br,f=n[0].length,g=n.length,b=g,I=h(g),C=1/0,F=[];b--;){var M=n[b];b&&e&&(M=Bn(M,ce(e))),C=le(M.length,C),I[b]=!r&&(e||f>=120&&M.length>=120)?new Gr(b&&M):s}M=n[0];var U=-1,Q=I[0];n:for(;++U<f&&F.length<C;){var tn=M[U],on=e?e(tn):tn;if(tn=r||tn!==0?tn:0,!(Q?sr(Q,on):o(F,on,r))){for(b=g;--b;){var yn=I[b];if(!(yn?sr(yn,on):o(n[b],on,r)))continue n}Q&&Q.push(on),F.push(tn)}}return F}function ml(n,e,r,o){return mt(n,function(f,g,b){e(o,r(f),g,b)}),o}function du(n,e,r){e=dr(e,n),n=rc(n,e);var o=n==null?n:n[bt($e(e))];return o==null?s:ie(o,n,r)}function ys(n){return Gn(n)&&ve(n)==Ye}function _l(n){return Gn(n)&&ve(n)==Ce}function bl(n){return Gn(n)&&ve(n)==rn}function pu(n,e,r,o,f){return n===e?!0:n==null||e==null||!Gn(n)&&!Gn(e)?n!==n&&e!==e:wl(n,e,r,o,pu,f)}function wl(n,e,r,o,f,g){var b=hn(n),I=hn(e),C=b?je:he(n),F=I?je:he(e);C=C==Ye?Xe:C,F=F==Ye?Xe:F;var M=C==Xe,U=F==Xe,Q=C==F;if(Q&&vr(n)){if(!vr(e))return!1;b=!0,M=!1}if(Q&&!M)return g||(g=new ut),b||Ci(n)?Zs(n,e,r,o,f,g):jl(n,e,C,r,o,f,g);if(!(r&On)){var tn=M&&N.call(n,"__wrapped__"),on=U&&N.call(e,"__wrapped__");if(tn||on){var yn=tn?n.value():n,an=on?e.value():e;return g||(g=new ut),f(yn,an,r,o,g)}}return Q?(g||(g=new ut),Xl(n,e,r,o,f,g)):!1}function xl(n){return Gn(n)&&he(n)==Oe}function ea(n,e,r,o){var f=r.length,g=f,b=!o;if(n==null)return!g;for(n=T(n);f--;){var I=r[f];if(b&&I[2]?I[1]!==n[I[0]]:!(I[0]in n))return!1}for(;++f<g;){I=r[f];var C=I[0],F=n[C],M=I[1];if(b&&I[2]){if(F===s&&!(C in n))return!1}else{var U=new ut;if(o)var Q=o(F,M,C,n,e,U);if(!(Q===s?pu(M,F,On|En,o,U):Q))return!1}}return!0}function ms(n){if(!Nn(n)||ih(n))return!1;var e=Nt(n)?pe:ku;return e.test(Yr(n))}function Al(n){return Gn(n)&&ve(n)==Et}function Sl(n){return Gn(n)&&he(n)==Un}function Tl(n){return Gn(n)&&Ao(n.length)&&!!Rn[ve(n)]}function _s(n){return typeof n=="function"?n:n==null?Ee:typeof n=="object"?hn(n)?xs(n[0],n[1]):ws(n):Uc(n)}function ta(n){if(!yu(n))return Of(n);var e=[];for(var r in T(n))N.call(n,r)&&r!="constructor"&&e.push(r);return e}function El(n){if(!Nn(n))return sh(n);var e=yu(n),r=[];for(var o in n)o=="constructor"&&(e||!N.call(n,o))||r.push(o);return r}function ra(n,e){return n<e}function bs(n,e){var r=-1,o=Se(n)?h(n.length):[];return lr(n,function(f,g,b){o[++r]=e(f,g,b)}),o}function ws(n){var e=ma(n);return e.length==1&&e[0][2]?ec(e[0][0],e[0][1]):function(r){return r===n||ea(r,n,e)}}function xs(n,e){return ba(n)&&nc(e)?ec(bt(n),e):function(r){var o=Ca(r,n);return o===s&&o===e?Ra(r,n):pu(e,o,On|En)}}function oo(n,e,r,o,f){n!==e&&Qo(e,function(g,b){if(f||(f=new ut),Nn(g))Il(n,e,b,r,oo,o,f);else{var I=o?o(xa(n,b),g,b+"",n,e,f):s;I===s&&(I=g),Xo(n,b,I)}},Te)}function Il(n,e,r,o,f,g,b){var I=xa(n,r),C=xa(e,r),F=b.get(C);if(F){Xo(n,r,F);return}var M=g?g(I,C,r+"",n,e,b):s,U=M===s;if(U){var Q=hn(C),tn=!Q&&vr(C),on=!Q&&!tn&&Ci(C);M=C,Q||tn||on?hn(I)?M=I:Hn(I)?M=Ae(I):tn?(U=!1,M=Ds(C,!0)):on?(U=!1,M=Ks(C,!0)):M=[]:_u(C)||jr(C)?(M=I,jr(I)?M=Rc(I):(!Nn(I)||Nt(I))&&(M=Js(C))):U=!1}U&&(b.set(C,M),f(M,C,o,g,b),b.delete(C)),Xo(n,r,M)}function As(n,e){var r=n.length;if(r)return e+=e<0?r:0,qt(e,r)?n[e]:s}function Ss(n,e,r){e.length?e=Bn(e,function(g){return hn(g)?function(b){return Hr(b,g.length===1?g[0]:g)}:g}):e=[Ee];var o=-1;e=Bn(e,ce(un()));var f=bs(n,function(g,b,I){var C=Bn(e,function(F){return F(g)});return{criteria:C,index:++o,value:g}});return Hu(f,function(g,b){return Nl(g,b,r)})}function Ol(n,e){return Ts(n,e,function(r,o){return Ra(n,o)})}function Ts(n,e,r){for(var o=-1,f=e.length,g={};++o<f;){var b=e[o],I=Hr(n,b);r(I,b)&&vu(g,dr(b,n),I)}return g}function Pl(n){return function(e){return Hr(e,n)}}function ia(n,e,r,o){var f=o?tu:ar,g=-1,b=e.length,I=n;for(n===e&&(e=Ae(e)),r&&(I=Bn(n,ce(r)));++g<b;)for(var C=0,F=e[g],M=r?r(F):F;(C=f(I,M,C,o))>-1;)I!==n&&Zu.call(I,C,1),Zu.call(n,C,1);return n}function Es(n,e){for(var r=n?e.length:0,o=r-1;r--;){var f=e[r];if(r==o||f!==g){var g=f;qt(f)?Zu.call(n,f,1):sa(n,f)}}return n}function ua(n,e){return n+Ju(os()*(e-n+1))}function Cl(n,e,r,o){for(var f=-1,g=Vn(Vu((e-n)/(r||1)),0),b=h(g);g--;)b[o?g:++f]=n,n+=r;return b}function oa(n,e){var r="";if(!n||e<1||e>te)return r;do e%2&&(r+=n),e=Ju(e/2),e&&(n+=n);while(e);return r}function bn(n,e){return Aa(tc(n,e,Ee),n+"")}function Rl(n){return cs(Ri(n))}function kl(n,e){var r=Ri(n);return yo(r,$r(e,0,r.length))}function vu(n,e,r,o){if(!Nn(n))return n;e=dr(e,n);for(var f=-1,g=e.length,b=g-1,I=n;I!=null&&++f<g;){var C=bt(e[f]),F=r;if(C==="__proto__"||C==="constructor"||C==="prototype")return n;if(f!=b){var M=I[C];F=o?o(M,C,I):s,F===s&&(F=Nn(M)?M:qt(e[f+1])?[]:{})}lu(I,C,F),I=I[C]}return n}var Is=no?function(n,e){return no.set(n,e),n}:Ee,Bl=Qu?function(n,e){return Qu(n,"toString",{configurable:!0,enumerable:!1,value:Ba(e),writable:!0})}:Ee;function Dl(n){return yo(Ri(n))}function Ge(n,e,r){var o=-1,f=n.length;e<0&&(e=-e>f?0:f+e),r=r>f?f:r,r<0&&(r+=f),f=e>r?0:r-e>>>0,e>>>=0;for(var g=h(f);++o<f;)g[o]=n[o+e];return g}function Kl(n,e){var r;return lr(n,function(o,f,g){return r=e(o,f,g),!r}),!!r}function ao(n,e,r){var o=0,f=n==null?o:n.length;if(typeof e=="number"&&e===e&&f<=Ht){for(;o<f;){var g=o+f>>>1,b=n[g];b!==null&&!Be(b)&&(r?b<=e:b<e)?o=g+1:f=g}return f}return aa(n,e,Ee,r)}function aa(n,e,r,o){var f=0,g=n==null?0:n.length;if(g===0)return 0;e=r(e);for(var b=e!==e,I=e===null,C=Be(e),F=e===s;f<g;){var M=Ju((f+g)/2),U=r(n[M]),Q=U!==s,tn=U===null,on=U===U,yn=Be(U);if(b)var an=o||on;else F?an=on&&(o||Q):I?an=on&&Q&&(o||!tn):C?an=on&&Q&&!tn&&(o||!yn):tn||yn?an=!1:an=o?U<=e:U<e;an?f=M+1:g=M}return le(g,Ro)}function Os(n,e){for(var r=-1,o=n.length,f=0,g=[];++r<o;){var b=n[r],I=e?e(b):b;if(!r||!ot(I,C)){var C=I;g[f++]=b===0?0:b}}return g}function Ps(n){return typeof n=="number"?n:Be(n)?nn:+n}function ke(n){if(typeof n=="string")return n;if(hn(n))return Bn(n,ke)+"";if(Be(n))return as?as.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function hr(n,e,r){var o=-1,f=Br,g=n.length,b=!0,I=[],C=I;if(r)b=!1,f=ur;else if(g>=K){var F=e?null:zl(n);if(F)return cr(F);b=!1,f=sr,C=new Gr}else C=e?[]:I;n:for(;++o<g;){var M=n[o],U=e?e(M):M;if(M=r||M!==0?M:0,b&&U===U){for(var Q=C.length;Q--;)if(C[Q]===U)continue n;e&&C.push(U),I.push(M)}else f(C,U,r)||(C!==I&&C.push(U),I.push(M))}return I}function sa(n,e){return e=dr(e,n),n=rc(n,e),n==null||delete n[bt($e(e))]}function Cs(n,e,r,o){return vu(n,e,r(Hr(n,e)),o)}function so(n,e,r,o){for(var f=n.length,g=o?f:-1;(o?g--:++g<f)&&e(n[g],g,n););return r?Ge(n,o?0:g,o?g+1:f):Ge(n,o?g+1:0,o?f:g)}function Rs(n,e){var r=n;return r instanceof An&&(r=r.value()),or(e,function(o,f){return f.func.apply(f.thisArg,et([o],f.args))},r)}function ca(n,e,r){var o=n.length;if(o<2)return o?hr(n[0]):[];for(var f=-1,g=h(o);++f<o;)for(var b=n[f],I=-1;++I<o;)I!=f&&(g[f]=hu(g[f]||b,n[I],e,r));return hr(ue(g,1),e,r)}function ks(n,e,r){for(var o=-1,f=n.length,g=e.length,b={};++o<f;){var I=o<g?e[o]:s;r(b,n[o],I)}return b}function fa(n){return Hn(n)?n:[]}function la(n){return typeof n=="function"?n:Ee}function dr(n,e){return hn(n)?n:ba(n,e)?[n]:ac(Pn(n))}var Ll=bn;function pr(n,e,r){var o=n.length;return r=r===s?o:r,!e&&r>=o?n:Ge(n,e,r)}var Bs=Af||function(n){return Qn.clearTimeout(n)};function Ds(n,e){if(e)return n.slice();var r=n.length,o=Nr?Nr(r):new n.constructor(r);return n.copy(o),o}function ha(n){var e=new n.constructor(n.byteLength);return new $n(e).set(new $n(n)),e}function Fl(n,e){var r=e?ha(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}function Ml(n){var e=new n.constructor(n.source,xr.exec(n));return e.lastIndex=n.lastIndex,e}function ql(n){return fu?T(fu.call(n)):{}}function Ks(n,e){var r=e?ha(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}function Ls(n,e){if(n!==e){var r=n!==s,o=n===null,f=n===n,g=Be(n),b=e!==s,I=e===null,C=e===e,F=Be(e);if(!I&&!F&&!g&&n>e||g&&b&&C&&!I&&!F||o&&b&&C||!r&&C||!f)return 1;if(!o&&!g&&!F&&n<e||F&&r&&f&&!o&&!g||I&&r&&f||!b&&f||!C)return-1}return 0}function Nl(n,e,r){for(var o=-1,f=n.criteria,g=e.criteria,b=f.length,I=r.length;++o<b;){var C=Ls(f[o],g[o]);if(C){if(o>=I)return C;var F=r[o];return C*(F=="desc"?-1:1)}}return n.index-e.index}function Fs(n,e,r,o){for(var f=-1,g=n.length,b=r.length,I=-1,C=e.length,F=Vn(g-b,0),M=h(C+F),U=!o;++I<C;)M[I]=e[I];for(;++f<b;)(U||f<g)&&(M[r[f]]=n[f]);for(;F--;)M[I++]=n[f++];return M}function Ms(n,e,r,o){for(var f=-1,g=n.length,b=-1,I=r.length,C=-1,F=e.length,M=Vn(g-I,0),U=h(M+F),Q=!o;++f<M;)U[f]=n[f];for(var tn=f;++C<F;)U[tn+C]=e[C];for(;++b<I;)(Q||f<g)&&(U[tn+r[b]]=n[f++]);return U}function Ae(n,e){var r=-1,o=n.length;for(e||(e=h(o));++r<o;)e[r]=n[r];return e}function _t(n,e,r,o){var f=!r;r||(r={});for(var g=-1,b=e.length;++g<b;){var I=e[g],C=o?o(r[I],n[I],I,r,n):s;C===s&&(C=n[I]),f?Lt(r,I,C):lu(r,I,C)}return r}function Ul(n,e){return _t(n,_a(n),e)}function Wl(n,e){return _t(n,Qs(n),e)}function co(n,e){return function(r,o){var f=hn(r)?Vi:fl,g=e?e():{};return f(r,n,un(o,2),g)}}function Ii(n){return bn(function(e,r){var o=-1,f=r.length,g=f>1?r[f-1]:s,b=f>2?r[2]:s;for(g=n.length>3&&typeof g=="function"?(f--,g):s,b&&ge(r[0],r[1],b)&&(g=f<3?s:g,f=1),e=T(e);++o<f;){var I=r[o];I&&n(e,I,o,g)}return e})}function qs(n,e){return function(r,o){if(r==null)return r;if(!Se(r))return n(r,o);for(var f=r.length,g=e?f:-1,b=T(r);(e?g--:++g<f)&&o(b[g],g,b)!==!1;);return r}}function Ns(n){return function(e,r,o){for(var f=-1,g=T(e),b=o(e),I=b.length;I--;){var C=b[n?I:++f];if(r(g[C],C,g)===!1)break}return e}}function Gl(n,e,r){var o=e&Xn,f=gu(n);function g(){var b=this&&this!==Qn&&this instanceof g?f:n;return b.apply(o?r:this,arguments)}return g}function Us(n){return function(e){e=Pn(e);var r=it(e)?i(e):s,o=r?r[0]:e.charAt(0),f=r?pr(r,1).join(""):e.slice(1);return o[n]()+f}}function Oi(n){return function(e){return or(qc(Mc(e).replace(zi,"")),n,"")}}function gu(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Ei(n.prototype),o=n.apply(r,e);return Nn(o)?o:r}}function $l(n,e,r){var o=gu(n);function f(){for(var g=arguments.length,b=h(g),I=g,C=Pi(f);I--;)b[I]=arguments[I];var F=g<3&&b[0]!==C&&b[g-1]!==C?[]:fe(b,C);if(g-=F.length,g<r)return zs(n,e,fo,f.placeholder,s,b,F,s,s,r-g);var M=this&&this!==Qn&&this instanceof f?o:n;return ie(M,this,b)}return f}function Ws(n){return function(e,r,o){var f=T(e);if(!Se(e)){var g=un(r,3);e=ne(e),r=function(I){return g(f[I],I,f)}}var b=n(e,r,o);return b>-1?f[g?e[b]:b]:s}}function Gs(n){return Mt(function(e){var r=e.length,o=r,f=Ue.prototype.thru;for(n&&e.reverse();o--;){var g=e[o];if(typeof g!="function")throw new k(q);if(f&&!b&&vo(g)=="wrapper")var b=new Ue([],!0)}for(o=b?o:r;++o<r;){g=e[o];var I=vo(g),C=I=="wrapper"?ya(g):s;C&&wa(C[0])&&C[1]==(Fn|de|me|st)&&!C[4].length&&C[9]==1?b=b[vo(C[0])].apply(b,C[3]):b=g.length==1&&wa(g)?b[I]():b.thru(g)}return function(){var F=arguments,M=F[0];if(b&&F.length==1&&hn(M))return b.plant(M).value();for(var U=0,Q=r?e[U].apply(this,F):M;++U<r;)Q=e[U].call(this,Q);return Q}})}function fo(n,e,r,o,f,g,b,I,C,F){var M=e&Fn,U=e&Xn,Q=e&Me,tn=e&(de|Ie),on=e&yr,yn=Q?s:gu(n);function an(){for(var xn=arguments.length,Sn=h(xn),De=xn;De--;)Sn[De]=arguments[De];if(tn)var ye=Pi(an),Ke=Go(Sn,ye);if(o&&(Sn=Fs(Sn,o,f,tn)),g&&(Sn=Ms(Sn,g,b,tn)),xn-=Ke,tn&&xn<F){var zn=fe(Sn,ye);return zs(n,e,fo,an.placeholder,r,Sn,zn,I,C,F-xn)}var at=U?r:this,Wt=Q?at[n]:n;return xn=Sn.length,I?Sn=fh(Sn,I):on&&xn>1&&Sn.reverse(),M&&C<xn&&(Sn.length=C),this&&this!==Qn&&this instanceof an&&(Wt=yn||gu(Wt)),Wt.apply(at,Sn)}return an}function $s(n,e){return function(r,o){return ml(r,n,e(o),{})}}function lo(n,e){return function(r,o){var f;if(r===s&&o===s)return e;if(r!==s&&(f=r),o!==s){if(f===s)return o;typeof r=="string"||typeof o=="string"?(r=ke(r),o=ke(o)):(r=Ps(r),o=Ps(o)),f=n(r,o)}return f}}function da(n){return Mt(function(e){return e=Bn(e,ce(un())),bn(function(r){var o=this;return n(e,function(f){return ie(f,o,r)})})})}function ho(n,e){e=e===s?" ":ke(e);var r=e.length;if(r<2)return r?oa(e,n):e;var o=oa(e,Vu(n/t(e)));return it(e)?pr(i(o),0,n).join(""):o.slice(0,n)}function Hl(n,e,r,o){var f=e&Xn,g=gu(n);function b(){for(var I=-1,C=arguments.length,F=-1,M=o.length,U=h(M+C),Q=this&&this!==Qn&&this instanceof b?g:n;++F<M;)U[F]=o[F];for(;C--;)U[F++]=arguments[++I];return ie(Q,f?r:this,U)}return b}function Hs(n){return function(e,r,o){return o&&typeof o!="number"&&ge(e,r,o)&&(r=o=s),e=Ut(e),r===s?(r=e,e=0):r=Ut(r),o=o===s?e<r?1:-1:Ut(o),Cl(e,r,o,n)}}function po(n){return function(e,r){return typeof e=="string"&&typeof r=="string"||(e=He(e),r=He(r)),n(e,r)}}function zs(n,e,r,o,f,g,b,I,C,F){var M=e&de,U=M?b:s,Q=M?s:b,tn=M?g:s,on=M?s:g;e|=M?me:ee,e&=~(M?ee:me),e&At||(e&=-4);var yn=[n,e,f,tn,U,on,Q,I,C,F],an=r.apply(s,yn);return wa(n)&&ic(an,yn),an.placeholder=o,uc(an,n,e)}function pa(n){var e=P[n];return function(r,o){if(r=He(r),o=o==null?0:le(dn(o),292),o&&us(r)){var f=(Pn(r)+"e").split("e"),g=e(f[0]+"e"+(+f[1]+o));return f=(Pn(g)+"e").split("e"),+(f[0]+"e"+(+f[1]-o))}return e(r)}}var zl=Si&&1/cr(new Si([,-0]))[1]==$t?function(n){return new Si(n)}:La;function Ys(n){return function(e){var r=he(e);return r==Oe?qr(e):r==Un?fr(e):zu(e,n(e))}}function Ft(n,e,r,o,f,g,b,I){var C=e&Me;if(!C&&typeof n!="function")throw new k(q);var F=o?o.length:0;if(F||(e&=-97,o=f=s),b=b===s?b:Vn(dn(b),0),I=I===s?I:dn(I),F-=f?f.length:0,e&ee){var M=o,U=f;o=f=s}var Q=C?s:ya(n),tn=[n,e,r,o,f,M,U,g,b,I];if(Q&&ah(tn,Q),n=tn[0],e=tn[1],r=tn[2],o=tn[3],f=tn[4],I=tn[9]=tn[9]===s?C?0:n.length:Vn(tn[9]-F,0),!I&&e&(de|Ie)&&(e&=-25),!e||e==Xn)var on=Gl(n,e,r);else e==de||e==Ie?on=$l(n,e,I):(e==me||e==(Xn|me))&&!f.length?on=Hl(n,e,r,o):on=fo.apply(s,tn);var yn=Q?Is:ic;return uc(yn(on,tn),n,e)}function js(n,e,r,o){return n===s||ot(n,z[r])&&!N.call(o,r)?e:n}function Xs(n,e,r,o,f,g){return Nn(n)&&Nn(e)&&(g.set(e,n),oo(n,e,s,Xs,g),g.delete(e)),n}function Yl(n){return _u(n)?s:n}function Zs(n,e,r,o,f,g){var b=r&On,I=n.length,C=e.length;if(I!=C&&!(b&&C>I))return!1;var F=g.get(n),M=g.get(e);if(F&&M)return F==e&&M==n;var U=-1,Q=!0,tn=r&En?new Gr:s;for(g.set(n,e),g.set(e,n);++U<I;){var on=n[U],yn=e[U];if(o)var an=b?o(yn,on,U,e,n,g):o(on,yn,U,n,e,g);if(an!==s){if(an)continue;Q=!1;break}if(tn){if(!tt(e,function(xn,Sn){if(!sr(tn,Sn)&&(on===xn||f(on,xn,r,o,g)))return tn.push(Sn)})){Q=!1;break}}else if(!(on===yn||f(on,yn,r,o,g))){Q=!1;break}}return g.delete(n),g.delete(e),Q}function jl(n,e,r,o,f,g,b){switch(r){case ft:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Ce:return!(n.byteLength!=e.byteLength||!g(new $n(n),new $n(e)));case _r:case rn:case Pe:return ot(+n,+e);case Tt:return n.name==e.name&&n.message==e.message;case Et:case Yt:return n==e+"";case Oe:var I=qr;case Un:var C=o&On;if(I||(I=cr),n.size!=e.size&&!C)return!1;var F=b.get(n);if(F)return F==e;o|=En,b.set(n,e);var M=Zs(I(n),I(e),o,f,g,b);return b.delete(n),M;case ct:if(fu)return fu.call(n)==fu.call(e)}return!1}function Xl(n,e,r,o,f,g){var b=r&On,I=va(n),C=I.length,F=va(e),M=F.length;if(C!=M&&!b)return!1;for(var U=C;U--;){var Q=I[U];if(!(b?Q in e:N.call(e,Q)))return!1}var tn=g.get(n),on=g.get(e);if(tn&&on)return tn==e&&on==n;var yn=!0;g.set(n,e),g.set(e,n);for(var an=b;++U<C;){Q=I[U];var xn=n[Q],Sn=e[Q];if(o)var De=b?o(Sn,xn,Q,e,n,g):o(xn,Sn,Q,n,e,g);if(!(De===s?xn===Sn||f(xn,Sn,r,o,g):De)){yn=!1;break}an||(an=Q=="constructor")}if(yn&&!an){var ye=n.constructor,Ke=e.constructor;ye!=Ke&&"constructor"in n&&"constructor"in e&&!(typeof ye=="function"&&ye instanceof ye&&typeof Ke=="function"&&Ke instanceof Ke)&&(yn=!1)}return g.delete(n),g.delete(e),yn}function Mt(n){return Aa(tc(n,s,lc),n+"")}function va(n){return gs(n,ne,_a)}function ga(n){return gs(n,Te,Qs)}var ya=no?function(n){return no.get(n)}:La;function vo(n){for(var e=n.name+"",r=Ti[e],o=N.call(Ti,e)?r.length:0;o--;){var f=r[o],g=f.func;if(g==null||g==n)return f.name}return e}function Pi(n){var e=N.call(p,"placeholder")?p:n;return e.placeholder}function un(){var n=p.iteratee||Da;return n=n===Da?_s:n,arguments.length?n(arguments[0],arguments[1]):n}function go(n,e){var r=n.__data__;return rh(e)?r[typeof e=="string"?"string":"hash"]:r.map}function ma(n){for(var e=ne(n),r=e.length;r--;){var o=e[r],f=n[o];e[r]=[o,f,nc(f)]}return e}function zr(n,e){var r=qn(n,e);return ms(r)?r:s}function Zl(n){var e=N.call(n,Ur),r=n[Ur];try{n[Ur]=s;var o=!0}catch{}var f=fn.call(n);return o&&(e?n[Ur]=r:delete n[Ur]),f}var _a=zo?function(n){return n==null?[]:(n=T(n),we(zo(n),function(e){return Ai.call(n,e)}))}:Fa,Qs=zo?function(n){for(var e=[];n;)et(e,_a(n)),n=jn(n);return e}:Fa,he=ve;(Yo&&he(new Yo(new ArrayBuffer(1)))!=ft||au&&he(new au)!=Oe||jo&&he(jo.resolve())!=Ou||Si&&he(new Si)!=Un||su&&he(new su)!=Ze)&&(he=function(n){var e=ve(n),r=e==Xe?n.constructor:s,o=r?Yr(r):"";if(o)switch(o){case kf:return ft;case Bf:return Oe;case Df:return Ou;case Kf:return Un;case Lf:return Ze}return e});function Ql(n,e,r){for(var o=-1,f=r.length;++o<f;){var g=r[o],b=g.size;switch(g.type){case"drop":n+=b;break;case"dropRight":e-=b;break;case"take":e=le(e,n+b);break;case"takeRight":n=Vn(n,e-b);break}}return{start:n,end:e}}function Vl(n){var e=n.match(ii);return e?e[1].split(ui):[]}function Vs(n,e,r){e=dr(e,n);for(var o=-1,f=e.length,g=!1;++o<f;){var b=bt(e[o]);if(!(g=n!=null&&r(n,b)))break;n=n[b]}return g||++o!=f?g:(f=n==null?0:n.length,!!f&&Ao(f)&&qt(b,f)&&(hn(n)||jr(n)))}function Jl(n){var e=n.length,r=new n.constructor(e);return e&&typeof n[0]=="string"&&N.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Js(n){return typeof n.constructor=="function"&&!yu(n)?Ei(jn(n)):{}}function nh(n,e,r){var o=n.constructor;switch(e){case Ce:return ha(n);case _r:case rn:return new o(+n);case ft:return Fl(n,r);case Ot:case br:case jt:case Qe:case Xt:case wr:case qe:case en:case Pt:return Ks(n,r);case Oe:return new o;case Pe:case Yt:return new o(n);case Et:return Ml(n);case Un:return new o;case ct:return ql(n)}}function eh(n,e){var r=e.length;if(!r)return n;var o=r-1;return e[o]=(r>1?"& ":"")+e[o],e=e.join(r>2?", ":" "),n.replace(ri,`{
/* [wrapped with `+e+`] */
`)}function th(n){return hn(n)||jr(n)||!!(is&&n&&n[is])}function qt(n,e){var r=typeof n;return e=e??te,!!e&&(r=="number"||r!="symbol"&&Bu.test(n))&&n>-1&&n%1==0&&n<e}function ge(n,e,r){if(!Nn(r))return!1;var o=typeof e;return(o=="number"?Se(r)&&qt(e,r.length):o=="string"&&e in r)?ot(r[e],n):!1}function ba(n,e){if(hn(n))return!1;var r=typeof n;return r=="number"||r=="symbol"||r=="boolean"||n==null||Be(n)?!0:Qt.test(n)||!Zt.test(n)||e!=null&&n in T(e)}function rh(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function wa(n){var e=vo(n),r=p[e];if(typeof r!="function"||!(e in An.prototype))return!1;if(n===r)return!0;var o=ya(r);return!!o&&n===o[0]}function ih(n){return!!J&&J in n}var uh=W?Nt:Ma;function yu(n){var e=n&&n.constructor,r=typeof e=="function"&&e.prototype||z;return n===r}function nc(n){return n===n&&!Nn(n)}function ec(n,e){return function(r){return r==null?!1:r[n]===e&&(e!==s||n in T(r))}}function oh(n){var e=wo(n,function(o){return r.size===V&&r.clear(),o}),r=e.cache;return e}function ah(n,e){var r=n[1],o=e[1],f=r|o,g=f<(Xn|Me|Fn),b=o==Fn&&r==de||o==Fn&&r==st&&n[7].length<=e[8]||o==(Fn|st)&&e[7].length<=e[8]&&r==de;if(!(g||b))return n;o&Xn&&(n[2]=e[2],f|=r&Xn?0:At);var I=e[3];if(I){var C=n[3];n[3]=C?Fs(C,I,e[4]):I,n[4]=C?fe(n[3],ln):e[4]}return I=e[5],I&&(C=n[5],n[5]=C?Ms(C,I,e[6]):I,n[6]=C?fe(n[5],ln):e[6]),I=e[7],I&&(n[7]=I),o&Fn&&(n[8]=n[8]==null?e[8]:le(n[8],e[8])),n[9]==null&&(n[9]=e[9]),n[0]=e[0],n[1]=f,n}function sh(n){var e=[];if(n!=null)for(var r in T(n))e.push(r);return e}function ch(n){return fn.call(n)}function tc(n,e,r){return e=Vn(e===s?n.length-1:e,0),function(){for(var o=arguments,f=-1,g=Vn(o.length-e,0),b=h(g);++f<g;)b[f]=o[e+f];f=-1;for(var I=h(e+1);++f<e;)I[f]=o[f];return I[e]=r(b),ie(n,this,I)}}function rc(n,e){return e.length<2?n:Hr(n,Ge(e,0,-1))}function fh(n,e){for(var r=n.length,o=le(e.length,r),f=Ae(n);o--;){var g=e[o];n[o]=qt(g,r)?f[g]:s}return n}function xa(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var ic=oc(Is),mu=Tf||function(n,e){return Qn.setTimeout(n,e)},Aa=oc(Bl);function uc(n,e,r){var o=e+"";return Aa(n,eh(o,lh(Vl(o),r)))}function oc(n){var e=0,r=0;return function(){var o=Pf(),f=ze-(o-r);if(r=o,f>0){if(++e>=St)return arguments[0]}else e=0;return n.apply(s,arguments)}}function yo(n,e){var r=-1,o=n.length,f=o-1;for(e=e===s?o:e;++r<e;){var g=ua(r,f),b=n[g];n[g]=n[r],n[r]=b}return n.length=e,n}var ac=oh(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Mi,function(r,o,f,g){e.push(f?g.replace(Jt,"$1"):o||r)}),e});function bt(n){if(typeof n=="string"||Be(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function Yr(n){if(n!=null){try{return $.call(n)}catch{}try{return n+""}catch{}}return""}function lh(n,e){return se(Eu,function(r){var o="_."+r[0];e&r[1]&&!Br(n,o)&&n.push(o)}),n.sort()}function sc(n){if(n instanceof An)return n.clone();var e=new Ue(n.__wrapped__,n.__chain__);return e.__actions__=Ae(n.__actions__),e.__index__=n.__index__,e.__values__=n.__values__,e}function hh(n,e,r){(r?ge(n,e,r):e===s)?e=1:e=Vn(dn(e),0);var o=n==null?0:n.length;if(!o||e<1)return[];for(var f=0,g=0,b=h(Vu(o/e));f<o;)b[g++]=Ge(n,f,f+=e);return b}function dh(n){for(var e=-1,r=n==null?0:n.length,o=0,f=[];++e<r;){var g=n[e];g&&(f[o++]=g)}return f}function ph(){var n=arguments.length;if(!n)return[];for(var e=h(n-1),r=arguments[0],o=n;o--;)e[o-1]=arguments[o];return et(hn(r)?Ae(r):[r],ue(e,1))}var vh=bn(function(n,e){return Hn(n)?hu(n,ue(e,1,Hn,!0)):[]}),gh=bn(function(n,e){var r=$e(e);return Hn(r)&&(r=s),Hn(n)?hu(n,ue(e,1,Hn,!0),un(r,2)):[]}),yh=bn(function(n,e){var r=$e(e);return Hn(r)&&(r=s),Hn(n)?hu(n,ue(e,1,Hn,!0),s,r):[]});function mh(n,e,r){var o=n==null?0:n.length;return o?(e=r||e===s?1:dn(e),Ge(n,e<0?0:e,o)):[]}function _h(n,e,r){var o=n==null?0:n.length;return o?(e=r||e===s?1:dn(e),e=o-e,Ge(n,0,e<0?0:e)):[]}function bh(n,e){return n&&n.length?so(n,un(e,3),!0,!0):[]}function wh(n,e){return n&&n.length?so(n,un(e,3),!0):[]}function xh(n,e,r,o){var f=n==null?0:n.length;return f?(r&&typeof r!="number"&&ge(n,e,r)&&(r=0,o=f),pl(n,e,r,o)):[]}function cc(n,e,r){var o=n==null?0:n.length;if(!o)return-1;var f=r==null?0:dn(r);return f<0&&(f=Vn(o+f,0)),Dr(n,un(e,3),f)}function fc(n,e,r){var o=n==null?0:n.length;if(!o)return-1;var f=o-1;return r!==s&&(f=dn(r),f=r<0?Vn(o+f,0):le(f,o-1)),Dr(n,un(e,3),f,!0)}function lc(n){var e=n==null?0:n.length;return e?ue(n,1):[]}function Ah(n){var e=n==null?0:n.length;return e?ue(n,$t):[]}function Sh(n,e){var r=n==null?0:n.length;return r?(e=e===s?1:dn(e),ue(n,e)):[]}function Th(n){for(var e=-1,r=n==null?0:n.length,o={};++e<r;){var f=n[e];o[f[0]]=f[1]}return o}function hc(n){return n&&n.length?n[0]:s}function Eh(n,e,r){var o=n==null?0:n.length;if(!o)return-1;var f=r==null?0:dn(r);return f<0&&(f=Vn(o+f,0)),ar(n,e,f)}function Ih(n){var e=n==null?0:n.length;return e?Ge(n,0,-1):[]}var Oh=bn(function(n){var e=Bn(n,fa);return e.length&&e[0]===n[0]?na(e):[]}),Ph=bn(function(n){var e=$e(n),r=Bn(n,fa);return e===$e(r)?e=s:r.pop(),r.length&&r[0]===n[0]?na(r,un(e,2)):[]}),Ch=bn(function(n){var e=$e(n),r=Bn(n,fa);return e=typeof e=="function"?e:s,e&&r.pop(),r.length&&r[0]===n[0]?na(r,s,e):[]});function Rh(n,e){return n==null?"":If.call(n,e)}function $e(n){var e=n==null?0:n.length;return e?n[e-1]:s}function kh(n,e,r){var o=n==null?0:n.length;if(!o)return-1;var f=o;return r!==s&&(f=dn(r),f=f<0?Vn(o+f,0):le(f,o-1)),e===e?Xu(n,e,f):Dr(n,Kr,f,!0)}function Bh(n,e){return n&&n.length?As(n,dn(e)):s}var Dh=bn(dc);function dc(n,e){return n&&n.length&&e&&e.length?ia(n,e):n}function Kh(n,e,r){return n&&n.length&&e&&e.length?ia(n,e,un(r,2)):n}function Lh(n,e,r){return n&&n.length&&e&&e.length?ia(n,e,s,r):n}var Fh=Mt(function(n,e){var r=n==null?0:n.length,o=Zo(n,e);return Es(n,Bn(e,function(f){return qt(f,r)?+f:f}).sort(Ls)),o});function Mh(n,e){var r=[];if(!(n&&n.length))return r;var o=-1,f=[],g=n.length;for(e=un(e,3);++o<g;){var b=n[o];e(b,o,n)&&(r.push(b),f.push(o))}return Es(n,f),r}function Sa(n){return n==null?n:Rf.call(n)}function qh(n,e,r){var o=n==null?0:n.length;return o?(r&&typeof r!="number"&&ge(n,e,r)?(e=0,r=o):(e=e==null?0:dn(e),r=r===s?o:dn(r)),Ge(n,e,r)):[]}function Nh(n,e){return ao(n,e)}function Uh(n,e,r){return aa(n,e,un(r,2))}function Wh(n,e){var r=n==null?0:n.length;if(r){var o=ao(n,e);if(o<r&&ot(n[o],e))return o}return-1}function Gh(n,e){return ao(n,e,!0)}function $h(n,e,r){return aa(n,e,un(r,2),!0)}function Hh(n,e){var r=n==null?0:n.length;if(r){var o=ao(n,e,!0)-1;if(ot(n[o],e))return o}return-1}function zh(n){return n&&n.length?Os(n):[]}function Yh(n,e){return n&&n.length?Os(n,un(e,2)):[]}function jh(n){var e=n==null?0:n.length;return e?Ge(n,1,e):[]}function Xh(n,e,r){return n&&n.length?(e=r||e===s?1:dn(e),Ge(n,0,e<0?0:e)):[]}function Zh(n,e,r){var o=n==null?0:n.length;return o?(e=r||e===s?1:dn(e),e=o-e,Ge(n,e<0?0:e,o)):[]}function Qh(n,e){return n&&n.length?so(n,un(e,3),!1,!0):[]}function Vh(n,e){return n&&n.length?so(n,un(e,3)):[]}var Jh=bn(function(n){return hr(ue(n,1,Hn,!0))}),nd=bn(function(n){var e=$e(n);return Hn(e)&&(e=s),hr(ue(n,1,Hn,!0),un(e,2))}),ed=bn(function(n){var e=$e(n);return e=typeof e=="function"?e:s,hr(ue(n,1,Hn,!0),s,e)});function td(n){return n&&n.length?hr(n):[]}function rd(n,e){return n&&n.length?hr(n,un(e,2)):[]}function id(n,e){return e=typeof e=="function"?e:s,n&&n.length?hr(n,s,e):[]}function Ta(n){if(!(n&&n.length))return[];var e=0;return n=we(n,function(r){if(Hn(r))return e=Vn(r.length,e),!0}),wi(e,function(r){return Bn(n,Lr(r))})}function pc(n,e){if(!(n&&n.length))return[];var r=Ta(n);return e==null?r:Bn(r,function(o){return ie(e,s,o)})}var ud=bn(function(n,e){return Hn(n)?hu(n,e):[]}),od=bn(function(n){return ca(we(n,Hn))}),ad=bn(function(n){var e=$e(n);return Hn(e)&&(e=s),ca(we(n,Hn),un(e,2))}),sd=bn(function(n){var e=$e(n);return e=typeof e=="function"?e:s,ca(we(n,Hn),s,e)}),cd=bn(Ta);function fd(n,e){return ks(n||[],e||[],lu)}function ld(n,e){return ks(n||[],e||[],vu)}var hd=bn(function(n){var e=n.length,r=e>1?n[e-1]:s;return r=typeof r=="function"?(n.pop(),r):s,pc(n,r)});function vc(n){var e=p(n);return e.__chain__=!0,e}function dd(n,e){return e(n),n}function mo(n,e){return e(n)}var pd=Mt(function(n){var e=n.length,r=e?n[0]:0,o=this.__wrapped__,f=function(g){return Zo(g,n)};return e>1||this.__actions__.length||!(o instanceof An)||!qt(r)?this.thru(f):(o=o.slice(r,+r+(e?1:0)),o.__actions__.push({func:mo,args:[f],thisArg:s}),new Ue(o,this.__chain__).thru(function(g){return e&&!g.length&&g.push(s),g}))});function vd(){return vc(this)}function gd(){return new Ue(this.value(),this.__chain__)}function yd(){this.__values__===s&&(this.__values__=Pc(this.value()));var n=this.__index__>=this.__values__.length,e=n?s:this.__values__[this.__index__++];return{done:n,value:e}}function md(){return this}function _d(n){for(var e,r=this;r instanceof to;){var o=sc(r);o.__index__=0,o.__values__=s,e?f.__wrapped__=o:e=o;var f=o;r=r.__wrapped__}return f.__wrapped__=n,e}function bd(){var n=this.__wrapped__;if(n instanceof An){var e=n;return this.__actions__.length&&(e=new An(this)),e=e.reverse(),e.__actions__.push({func:mo,args:[Sa],thisArg:s}),new Ue(e,this.__chain__)}return this.thru(Sa)}function wd(){return Rs(this.__wrapped__,this.__actions__)}var xd=co(function(n,e,r){N.call(n,r)?++n[r]:Lt(n,r,1)});function Ad(n,e,r){var o=hn(n)?ir:dl;return r&&ge(n,e,r)&&(e=s),o(n,un(e,3))}function Sd(n,e){var r=hn(n)?we:ps;return r(n,un(e,3))}var Td=Ws(cc),Ed=Ws(fc);function Id(n,e){return ue(_o(n,e),1)}function Od(n,e){return ue(_o(n,e),$t)}function Pd(n,e,r){return r=r===s?1:dn(r),ue(_o(n,e),r)}function gc(n,e){var r=hn(n)?se:lr;return r(n,un(e,3))}function yc(n,e){var r=hn(n)?Jn:ds;return r(n,un(e,3))}var Cd=co(function(n,e,r){N.call(n,r)?n[r].push(e):Lt(n,r,[e])});function Rd(n,e,r,o){n=Se(n)?n:Ri(n),r=r&&!o?dn(r):0;var f=n.length;return r<0&&(r=Vn(f+r,0)),So(n)?r<=f&&n.indexOf(e,r)>-1:!!f&&ar(n,e,r)>-1}var kd=bn(function(n,e,r){var o=-1,f=typeof e=="function",g=Se(n)?h(n.length):[];return lr(n,function(b){g[++o]=f?ie(e,b,r):du(b,e,r)}),g}),Bd=co(function(n,e,r){Lt(n,r,e)});function _o(n,e){var r=hn(n)?Bn:bs;return r(n,un(e,3))}function Dd(n,e,r,o){return n==null?[]:(hn(e)||(e=e==null?[]:[e]),r=o?s:r,hn(r)||(r=r==null?[]:[r]),Ss(n,e,r))}var Kd=co(function(n,e,r){n[r?0:1].push(e)},function(){return[[],[]]});function Ld(n,e,r){var o=hn(n)?or:$u,f=arguments.length<3;return o(n,un(e,4),r,f,lr)}function Fd(n,e,r){var o=hn(n)?Ji:$u,f=arguments.length<3;return o(n,un(e,4),r,f,ds)}function Md(n,e){var r=hn(n)?we:ps;return r(n,xo(un(e,3)))}function qd(n){var e=hn(n)?cs:Rl;return e(n)}function Nd(n,e,r){(r?ge(n,e,r):e===s)?e=1:e=dn(e);var o=hn(n)?sl:kl;return o(n,e)}function Ud(n){var e=hn(n)?cl:Dl;return e(n)}function Wd(n){if(n==null)return 0;if(Se(n))return So(n)?t(n):n.length;var e=he(n);return e==Oe||e==Un?n.size:ta(n).length}function Gd(n,e,r){var o=hn(n)?tt:Kl;return r&&ge(n,e,r)&&(e=s),o(n,un(e,3))}var $d=bn(function(n,e){if(n==null)return[];var r=e.length;return r>1&&ge(n,e[0],e[1])?e=[]:r>2&&ge(e[0],e[1],e[2])&&(e=[e[0]]),Ss(n,ue(e,1),[])}),bo=Sf||function(){return Qn.Date.now()};function Hd(n,e){if(typeof e!="function")throw new k(q);return n=dn(n),function(){if(--n<1)return e.apply(this,arguments)}}function mc(n,e,r){return e=r?s:e,e=n&&e==null?n.length:e,Ft(n,Fn,s,s,s,s,e)}function _c(n,e){var r;if(typeof e!="function")throw new k(q);return n=dn(n),function(){return--n>0&&(r=e.apply(this,arguments)),n<=1&&(e=s),r}}var Ea=bn(function(n,e,r){var o=Xn;if(r.length){var f=fe(r,Pi(Ea));o|=me}return Ft(n,o,e,r,f)}),bc=bn(function(n,e,r){var o=Xn|Me;if(r.length){var f=fe(r,Pi(bc));o|=me}return Ft(e,o,n,r,f)});function wc(n,e,r){e=r?s:e;var o=Ft(n,de,s,s,s,s,s,e);return o.placeholder=wc.placeholder,o}function xc(n,e,r){e=r?s:e;var o=Ft(n,Ie,s,s,s,s,s,e);return o.placeholder=xc.placeholder,o}function Ac(n,e,r){var o,f,g,b,I,C,F=0,M=!1,U=!1,Q=!0;if(typeof n!="function")throw new k(q);e=He(e)||0,Nn(r)&&(M=!!r.leading,U="maxWait"in r,g=U?Vn(He(r.maxWait)||0,e):g,Q="trailing"in r?!!r.trailing:Q);function tn(zn){var at=o,Wt=f;return o=f=s,F=zn,b=n.apply(Wt,at),b}function on(zn){return F=zn,I=mu(xn,e),M?tn(zn):b}function yn(zn){var at=zn-C,Wt=zn-F,Wc=e-at;return U?le(Wc,g-Wt):Wc}function an(zn){var at=zn-C,Wt=zn-F;return C===s||at>=e||at<0||U&&Wt>=g}function xn(){var zn=bo();if(an(zn))return Sn(zn);I=mu(xn,yn(zn))}function Sn(zn){return I=s,Q&&o?tn(zn):(o=f=s,b)}function De(){I!==s&&Bs(I),F=0,o=C=f=I=s}function ye(){return I===s?b:Sn(bo())}function Ke(){var zn=bo(),at=an(zn);if(o=arguments,f=this,C=zn,at){if(I===s)return on(C);if(U)return Bs(I),I=mu(xn,e),tn(C)}return I===s&&(I=mu(xn,e)),b}return Ke.cancel=De,Ke.flush=ye,Ke}var zd=bn(function(n,e){return hs(n,1,e)}),Yd=bn(function(n,e,r){return hs(n,He(e)||0,r)});function jd(n){return Ft(n,yr)}function wo(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new k(q);var r=function(){var o=arguments,f=e?e.apply(this,o):o[0],g=r.cache;if(g.has(f))return g.get(f);var b=n.apply(this,o);return r.cache=g.set(f,b)||g,b};return r.cache=new(wo.Cache||Kt),r}wo.Cache=Kt;function xo(n){if(typeof n!="function")throw new k(q);return function(){var e=arguments;switch(e.length){case 0:return!n.call(this);case 1:return!n.call(this,e[0]);case 2:return!n.call(this,e[0],e[1]);case 3:return!n.call(this,e[0],e[1],e[2])}return!n.apply(this,e)}}function Xd(n){return _c(2,n)}var Zd=Ll(function(n,e){e=e.length==1&&hn(e[0])?Bn(e[0],ce(un())):Bn(ue(e,1),ce(un()));var r=e.length;return bn(function(o){for(var f=-1,g=le(o.length,r);++f<g;)o[f]=e[f].call(this,o[f]);return ie(n,this,o)})}),Ia=bn(function(n,e){var r=fe(e,Pi(Ia));return Ft(n,me,s,e,r)}),Sc=bn(function(n,e){var r=fe(e,Pi(Sc));return Ft(n,ee,s,e,r)}),Qd=Mt(function(n,e){return Ft(n,st,s,s,s,e)});function Vd(n,e){if(typeof n!="function")throw new k(q);return e=e===s?e:dn(e),bn(n,e)}function Jd(n,e){if(typeof n!="function")throw new k(q);return e=e==null?0:Vn(dn(e),0),bn(function(r){var o=r[e],f=pr(r,0,e);return o&&et(f,o),ie(n,this,f)})}function np(n,e,r){var o=!0,f=!0;if(typeof n!="function")throw new k(q);return Nn(r)&&(o="leading"in r?!!r.leading:o,f="trailing"in r?!!r.trailing:f),Ac(n,e,{leading:o,maxWait:e,trailing:f})}function ep(n){return mc(n,1)}function tp(n,e){return Ia(la(e),n)}function rp(){if(!arguments.length)return[];var n=arguments[0];return hn(n)?n:[n]}function ip(n){return We(n,pn)}function up(n,e){return e=typeof e=="function"?e:s,We(n,pn,e)}function op(n){return We(n,sn|pn)}function ap(n,e){return e=typeof e=="function"?e:s,We(n,sn|pn,e)}function sp(n,e){return e==null||ls(n,e,ne(e))}function ot(n,e){return n===e||n!==n&&e!==e}var cp=po(Jo),fp=po(function(n,e){return n>=e}),jr=ys(function(){return arguments}())?ys:function(n){return Gn(n)&&N.call(n,"callee")&&!Ai.call(n,"callee")},hn=h.isArray,lp=Cr?ce(Cr):_l;function Se(n){return n!=null&&Ao(n.length)&&!Nt(n)}function Hn(n){return Gn(n)&&Se(n)}function hp(n){return n===!0||n===!1||Gn(n)&&ve(n)==_r}var vr=Ef||Ma,dp=Rr?ce(Rr):bl;function pp(n){return Gn(n)&&n.nodeType===1&&!_u(n)}function vp(n){if(n==null)return!0;if(Se(n)&&(hn(n)||typeof n=="string"||typeof n.splice=="function"||vr(n)||Ci(n)||jr(n)))return!n.length;var e=he(n);if(e==Oe||e==Un)return!n.size;if(yu(n))return!ta(n).length;for(var r in n)if(N.call(n,r))return!1;return!0}function gp(n,e){return pu(n,e)}function yp(n,e,r){r=typeof r=="function"?r:s;var o=r?r(n,e):s;return o===s?pu(n,e,s,r):!!o}function Oa(n){if(!Gn(n))return!1;var e=ve(n);return e==Tt||e==Iu||typeof n.message=="string"&&typeof n.name=="string"&&!_u(n)}function mp(n){return typeof n=="number"&&us(n)}function Nt(n){if(!Nn(n))return!1;var e=ve(n);return e==Tn||e==zt||e==Di||e==Bo}function Tc(n){return typeof n=="number"&&n==dn(n)}function Ao(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=te}function Nn(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}function Gn(n){return n!=null&&typeof n=="object"}var Ec=Qi?ce(Qi):xl;function _p(n,e){return n===e||ea(n,e,ma(e))}function bp(n,e,r){return r=typeof r=="function"?r:s,ea(n,e,ma(e),r)}function wp(n){return Ic(n)&&n!=+n}function xp(n){if(uh(n))throw new _(D);return ms(n)}function Ap(n){return n===null}function Sp(n){return n==null}function Ic(n){return typeof n=="number"||Gn(n)&&ve(n)==Pe}function _u(n){if(!Gn(n)||ve(n)!=Xe)return!1;var e=jn(n);if(e===null)return!0;var r=N.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&$.call(r)==vn}var Pa=Wu?ce(Wu):Al;function Tp(n){return Tc(n)&&n>=-9007199254740991&&n<=te}var Oc=kr?ce(kr):Sl;function So(n){return typeof n=="string"||!hn(n)&&Gn(n)&&ve(n)==Yt}function Be(n){return typeof n=="symbol"||Gn(n)&&ve(n)==ct}var Ci=mi?ce(mi):Tl;function Ep(n){return n===s}function Ip(n){return Gn(n)&&he(n)==Ze}function Op(n){return Gn(n)&&ve(n)==It}var Pp=po(ra),Cp=po(function(n,e){return n<=e});function Pc(n){if(!n)return[];if(Se(n))return So(n)?i(n):Ae(n);if(ou&&n[ou])return Ho(n[ou]());var e=he(n),r=e==Oe?qr:e==Un?cr:Ri;return r(n)}function Ut(n){if(!n)return n===0?n:0;if(n=He(n),n===$t||n===-1/0){var e=n<0?-1:1;return e*Y}return n===n?n:0}function dn(n){var e=Ut(n),r=e%1;return e===e?r?e-r:e:0}function Cc(n){return n?$r(dn(n),0,mn):0}function He(n){if(typeof n=="number")return n;if(Be(n))return nn;if(Nn(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Nn(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Yu(n);var r=dt.test(n);return r||Rt.test(n)?pi(n.slice(2),r?2:8):Fo.test(n)?nn:+n}function Rc(n){return _t(n,Te(n))}function Rp(n){return n?$r(dn(n),-9007199254740991,te):n===0?n:0}function Pn(n){return n==null?"":ke(n)}var kp=Ii(function(n,e){if(yu(e)||Se(e)){_t(e,ne(e),n);return}for(var r in e)N.call(e,r)&&lu(n,r,e[r])}),kc=Ii(function(n,e){_t(e,Te(e),n)}),To=Ii(function(n,e,r,o){_t(e,Te(e),n,o)}),Bp=Ii(function(n,e,r,o){_t(e,ne(e),n,o)}),Dp=Mt(Zo);function Kp(n,e){var r=Ei(n);return e==null?r:fs(r,e)}var Lp=bn(function(n,e){n=T(n);var r=-1,o=e.length,f=o>2?e[2]:s;for(f&&ge(e[0],e[1],f)&&(o=1);++r<o;)for(var g=e[r],b=Te(g),I=-1,C=b.length;++I<C;){var F=b[I],M=n[F];(M===s||ot(M,z[F])&&!N.call(n,F))&&(n[F]=g[F])}return n}),Fp=bn(function(n){return n.push(s,Xs),ie(Bc,s,n)});function Mp(n,e){return bi(n,un(e,3),mt)}function qp(n,e){return bi(n,un(e,3),Vo)}function Np(n,e){return n==null?n:Qo(n,un(e,3),Te)}function Up(n,e){return n==null?n:vs(n,un(e,3),Te)}function Wp(n,e){return n&&mt(n,un(e,3))}function Gp(n,e){return n&&Vo(n,un(e,3))}function $p(n){return n==null?[]:uo(n,ne(n))}function Hp(n){return n==null?[]:uo(n,Te(n))}function Ca(n,e,r){var o=n==null?s:Hr(n,e);return o===s?r:o}function zp(n,e){return n!=null&&Vs(n,e,vl)}function Ra(n,e){return n!=null&&Vs(n,e,gl)}var Yp=$s(function(n,e,r){e!=null&&typeof e.toString!="function"&&(e=fn.call(e)),n[e]=r},Ba(Ee)),jp=$s(function(n,e,r){e!=null&&typeof e.toString!="function"&&(e=fn.call(e)),N.call(n,e)?n[e].push(r):n[e]=[r]},un),Xp=bn(du);function ne(n){return Se(n)?ss(n):ta(n)}function Te(n){return Se(n)?ss(n,!0):El(n)}function Zp(n,e){var r={};return e=un(e,3),mt(n,function(o,f,g){Lt(r,e(o,f,g),o)}),r}function Qp(n,e){var r={};return e=un(e,3),mt(n,function(o,f,g){Lt(r,f,e(o,f,g))}),r}var Vp=Ii(function(n,e,r){oo(n,e,r)}),Bc=Ii(function(n,e,r,o){oo(n,e,r,o)}),Jp=Mt(function(n,e){var r={};if(n==null)return r;var o=!1;e=Bn(e,function(g){return g=dr(g,n),o||(o=g.length>1),g}),_t(n,ga(n),r),o&&(r=We(r,sn|Dn|pn,Yl));for(var f=e.length;f--;)sa(r,e[f]);return r});function nv(n,e){return Dc(n,xo(un(e)))}var ev=Mt(function(n,e){return n==null?{}:Ol(n,e)});function Dc(n,e){if(n==null)return{};var r=Bn(ga(n),function(o){return[o]});return e=un(e),Ts(n,r,function(o,f){return e(o,f[0])})}function tv(n,e,r){e=dr(e,n);var o=-1,f=e.length;for(f||(f=1,n=s);++o<f;){var g=n==null?s:n[bt(e[o])];g===s&&(o=f,g=r),n=Nt(g)?g.call(n):g}return n}function rv(n,e,r){return n==null?n:vu(n,e,r)}function iv(n,e,r,o){return o=typeof o=="function"?o:s,n==null?n:vu(n,e,r,o)}var Kc=Ys(ne),Lc=Ys(Te);function uv(n,e,r){var o=hn(n),f=o||vr(n)||Ci(n);if(e=un(e,4),r==null){var g=n&&n.constructor;f?r=o?new g:[]:Nn(n)?r=Nt(g)?Ei(jn(n)):{}:r={}}return(f?se:mt)(n,function(b,I,C){return e(r,b,I,C)}),r}function ov(n,e){return n==null?!0:sa(n,e)}function av(n,e,r){return n==null?n:Cs(n,e,la(r))}function sv(n,e,r,o){return o=typeof o=="function"?o:s,n==null?n:Cs(n,e,la(r),o)}function Ri(n){return n==null?[]:Mr(n,ne(n))}function cv(n){return n==null?[]:Mr(n,Te(n))}function fv(n,e,r){return r===s&&(r=e,e=s),r!==s&&(r=He(r),r=r===r?r:0),e!==s&&(e=He(e),e=e===e?e:0),$r(He(n),e,r)}function lv(n,e,r){return e=Ut(e),r===s?(r=e,e=0):r=Ut(r),n=He(n),yl(n,e,r)}function hv(n,e,r){if(r&&typeof r!="boolean"&&ge(n,e,r)&&(e=r=s),r===s&&(typeof e=="boolean"?(r=e,e=s):typeof n=="boolean"&&(r=n,n=s)),n===s&&e===s?(n=0,e=1):(n=Ut(n),e===s?(e=n,n=0):e=Ut(e)),n>e){var o=n;n=e,e=o}if(r||n%1||e%1){var f=os();return le(n+f*(e-n+di("1e-"+((f+"").length-1))),e)}return ua(n,e)}var dv=Oi(function(n,e,r){return e=e.toLowerCase(),n+(r?Fc(e):e)});function Fc(n){return ka(Pn(n).toLowerCase())}function Mc(n){return n=Pn(n),n&&n.replace(qi,$o).replace(vt,"")}function pv(n,e,r){n=Pn(n),e=ke(e);var o=n.length;r=r===s?o:$r(dn(r),0,o);var f=r;return r-=e.length,r>=0&&n.slice(r,f)==e}function vv(n){return n=Pn(n),n&&Cu.test(n)?n.replace(Ki,xi):n}function gv(n){return n=Pn(n),n&&Kn.test(n)?n.replace(Vt,"\\$&"):n}var yv=Oi(function(n,e,r){return n+(r?"-":"")+e.toLowerCase()}),mv=Oi(function(n,e,r){return n+(r?" ":"")+e.toLowerCase()}),_v=Us("toLowerCase");function bv(n,e,r){n=Pn(n),e=dn(e);var o=e?t(n):0;if(!e||o>=e)return n;var f=(e-o)/2;return ho(Ju(f),r)+n+ho(Vu(f),r)}function wv(n,e,r){n=Pn(n),e=dn(e);var o=e?t(n):0;return e&&o<e?n+ho(e-o,r):n}function xv(n,e,r){n=Pn(n),e=dn(e);var o=e?t(n):0;return e&&o<e?ho(e-o,r)+n:n}function Av(n,e,r){return r||e==null?e=0:e&&(e=+e),Cf(Pn(n).replace(Wn,""),e||0)}function Sv(n,e,r){return(r?ge(n,e,r):e===s)?e=1:e=dn(e),oa(Pn(n),e)}function Tv(){var n=arguments,e=Pn(n[0]);return n.length<3?e:e.replace(n[1],n[2])}var Ev=Oi(function(n,e,r){return n+(r?"_":"")+e.toLowerCase()});function Iv(n,e,r){return r&&typeof r!="number"&&ge(n,e,r)&&(e=r=s),r=r===s?mn:r>>>0,r?(n=Pn(n),n&&(typeof e=="string"||e!=null&&!Pa(e))&&(e=ke(e),!e&&it(n))?pr(i(n),0,r):n.split(e,r)):[]}var Ov=Oi(function(n,e,r){return n+(r?" ":"")+ka(e)});function Pv(n,e,r){return n=Pn(n),r=r==null?0:$r(dn(r),0,n.length),e=ke(e),n.slice(r,r+e.length)==e}function Cv(n,e,r){var o=p.templateSettings;r&&ge(n,e,r)&&(e=s),n=Pn(n),e=To({},e,o,js);var f=To({},e.imports,o.imports,js),g=ne(f),b=Mr(f,g),I,C,F=0,M=e.interpolate||Ln,U="__p += '",Q=R((e.escape||Ln).source+"|"+M.source+"|"+(M===Ru?ht:Ln).source+"|"+(e.evaluate||Ln).source+"|$","g"),tn="//# sourceURL="+(N.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Or+"]")+`
`;n.replace(Q,function(an,xn,Sn,De,ye,Ke){return Sn||(Sn=De),U+=n.slice(F,Ke).replace(kt,rt),xn&&(I=!0,U+=`' +
__e(`+xn+`) +
'`),ye&&(C=!0,U+=`';
`+ye+`;
__p += '`),Sn&&(U+=`' +
((__t = (`+Sn+`)) == null ? '' : __t) +
'`),F=Ke+an.length,an}),U+=`';
`;var on=N.call(e,"variable")&&e.variable;if(!on)U=`with (obj) {
`+U+`
}
`;else if(lt.test(on))throw new _(H);U=(C?U.replace(Ct,""):U).replace(ei,"$1").replace(Z,"$1;"),U="function("+(on||"obj")+`) {
`+(on?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(I?", __e = _.escape":"")+(C?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+U+`return __p
}`;var yn=Nc(function(){return E(g,tn+"return "+U).apply(s,b)});if(yn.source=U,Oa(yn))throw yn;return yn}function Rv(n){return Pn(n).toLowerCase()}function kv(n){return Pn(n).toUpperCase()}function Bv(n,e,r){if(n=Pn(n),n&&(r||e===s))return Yu(n);if(!n||!(e=ke(e)))return n;var o=i(n),f=i(e),g=iu(o,f),b=ju(o,f)+1;return pr(o,g,b).join("")}function Dv(n,e,r){if(n=Pn(n),n&&(r||e===s))return n.slice(0,u(n)+1);if(!n||!(e=ke(e)))return n;var o=i(n),f=ju(o,i(e))+1;return pr(o,0,f).join("")}function Kv(n,e,r){if(n=Pn(n),n&&(r||e===s))return n.replace(Wn,"");if(!n||!(e=ke(e)))return n;var o=i(n),f=iu(o,i(e));return pr(o,f).join("")}function Lv(n,e){var r=mr,o=Jr;if(Nn(e)){var f="separator"in e?e.separator:f;r="length"in e?dn(e.length):r,o="omission"in e?ke(e.omission):o}n=Pn(n);var g=n.length;if(it(n)){var b=i(n);g=b.length}if(r>=g)return n;var I=r-t(o);if(I<1)return o;var C=b?pr(b,0,I).join(""):n.slice(0,I);if(f===s)return C+o;if(b&&(I+=C.length-I),Pa(f)){if(n.slice(I).search(f)){var F,M=C;for(f.global||(f=R(f.source,Pn(xr.exec(f))+"g")),f.lastIndex=0;F=f.exec(M);)var U=F.index;C=C.slice(0,U===s?I:U)}}else if(n.indexOf(ke(f),I)!=I){var Q=C.lastIndexOf(f);Q>-1&&(C=C.slice(0,Q))}return C+o}function Fv(n){return n=Pn(n),n&&Li.test(n)?n.replace(ti,a):n}var Mv=Oi(function(n,e,r){return n+(r?" ":"")+e.toUpperCase()}),ka=Us("toUpperCase");function qc(n,e,r){return n=Pn(n),e=r?s:e,e===s?xe(n)?m(n):_i(n):n.match(e)||[]}var Nc=bn(function(n,e){try{return ie(n,s,e)}catch(r){return Oa(r)?r:new _(r)}}),qv=Mt(function(n,e){return se(e,function(r){r=bt(r),Lt(n,r,Ea(n[r],n))}),n});function Nv(n){var e=n==null?0:n.length,r=un();return n=e?Bn(n,function(o){if(typeof o[1]!="function")throw new k(q);return[r(o[0]),o[1]]}):[],bn(function(o){for(var f=-1;++f<e;){var g=n[f];if(ie(g[0],this,o))return ie(g[1],this,o)}})}function Uv(n){return hl(We(n,sn))}function Ba(n){return function(){return n}}function Wv(n,e){return n==null||n!==n?e:n}var Gv=Gs(),$v=Gs(!0);function Ee(n){return n}function Da(n){return _s(typeof n=="function"?n:We(n,sn))}function Hv(n){return ws(We(n,sn))}function zv(n,e){return xs(n,We(e,sn))}var Yv=bn(function(n,e){return function(r){return du(r,n,e)}}),jv=bn(function(n,e){return function(r){return du(n,r,e)}});function Ka(n,e,r){var o=ne(e),f=uo(e,o);r==null&&!(Nn(e)&&(f.length||!o.length))&&(r=e,e=n,n=this,f=uo(e,ne(e)));var g=!(Nn(r)&&"chain"in r)||!!r.chain,b=Nt(n);return se(f,function(I){var C=e[I];n[I]=C,b&&(n.prototype[I]=function(){var F=this.__chain__;if(g||F){var M=n(this.__wrapped__),U=M.__actions__=Ae(this.__actions__);return U.push({func:C,args:arguments,thisArg:n}),M.__chain__=F,M}return C.apply(n,et([this.value()],arguments))})}),n}function Xv(){return Qn._===this&&(Qn._=gn),this}function La(){}function Zv(n){return n=dn(n),bn(function(e){return As(e,n)})}var Qv=da(Bn),Vv=da(ir),Jv=da(tt);function Uc(n){return ba(n)?Lr(bt(n)):Pl(n)}function ng(n){return function(e){return n==null?s:Hr(n,e)}}var eg=Hs(),tg=Hs(!0);function Fa(){return[]}function Ma(){return!1}function rg(){return{}}function ig(){return""}function ug(){return!0}function og(n,e){if(n=dn(n),n<1||n>te)return[];var r=mn,o=le(n,mn);e=un(e),n-=mn;for(var f=wi(o,e);++r<n;)e(r);return f}function ag(n){return hn(n)?Bn(n,bt):Be(n)?[n]:Ae(ac(Pn(n)))}function sg(n){var e=++j;return Pn(n)+e}var cg=lo(function(n,e){return n+e},0),fg=pa("ceil"),lg=lo(function(n,e){return n/e},1),hg=pa("floor");function dg(n){return n&&n.length?io(n,Ee,Jo):s}function pg(n,e){return n&&n.length?io(n,un(e,2),Jo):s}function vg(n){return Gu(n,Ee)}function gg(n,e){return Gu(n,un(e,2))}function yg(n){return n&&n.length?io(n,Ee,ra):s}function mg(n,e){return n&&n.length?io(n,un(e,2),ra):s}var _g=lo(function(n,e){return n*e},1),bg=pa("round"),wg=lo(function(n,e){return n-e},0);function xg(n){return n&&n.length?ru(n,Ee):0}function Ag(n,e){return n&&n.length?ru(n,un(e,2)):0}return p.after=Hd,p.ary=mc,p.assign=kp,p.assignIn=kc,p.assignInWith=To,p.assignWith=Bp,p.at=Dp,p.before=_c,p.bind=Ea,p.bindAll=qv,p.bindKey=bc,p.castArray=rp,p.chain=vc,p.chunk=hh,p.compact=dh,p.concat=ph,p.cond=Nv,p.conforms=Uv,p.constant=Ba,p.countBy=xd,p.create=Kp,p.curry=wc,p.curryRight=xc,p.debounce=Ac,p.defaults=Lp,p.defaultsDeep=Fp,p.defer=zd,p.delay=Yd,p.difference=vh,p.differenceBy=gh,p.differenceWith=yh,p.drop=mh,p.dropRight=_h,p.dropRightWhile=bh,p.dropWhile=wh,p.fill=xh,p.filter=Sd,p.flatMap=Id,p.flatMapDeep=Od,p.flatMapDepth=Pd,p.flatten=lc,p.flattenDeep=Ah,p.flattenDepth=Sh,p.flip=jd,p.flow=Gv,p.flowRight=$v,p.fromPairs=Th,p.functions=$p,p.functionsIn=Hp,p.groupBy=Cd,p.initial=Ih,p.intersection=Oh,p.intersectionBy=Ph,p.intersectionWith=Ch,p.invert=Yp,p.invertBy=jp,p.invokeMap=kd,p.iteratee=Da,p.keyBy=Bd,p.keys=ne,p.keysIn=Te,p.map=_o,p.mapKeys=Zp,p.mapValues=Qp,p.matches=Hv,p.matchesProperty=zv,p.memoize=wo,p.merge=Vp,p.mergeWith=Bc,p.method=Yv,p.methodOf=jv,p.mixin=Ka,p.negate=xo,p.nthArg=Zv,p.omit=Jp,p.omitBy=nv,p.once=Xd,p.orderBy=Dd,p.over=Qv,p.overArgs=Zd,p.overEvery=Vv,p.overSome=Jv,p.partial=Ia,p.partialRight=Sc,p.partition=Kd,p.pick=ev,p.pickBy=Dc,p.property=Uc,p.propertyOf=ng,p.pull=Dh,p.pullAll=dc,p.pullAllBy=Kh,p.pullAllWith=Lh,p.pullAt=Fh,p.range=eg,p.rangeRight=tg,p.rearg=Qd,p.reject=Md,p.remove=Mh,p.rest=Vd,p.reverse=Sa,p.sampleSize=Nd,p.set=rv,p.setWith=iv,p.shuffle=Ud,p.slice=qh,p.sortBy=$d,p.sortedUniq=zh,p.sortedUniqBy=Yh,p.split=Iv,p.spread=Jd,p.tail=jh,p.take=Xh,p.takeRight=Zh,p.takeRightWhile=Qh,p.takeWhile=Vh,p.tap=dd,p.throttle=np,p.thru=mo,p.toArray=Pc,p.toPairs=Kc,p.toPairsIn=Lc,p.toPath=ag,p.toPlainObject=Rc,p.transform=uv,p.unary=ep,p.union=Jh,p.unionBy=nd,p.unionWith=ed,p.uniq=td,p.uniqBy=rd,p.uniqWith=id,p.unset=ov,p.unzip=Ta,p.unzipWith=pc,p.update=av,p.updateWith=sv,p.values=Ri,p.valuesIn=cv,p.without=ud,p.words=qc,p.wrap=tp,p.xor=od,p.xorBy=ad,p.xorWith=sd,p.zip=cd,p.zipObject=fd,p.zipObjectDeep=ld,p.zipWith=hd,p.entries=Kc,p.entriesIn=Lc,p.extend=kc,p.extendWith=To,Ka(p,p),p.add=cg,p.attempt=Nc,p.camelCase=dv,p.capitalize=Fc,p.ceil=fg,p.clamp=fv,p.clone=ip,p.cloneDeep=op,p.cloneDeepWith=ap,p.cloneWith=up,p.conformsTo=sp,p.deburr=Mc,p.defaultTo=Wv,p.divide=lg,p.endsWith=pv,p.eq=ot,p.escape=vv,p.escapeRegExp=gv,p.every=Ad,p.find=Td,p.findIndex=cc,p.findKey=Mp,p.findLast=Ed,p.findLastIndex=fc,p.findLastKey=qp,p.floor=hg,p.forEach=gc,p.forEachRight=yc,p.forIn=Np,p.forInRight=Up,p.forOwn=Wp,p.forOwnRight=Gp,p.get=Ca,p.gt=cp,p.gte=fp,p.has=zp,p.hasIn=Ra,p.head=hc,p.identity=Ee,p.includes=Rd,p.indexOf=Eh,p.inRange=lv,p.invoke=Xp,p.isArguments=jr,p.isArray=hn,p.isArrayBuffer=lp,p.isArrayLike=Se,p.isArrayLikeObject=Hn,p.isBoolean=hp,p.isBuffer=vr,p.isDate=dp,p.isElement=pp,p.isEmpty=vp,p.isEqual=gp,p.isEqualWith=yp,p.isError=Oa,p.isFinite=mp,p.isFunction=Nt,p.isInteger=Tc,p.isLength=Ao,p.isMap=Ec,p.isMatch=_p,p.isMatchWith=bp,p.isNaN=wp,p.isNative=xp,p.isNil=Sp,p.isNull=Ap,p.isNumber=Ic,p.isObject=Nn,p.isObjectLike=Gn,p.isPlainObject=_u,p.isRegExp=Pa,p.isSafeInteger=Tp,p.isSet=Oc,p.isString=So,p.isSymbol=Be,p.isTypedArray=Ci,p.isUndefined=Ep,p.isWeakMap=Ip,p.isWeakSet=Op,p.join=Rh,p.kebabCase=yv,p.last=$e,p.lastIndexOf=kh,p.lowerCase=mv,p.lowerFirst=_v,p.lt=Pp,p.lte=Cp,p.max=dg,p.maxBy=pg,p.mean=vg,p.meanBy=gg,p.min=yg,p.minBy=mg,p.stubArray=Fa,p.stubFalse=Ma,p.stubObject=rg,p.stubString=ig,p.stubTrue=ug,p.multiply=_g,p.nth=Bh,p.noConflict=Xv,p.noop=La,p.now=bo,p.pad=bv,p.padEnd=wv,p.padStart=xv,p.parseInt=Av,p.random=hv,p.reduce=Ld,p.reduceRight=Fd,p.repeat=Sv,p.replace=Tv,p.result=tv,p.round=bg,p.runInContext=l,p.sample=qd,p.size=Wd,p.snakeCase=Ev,p.some=Gd,p.sortedIndex=Nh,p.sortedIndexBy=Uh,p.sortedIndexOf=Wh,p.sortedLastIndex=Gh,p.sortedLastIndexBy=$h,p.sortedLastIndexOf=Hh,p.startCase=Ov,p.startsWith=Pv,p.subtract=wg,p.sum=xg,p.sumBy=Ag,p.template=Cv,p.times=og,p.toFinite=Ut,p.toInteger=dn,p.toLength=Cc,p.toLower=Rv,p.toNumber=He,p.toSafeInteger=Rp,p.toString=Pn,p.toUpper=kv,p.trim=Bv,p.trimEnd=Dv,p.trimStart=Kv,p.truncate=Lv,p.unescape=Fv,p.uniqueId=sg,p.upperCase=Mv,p.upperFirst=ka,p.each=gc,p.eachRight=yc,p.first=hc,Ka(p,function(){var n={};return mt(p,function(e,r){N.call(p.prototype,r)||(n[r]=e)}),n}(),{chain:!1}),p.VERSION=S,se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){p[n].placeholder=p}),se(["drop","take"],function(n,e){An.prototype[n]=function(r){r=r===s?1:Vn(dn(r),0);var o=this.__filtered__&&!e?new An(this):this.clone();return o.__filtered__?o.__takeCount__=le(r,o.__takeCount__):o.__views__.push({size:le(r,mn),type:n+(o.__dir__<0?"Right":"")}),o},An.prototype[n+"Right"]=function(r){return this.reverse()[n](r).reverse()}}),se(["filter","map","takeWhile"],function(n,e){var r=e+1,o=r==ni||r==Zn;An.prototype[n]=function(f){var g=this.clone();return g.__iteratees__.push({iteratee:un(f,3),type:r}),g.__filtered__=g.__filtered__||o,g}}),se(["head","last"],function(n,e){var r="take"+(e?"Right":"");An.prototype[n]=function(){return this[r](1).value()[0]}}),se(["initial","tail"],function(n,e){var r="drop"+(e?"":"Right");An.prototype[n]=function(){return this.__filtered__?new An(this):this[r](1)}}),An.prototype.compact=function(){return this.filter(Ee)},An.prototype.find=function(n){return this.filter(n).head()},An.prototype.findLast=function(n){return this.reverse().find(n)},An.prototype.invokeMap=bn(function(n,e){return typeof n=="function"?new An(this):this.map(function(r){return du(r,n,e)})}),An.prototype.reject=function(n){return this.filter(xo(un(n)))},An.prototype.slice=function(n,e){n=dn(n);var r=this;return r.__filtered__&&(n>0||e<0)?new An(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),e!==s&&(e=dn(e),r=e<0?r.dropRight(-e):r.take(e-n)),r)},An.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},An.prototype.toArray=function(){return this.take(mn)},mt(An.prototype,function(n,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),f=p[o?"take"+(e=="last"?"Right":""):e],g=o||/^find/.test(e);f&&(p.prototype[e]=function(){var b=this.__wrapped__,I=o?[1]:arguments,C=b instanceof An,F=I[0],M=C||hn(b),U=function(xn){var Sn=f.apply(p,et([xn],I));return o&&Q?Sn[0]:Sn};M&&r&&typeof F=="function"&&F.length!=1&&(C=M=!1);var Q=this.__chain__,tn=!!this.__actions__.length,on=g&&!Q,yn=C&&!tn;if(!g&&M){b=yn?b:new An(this);var an=n.apply(b,I);return an.__actions__.push({func:mo,args:[U],thisArg:s}),new Ue(an,Q)}return on&&yn?n.apply(this,I):(an=this.thru(U),on?o?an.value()[0]:an.value():an)})}),se(["pop","push","shift","sort","splice","unshift"],function(n){var e=L[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",o=/^(?:pop|shift)$/.test(n);p.prototype[n]=function(){var f=arguments;if(o&&!this.__chain__){var g=this.value();return e.apply(hn(g)?g:[],f)}return this[r](function(b){return e.apply(hn(b)?b:[],f)})}}),mt(An.prototype,function(n,e){var r=p[e];if(r){var o=r.name+"";N.call(Ti,o)||(Ti[o]=[]),Ti[o].push({name:e,func:r})}}),Ti[fo(s,Me).name]=[{name:"wrapper",func:s}],An.prototype.clone=Ff,An.prototype.reverse=Mf,An.prototype.value=qf,p.prototype.at=pd,p.prototype.chain=vd,p.prototype.commit=gd,p.prototype.next=yd,p.prototype.plant=_d,p.prototype.reverse=bd,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=wd,p.prototype.first=p.prototype.head,ou&&(p.prototype[ou]=md),p},O=x();nt?((nt.exports=O)._=O,Zi._=O):Qn._=O}).call(ey)}(xu,xu.exports)),xu.exports}var ry=ty();const Xc=of(ry);var Io={exports:{}},iy=Io.exports,Zc;function uy(){return Zc||(Zc=1,function(v,w){(function(s,S){v.exports=S()})(iy,function(){var s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,a){u.__proto__=a}||function(u,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(u[c]=a[c])})(t,i)},S=function(){return(S=Object.assign||function(t){for(var i,u=1,a=arguments.length;u<a;u++)for(var c in i=arguments[u])Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c]);return t}).apply(this,arguments)};function K(t,i,u){for(var a,c=0,d=i.length;c<d;c++)!a&&c in i||((a=a||Array.prototype.slice.call(i,0,c))[c]=i[c]);return t.concat(a||Array.prototype.slice.call(i))}var D=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:wu,q=Object.keys,H=Array.isArray;function X(t,i){return typeof i!="object"||q(i).forEach(function(u){t[u]=i[u]}),t}typeof Promise>"u"||D.Promise||(D.Promise=Promise);var V=Object.getPrototypeOf,ln={}.hasOwnProperty;function sn(t,i){return ln.call(t,i)}function Dn(t,i){typeof i=="function"&&(i=i(V(t))),(typeof Reflect>"u"?q:Reflect.ownKeys)(i).forEach(function(u){On(t,u,i[u])})}var pn=Object.defineProperty;function On(t,i,u,a){pn(t,i,X(u&&sn(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},a))}function En(t){return{from:function(i){return t.prototype=Object.create(i.prototype),On(t.prototype,"constructor",t),{extend:Dn.bind(null,t.prototype)}}}}var Xn=Object.getOwnPropertyDescriptor,Me=[].slice;function At(t,i,u){return Me.call(t,i,u)}function de(t,i){return i(t)}function Ie(t){if(!t)throw new Error("Assertion Failed")}function me(t){D.setImmediate?setImmediate(t):setTimeout(t,0)}function ee(t,i){if(typeof i=="string"&&sn(t,i))return t[i];if(!i)return t;if(typeof i!="string"){for(var u=[],a=0,c=i.length;a<c;++a){var d=ee(t,i[a]);u.push(d)}return u}var m=i.indexOf(".");if(m!==-1){var x=t[i.substr(0,m)];return x==null?void 0:ee(x,i.substr(m+1))}}function Fn(t,i,u){if(t&&i!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof i!="string"&&"length"in i){Ie(typeof u!="string"&&"length"in u);for(var a=0,c=i.length;a<c;++a)Fn(t,i[a],u[a])}else{var d,m,x=i.indexOf(".");x!==-1?(d=i.substr(0,x),(m=i.substr(x+1))===""?u===void 0?H(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=u:Fn(x=!(x=t[d])||!sn(t,d)?t[d]={}:x,m,u)):u===void 0?H(t)&&!isNaN(parseInt(i))?t.splice(i,1):delete t[i]:t[i]=u}}function st(t){var i,u={};for(i in t)sn(t,i)&&(u[i]=t[i]);return u}var yr=[].concat;function mr(t){return yr.apply([],t)}var It="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(mr([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(i){return i+t+"Array"})}))).filter(function(t){return D[t]}),Jr=new Set(It.map(function(t){return D[t]})),St=null;function ze(t){return St=new WeakMap,t=function i(u){if(!u||typeof u!="object")return u;var a=St.get(u);if(a)return a;if(H(u)){a=[],St.set(u,a);for(var c=0,d=u.length;c<d;++c)a.push(i(u[c]))}else if(Jr.has(u.constructor))a=u;else{var m,x=V(u);for(m in a=x===Object.prototype?{}:Object.create(x),St.set(u,a),u)sn(u,m)&&(a[m]=i(u[m]))}return a}(t),St=null,t}var ni={}.toString;function _e(t){return ni.call(t).slice(8,-1)}var Zn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",$t=typeof Zn=="symbol"?function(t){var i;return t!=null&&(i=t[Zn])&&i.apply(t)}:function(){return null};function te(t,i){return i=t.indexOf(i),0<=i&&t.splice(i,1),0<=i}var Y={};function nn(t){var i,u,a,c;if(arguments.length===1){if(H(t))return t.slice();if(this===Y&&typeof t=="string")return[t];if(c=$t(t)){for(u=[];!(a=c.next()).done;)u.push(a.value);return u}if(t==null)return[t];if(typeof(i=t.length)!="number")return[t];for(u=new Array(i);i--;)u[i]=t[i];return u}for(i=arguments.length,u=new Array(i);i--;)u[i]=arguments[i];return u}var mn=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ze=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],xe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ze),Ro={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ht(t,i){this.name=t,this.message=i}function Eu(t,i){return t+". Errors: "+Object.keys(i).map(function(u){return i[u].toString()}).filter(function(u,a,c){return c.indexOf(u)===a}).join(`
`)}function Ye(t,i,u,a){this.failures=i,this.failedKeys=a,this.successCount=u,this.message=Eu(t,i)}function je(t,i){this.name="BulkError",this.failures=Object.keys(i).map(function(u){return i[u]}),this.failuresByPos=i,this.message=Eu(t,this.failures)}En(Ht).from(Error).extend({toString:function(){return this.name+": "+this.message}}),En(Ye).from(Ht),En(je).from(Ht);var Di=xe.reduce(function(t,i){return t[i]=i+"Error",t},{}),_r=Ht,rn=xe.reduce(function(t,i){var u=i+"Error";function a(c,d){this.name=u,c?typeof c=="string"?(this.message="".concat(c).concat(d?`
 `+d:""),this.inner=d||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Ro[i]||u,this.inner=null)}return En(a).from(_r),t[i]=a,t},{});rn.Syntax=SyntaxError,rn.Type=TypeError,rn.Range=RangeError;var Iu=Ze.reduce(function(t,i){return t[i+"Error"]=rn[i],t},{}),Tt=xe.reduce(function(t,i){return["Syntax","Type","Range"].indexOf(i)===-1&&(t[i+"Error"]=rn[i]),t},{});function Tn(){}function zt(t){return t}function Oe(t,i){return t==null||t===zt?i:function(u){return i(t(u))}}function Pe(t,i){return function(){t.apply(this,arguments),i.apply(this,arguments)}}function ko(t,i){return t===Tn?i:function(){var u=t.apply(this,arguments);u!==void 0&&(arguments[0]=u);var a=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=i.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?Pe(a,this.onsuccess):a),c&&(this.onerror=this.onerror?Pe(c,this.onerror):c),d!==void 0?d:u}}function Xe(t,i){return t===Tn?i:function(){t.apply(this,arguments);var u=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,i.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Pe(u,this.onsuccess):u),a&&(this.onerror=this.onerror?Pe(a,this.onerror):a)}}function Ou(t,i){return t===Tn?i:function(u){var a=t.apply(this,arguments);X(u,a);var c=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,u=i.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?Pe(c,this.onsuccess):c),d&&(this.onerror=this.onerror?Pe(d,this.onerror):d),a===void 0?u===void 0?void 0:u:X(a,u)}}function Bo(t,i){return t===Tn?i:function(){return i.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Et(t,i){return t===Tn?i:function(){var u=t.apply(this,arguments);if(u&&typeof u.then=="function"){for(var a=this,c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return u.then(function(){return i.apply(a,d)})}return i.apply(this,arguments)}}Tt.ModifyError=Ye,Tt.DexieError=Ht,Tt.BulkError=je;var Un=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Yt(t){Un=t}var ct={},Pu=100,It=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,V(t),t];var i=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[i,V(i),t]}(),Ze=It[0],xe=It[1],It=It[2],xe=xe&&xe.then,Ce=Ze&&Ze.constructor,ft=!!It,Ot=function(t,i){Pt.push([t,i]),jt&&(queueMicrotask(Ru),jt=!1)},br=!0,jt=!0,Qe=[],Xt=[],wr=zt,qe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Tn,pgp:!1,env:{},finalize:Tn},en=qe,Pt=[],Ct=0,ei=[];function Z(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var i=this._PSD=en;if(typeof t!="function"){if(t!==ct)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Li(this,this._value))}this._state=null,this._value=null,++i.ref,function u(a,c){try{c(function(d){if(a._state===null){if(d===a)throw new TypeError("A promise cannot be resolved with itself.");var m=a._lib&&Zt();d&&typeof d.then=="function"?u(a,function(x,O){d instanceof Z?d._then(x,O):d.then(x,O)}):(a._state=!0,a._value=d,Cu(a)),m&&Qt()}},Li.bind(null,a))}catch(d){Li(a,d)}}(this,t)}var ti={get:function(){var t=en,i=ui;function u(a,c){var d=this,m=!t.global&&(t!==en||i!==ui),x=m&&!ht(),O=new Z(function(l,y){Fi(d,new Ki(Bu(a,t,m,x),Bu(c,t,m,x),l,y,t))});return this._consoleTask&&(O._consoleTask=this._consoleTask),O}return u.prototype=ct,u},set:function(t){On(this,"then",t&&t.prototype===ct?ti:{get:function(){return t},set:ti.set})}};function Ki(t,i,u,a,c){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof i=="function"?i:null,this.resolve=u,this.reject=a,this.psd=c}function Li(t,i){var u,a;Xt.push(i),t._state===null&&(u=t._lib&&Zt(),i=wr(i),t._state=!1,t._value=i,a=t,Qe.some(function(c){return c._value===a._value})||Qe.push(a),Cu(t),u&&Qt())}function Cu(t){var i=t._listeners;t._listeners=[];for(var u=0,a=i.length;u<a;++u)Fi(t,i[u]);var c=t._PSD;--c.ref||c.finalize(),Ct===0&&(++Ct,Ot(function(){--Ct==0&&Mi()},[]))}function Fi(t,i){if(t._state!==null){var u=t._state?i.onFulfilled:i.onRejected;if(u===null)return(t._state?i.resolve:i.reject)(t._value);++i.psd.ref,++Ct,Ot(Do,[u,t,i])}else t._listeners.push(i)}function Do(t,i,u){try{var a,c=i._value;!i._state&&Xt.length&&(Xt=[]),a=Un&&i._consoleTask?i._consoleTask.run(function(){return t(c)}):t(c),i._state||Xt.indexOf(c)!==-1||function(d){for(var m=Qe.length;m;)if(Qe[--m]._value===d._value)return Qe.splice(m,1)}(i),u.resolve(a)}catch(d){u.reject(d)}finally{--Ct==0&&Mi(),--u.psd.ref||u.psd.finalize()}}function Ru(){Rt(qe,function(){Zt()&&Qt()})}function Zt(){var t=br;return jt=br=!1,t}function Qt(){var t,i,u;do for(;0<Pt.length;)for(t=Pt,Pt=[],u=t.length,i=0;i<u;++i){var a=t[i];a[0].apply(null,a[1])}while(0<Pt.length);jt=br=!0}function Mi(){var t=Qe;Qe=[],t.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var i=ei.slice(0),u=i.length;u;)i[--u]()}function Vt(t){return new Z(ct,!1,t)}function Kn(t,i){var u=en;return function(){var a=Zt(),c=en;try{return dt(u,!0),t.apply(this,arguments)}catch(d){i&&i(d)}finally{dt(c,!1),a&&Qt()}}}Dn(Z.prototype,{then:ti,_then:function(t,i){Fi(this,new Ki(null,null,t,i,en))},catch:function(t){if(arguments.length===1)return this.then(null,t);var i=t,u=arguments[1];return typeof i=="function"?this.then(null,function(a){return(a instanceof i?u:Vt)(a)}):this.then(null,function(a){return(a&&a.name===i?u:Vt)(a)})},finally:function(t){return this.then(function(i){return Z.resolve(t()).then(function(){return i})},function(i){return Z.resolve(t()).then(function(){return Vt(i)})})},timeout:function(t,i){var u=this;return t<1/0?new Z(function(a,c){var d=setTimeout(function(){return c(new rn.Timeout(i))},t);u.then(a,c).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&On(Z.prototype,Symbol.toStringTag,"Dexie.Promise"),qe.env=ku(),Dn(Z,{all:function(){var t=nn.apply(null,arguments).map(xr);return new Z(function(i,u){t.length===0&&i([]);var a=t.length;t.forEach(function(c,d){return Z.resolve(c).then(function(m){t[d]=m,--a||i(t)},u)})})},resolve:function(t){return t instanceof Z?t:t&&typeof t.then=="function"?new Z(function(i,u){t.then(i,u)}):new Z(ct,!0,t)},reject:Vt,race:function(){var t=nn.apply(null,arguments).map(xr);return new Z(function(i,u){t.map(function(a){return Z.resolve(a).then(i,u)})})},PSD:{get:function(){return en},set:function(t){return en=t}},totalEchoes:{get:function(){return ui}},newPSD:lt,usePSD:Rt,scheduler:{get:function(){return Ot},set:function(t){Ot=t}},rejectionMapper:{get:function(){return wr},set:function(t){wr=t}},follow:function(t,i){return new Z(function(u,a){return lt(function(c,d){var m=en;m.unhandleds=[],m.onunhandled=d,m.finalize=Pe(function(){var x,O=this;x=function(){O.unhandleds.length===0?c():d(O.unhandleds[0])},ei.push(function l(){x(),ei.splice(ei.indexOf(l),1)}),++Ct,Ot(function(){--Ct==0&&Mi()},[])},m.finalize),t()},i,u,a)})}}),Ce&&(Ce.allSettled&&On(Z,"allSettled",function(){var t=nn.apply(null,arguments).map(xr);return new Z(function(i){t.length===0&&i([]);var u=t.length,a=new Array(u);t.forEach(function(c,d){return Z.resolve(c).then(function(m){return a[d]={status:"fulfilled",value:m}},function(m){return a[d]={status:"rejected",reason:m}}).then(function(){return--u||i(a)})})})}),Ce.any&&typeof AggregateError<"u"&&On(Z,"any",function(){var t=nn.apply(null,arguments).map(xr);return new Z(function(i,u){t.length===0&&u(new AggregateError([]));var a=t.length,c=new Array(a);t.forEach(function(d,m){return Z.resolve(d).then(function(x){return i(x)},function(x){c[m]=x,--a||u(new AggregateError(c))})})})}),Ce.withResolvers&&(Z.withResolvers=Ce.withResolvers));var Wn={awaits:0,echoes:0,id:0},Ko=0,ri=[],ii=0,ui=0,Lo=0;function lt(t,i,u,a){var c=en,d=Object.create(c);return d.parent=c,d.ref=0,d.global=!1,d.id=++Lo,qe.env,d.env=ft?{Promise:Z,PromiseProp:{value:Z,configurable:!0,writable:!0},all:Z.all,race:Z.race,allSettled:Z.allSettled,any:Z.any,resolve:Z.resolve,reject:Z.reject}:{},i&&X(d,i),++c.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},a=Rt(d,t,u,a),d.ref===0&&d.finalize(),a}function Jt(){return Wn.id||(Wn.id=++Ko),++Wn.awaits,Wn.echoes+=Pu,Wn.id}function ht(){return!!Wn.awaits&&(--Wn.awaits==0&&(Wn.id=0),Wn.echoes=Wn.awaits*Pu,!0)}function xr(t){return Wn.echoes&&t&&t.constructor===Ce?(Jt(),t.then(function(i){return ht(),i},function(i){return ht(),Ln(i)})):t}function Fo(){var t=ri[ri.length-1];ri.pop(),dt(t,!1)}function dt(t,i){var u,a=en;(i?!Wn.echoes||ii++&&t===en:!ii||--ii&&t===en)||queueMicrotask(i?(function(c){++ui,Wn.echoes&&--Wn.echoes!=0||(Wn.echoes=Wn.awaits=Wn.id=0),ri.push(en),dt(c,!0)}).bind(null,t):Fo),t!==en&&(en=t,a===qe&&(qe.env=ku()),ft&&(u=qe.env.Promise,i=t.env,(a.global||t.global)&&(Object.defineProperty(D,"Promise",i.PromiseProp),u.all=i.all,u.race=i.race,u.resolve=i.resolve,u.reject=i.reject,i.allSettled&&(u.allSettled=i.allSettled),i.any&&(u.any=i.any))))}function ku(){var t=D.Promise;return ft?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(D,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Rt(t,i,u,a,c){var d=en;try{return dt(t,!0),i(u,a,c)}finally{dt(d,!1)}}function Bu(t,i,u,a){return typeof t!="function"?t:function(){var c=en;u&&Jt(),dt(i,!0);try{return t.apply(this,arguments)}finally{dt(c,!1),a&&queueMicrotask(ht)}}}function qi(t){Promise===Ce&&Wn.echoes===0?ii===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+xe).indexOf("[native code]")===-1&&(Jt=ht=Tn);var Ln=Z.reject,kt="￿",be="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Du="String expected.",nr=[],oi="__dbnames",ai="readonly",si="readwrite";function pt(t,i){return t?i?function(){return t.apply(this,arguments)&&i.apply(this,arguments)}:t:i}var Ku={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ci(t){return typeof t!="string"||/\./.test(t)?function(i){return i}:function(i){return i[t]===void 0&&t in i&&delete(i=ze(i))[t],i}}function Lu(){throw rn.Type()}function wn(t,i){try{var u=Ni(t),a=Ni(i);if(u!==a)return u==="Array"?1:a==="Array"?-1:u==="binary"?1:a==="binary"?-1:u==="string"?1:a==="string"?-1:u==="Date"?1:a!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return i<t?1:t<i?-1:0;case"binary":return function(c,d){for(var m=c.length,x=d.length,O=m<x?m:x,l=0;l<O;++l)if(c[l]!==d[l])return c[l]<d[l]?-1:1;return m===x?0:m<x?-1:1}(Ui(t),Ui(i));case"Array":return function(c,d){for(var m=c.length,x=d.length,O=m<x?m:x,l=0;l<O;++l){var y=wn(c[l],d[l]);if(y!==0)return y}return m===x?0:m<x?-1:1}(t,i)}}catch{}return NaN}function Ni(t){var i=typeof t;return i!="object"?i:ArrayBuffer.isView(t)?"binary":(t=_e(t),t==="ArrayBuffer"?"binary":t)}function Ui(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Wi=(Cn.prototype._trans=function(t,i,u){var a=this._tx||en.trans,c=this.name,d=Un&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function m(l,y,h){if(!h.schema[c])throw new rn.NotFound("Table "+c+" not part of transaction");return i(h.idbtrans,h)}var x=Zt();try{var O=a&&a.db._novip===this.db._novip?a===en.trans?a._promise(t,m,u):lt(function(){return a._promise(t,m,u)},{trans:a,transless:en.transless||en}):function l(y,h,A,_){if(y.idbdb&&(y._state.openComplete||en.letThrough||y._vip)){var E=y._createTransaction(h,A,y._dbSchema);try{E.create(),y._state.PR1398_maxLoop=3}catch(P){return P.name===Di.InvalidState&&y.isOpen()&&0<--y._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),y.close({disableAutoOpen:!1}),y.open().then(function(){return l(y,h,A,_)})):Ln(P)}return E._promise(h,function(P,T){return lt(function(){return en.trans=E,_(P,T,E)})}).then(function(P){if(h==="readwrite")try{E.idbtrans.commit()}catch{}return h==="readonly"?P:E._completion.then(function(){return P})})}if(y._state.openComplete)return Ln(new rn.DatabaseClosed(y._state.dbOpenError));if(!y._state.isBeingOpened){if(!y._state.autoOpen)return Ln(new rn.DatabaseClosed);y.open().catch(Tn)}return y._state.dbReadyPromise.then(function(){return l(y,h,A,_)})}(this.db,t,[this.name],m);return d&&(O._consoleTask=d,O=O.catch(function(l){return console.trace(l),Ln(l)})),O}finally{x&&Qt()}},Cn.prototype.get=function(t,i){var u=this;return t&&t.constructor===Object?this.where(t).first(i):t==null?Ln(new rn.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return u.core.get({trans:a,key:t}).then(function(c){return u.hook.reading.fire(c)})}).then(i)},Cn.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(H(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var i=q(t);if(i.length===1)return this.where(i[0]).equals(t[i[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&i.every(function(l){return 0<=x.keyPath.indexOf(l)})){for(var O=0;O<i.length;++O)if(i.indexOf(x.keyPath[O])===-1)return!1;return!0}return!1}).sort(function(x,O){return x.keyPath.length-O.keyPath.length})[0];if(u&&this.db._maxKey!==kt){var d=u.keyPath.slice(0,i.length);return this.where(d).equals(d.map(function(O){return t[O]}))}!u&&Un&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var a=this.schema.idxByName;function c(x,O){return wn(x,O)===0}var m=i.reduce(function(h,O){var l=h[0],y=h[1],h=a[O],A=t[O];return[l||h,l||!h?pt(y,h&&h.multi?function(_){return _=ee(_,O),H(_)&&_.some(function(E){return c(A,E)})}:function(_){return c(A,ee(_,O))}):y]},[null,null]),d=m[0],m=m[1];return d?this.where(d.name).equals(t[d.keyPath]).filter(m):u?this.filter(m):this.where(i).equals("")},Cn.prototype.filter=function(t){return this.toCollection().and(t)},Cn.prototype.count=function(t){return this.toCollection().count(t)},Cn.prototype.offset=function(t){return this.toCollection().offset(t)},Cn.prototype.limit=function(t){return this.toCollection().limit(t)},Cn.prototype.each=function(t){return this.toCollection().each(t)},Cn.prototype.toArray=function(t){return this.toCollection().toArray(t)},Cn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Cn.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,H(t)?"[".concat(t.join("+"),"]"):t))},Cn.prototype.reverse=function(){return this.toCollection().reverse()},Cn.prototype.mapToClass=function(t){var i,u=this.db,a=this.name;function c(){return i!==null&&i.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof Lu&&(function(O,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function y(){this.constructor=O}s(O,l),O.prototype=l===null?Object.create(l):(y.prototype=l.prototype,new y)}(c,i=t),Object.defineProperty(c.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),c.prototype.table=function(){return a},t=c);for(var d=new Set,m=t.prototype;m;m=V(m))Object.getOwnPropertyNames(m).forEach(function(O){return d.add(O)});function x(O){if(!O)return O;var l,y=Object.create(t.prototype);for(l in O)if(!d.has(l))try{y[l]=O[l]}catch{}return y}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=x,this.hook("reading",x),t},Cn.prototype.defineClass=function(){return this.mapToClass(function(t){X(this,t)})},Cn.prototype.add=function(t,i){var u=this,a=this.schema.primKey,c=a.auto,d=a.keyPath,m=t;return d&&c&&(m=ci(d)(t)),this._trans("readwrite",function(x){return u.core.mutate({trans:x,type:"add",keys:i!=null?[i]:null,values:[m]})}).then(function(x){return x.numFailures?Z.reject(x.failures[0]):x.lastResult}).then(function(x){if(d)try{Fn(t,d,x)}catch{}return x})},Cn.prototype.update=function(t,i){return typeof t!="object"||H(t)?this.where(":id").equals(t).modify(i):(t=ee(t,this.schema.primKey.keyPath),t===void 0?Ln(new rn.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(i))},Cn.prototype.put=function(t,i){var u=this,a=this.schema.primKey,c=a.auto,d=a.keyPath,m=t;return d&&c&&(m=ci(d)(t)),this._trans("readwrite",function(x){return u.core.mutate({trans:x,type:"put",values:[m],keys:i!=null?[i]:null})}).then(function(x){return x.numFailures?Z.reject(x.failures[0]):x.lastResult}).then(function(x){if(d)try{Fn(t,d,x)}catch{}return x})},Cn.prototype.delete=function(t){var i=this;return this._trans("readwrite",function(u){return i.core.mutate({trans:u,type:"delete",keys:[t]})}).then(function(u){return u.numFailures?Z.reject(u.failures[0]):void 0})},Cn.prototype.clear=function(){var t=this;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"deleteRange",range:Ku})}).then(function(i){return i.numFailures?Z.reject(i.failures[0]):void 0})},Cn.prototype.bulkGet=function(t){var i=this;return this._trans("readonly",function(u){return i.core.getMany({keys:t,trans:u}).then(function(a){return a.map(function(c){return i.hook.reading.fire(c)})})})},Cn.prototype.bulkAdd=function(t,i,u){var a=this,c=Array.isArray(i)?i:void 0,d=(u=u||(c?void 0:i))?u.allKeys:void 0;return this._trans("readwrite",function(m){var l=a.schema.primKey,x=l.auto,l=l.keyPath;if(l&&c)throw new rn.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new rn.InvalidArgument("Arguments objects and keys must have the same length");var O=t.length,l=l&&x?t.map(ci(l)):t;return a.core.mutate({trans:m,type:"add",keys:c,values:l,wantResults:d}).then(function(E){var h=E.numFailures,A=E.results,_=E.lastResult,E=E.failures;if(h===0)return d?A:_;throw new je("".concat(a.name,".bulkAdd(): ").concat(h," of ").concat(O," operations failed"),E)})})},Cn.prototype.bulkPut=function(t,i,u){var a=this,c=Array.isArray(i)?i:void 0,d=(u=u||(c?void 0:i))?u.allKeys:void 0;return this._trans("readwrite",function(m){var l=a.schema.primKey,x=l.auto,l=l.keyPath;if(l&&c)throw new rn.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new rn.InvalidArgument("Arguments objects and keys must have the same length");var O=t.length,l=l&&x?t.map(ci(l)):t;return a.core.mutate({trans:m,type:"put",keys:c,values:l,wantResults:d}).then(function(E){var h=E.numFailures,A=E.results,_=E.lastResult,E=E.failures;if(h===0)return d?A:_;throw new je("".concat(a.name,".bulkPut(): ").concat(h," of ").concat(O," operations failed"),E)})})},Cn.prototype.bulkUpdate=function(t){var i=this,u=this.core,a=t.map(function(m){return m.key}),c=t.map(function(m){return m.changes}),d=[];return this._trans("readwrite",function(m){return u.getMany({trans:m,keys:a,cache:"clone"}).then(function(x){var O=[],l=[];t.forEach(function(h,A){var _=h.key,E=h.changes,P=x[A];if(P){for(var T=0,R=Object.keys(E);T<R.length;T++){var B=R[T],k=E[B];if(B===i.schema.primKey.keyPath){if(wn(k,_)!==0)throw new rn.Constraint("Cannot update primary key in bulkUpdate()")}else Fn(P,B,k)}d.push(A),O.push(_),l.push(P)}});var y=O.length;return u.mutate({trans:m,type:"put",keys:O,values:l,updates:{keys:a,changeSpecs:c}}).then(function(h){var A=h.numFailures,_=h.failures;if(A===0)return y;for(var E=0,P=Object.keys(_);E<P.length;E++){var T,R=P[E],B=d[Number(R)];B!=null&&(T=_[R],delete _[R],_[B]=T)}throw new je("".concat(i.name,".bulkUpdate(): ").concat(A," of ").concat(y," operations failed"),_)})})})},Cn.prototype.bulkDelete=function(t){var i=this,u=t.length;return this._trans("readwrite",function(a){return i.core.mutate({trans:a,type:"delete",keys:t})}).then(function(m){var c=m.numFailures,d=m.lastResult,m=m.failures;if(c===0)return d;throw new je("".concat(i.name,".bulkDelete(): ").concat(c," of ").concat(u," operations failed"),m)})},Cn);function Cn(){}function Ar(t){function i(m,x){if(x){for(var O=arguments.length,l=new Array(O-1);--O;)l[O-1]=arguments[O];return u[m].subscribe.apply(null,l),t}if(typeof m=="string")return u[m]}var u={};i.addEventType=d;for(var a=1,c=arguments.length;a<c;++a)d(arguments[a]);return i;function d(m,x,O){if(typeof m!="object"){var l;x=x||Bo;var y={subscribers:[],fire:O=O||Tn,subscribe:function(h){y.subscribers.indexOf(h)===-1&&(y.subscribers.push(h),y.fire=x(y.fire,h))},unsubscribe:function(h){y.subscribers=y.subscribers.filter(function(A){return A!==h}),y.fire=y.subscribers.reduce(x,O)}};return u[m]=i[m]=y}q(l=m).forEach(function(h){var A=l[h];if(H(A))d(h,l[h][0],l[h][1]);else{if(A!=="asap")throw new rn.InvalidArgument("Invalid event config");var _=d(h,zt,function(){for(var E=arguments.length,P=new Array(E);E--;)P[E]=arguments[E];_.subscribers.forEach(function(T){me(function(){T.apply(null,P)})})})}})}}function er(t,i){return En(i).from({prototype:t}),i}function Ve(t,i){return!(t.filter||t.algorithm||t.or)&&(i?t.justLimit:!t.replayFilter)}function fi(t,i){t.filter=pt(t.filter,i)}function Gi(t,i,u){var a=t.replayFilter;t.replayFilter=a?function(){return pt(a(),i())}:i,t.justLimit=u&&!a}function Sr(t,i){if(t.isPrimKey)return i.primaryKey;var u=i.getIndexByKeyPath(t.index);if(!u)throw new rn.Schema("KeyPath "+t.index+" on object store "+i.name+" is not indexed");return u}function $i(t,i,u){var a=Sr(t,i.schema);return i.openCursor({trans:u,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:a,range:t.range}})}function tr(t,i,u,a){var c=t.replayFilter?pt(t.filter,t.replayFilter()):t.filter;if(t.or){var d={},m=function(x,O,l){var y,h;c&&!c(O,l,function(A){return O.stop(A)},function(A){return O.fail(A)})||((h=""+(y=O.primaryKey))=="[object ArrayBuffer]"&&(h=""+new Uint8Array(y)),sn(d,h)||(d[h]=!0,i(x,O,l)))};return Promise.all([t.or._iterate(m,u),Fu($i(t,a,u),t.algorithm,m,!t.keysOnly&&t.valueMapper)])}return Fu($i(t,a,u),pt(t.algorithm,c),i,!t.keysOnly&&t.valueMapper)}function Fu(t,i,u,a){var c=Kn(a?function(d,m,x){return u(a(d),m,x)}:u);return t.then(function(d){if(d)return d.start(function(){var m=function(){return d.continue()};i&&!i(d,function(x){return m=x},function(x){d.stop(x),m=Tn},function(x){d.fail(x),m=Tn})||c(d.value,d,function(x){return m=x}),m()})})}var rr=(li.prototype.execute=function(t){var i=this["@@propmod"];if(i.add!==void 0){var u=i.add;if(H(u))return K(K([],H(t)?t:[],!0),u).sort();if(typeof u=="number")return(Number(t)||0)+u;if(typeof u=="bigint")try{return BigInt(t)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(i.remove!==void 0){var a=i.remove;if(H(a))return H(t)?t.filter(function(c){return!a.includes(c)}).sort():[];if(typeof a=="number")return Number(t)-a;if(typeof a=="bigint")try{return BigInt(t)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return u=(u=i.replacePrefix)===null||u===void 0?void 0:u[0],u&&typeof t=="string"&&t.startsWith(u)?i.replacePrefix[1]+t.substring(u.length):t},li);function li(t){this["@@propmod"]=t}var Hi=(_n.prototype._read=function(t,i){var u=this._ctx;return u.error?u.table._trans(null,Ln.bind(null,u.error)):u.table._trans("readonly",t).then(i)},_n.prototype._write=function(t){var i=this._ctx;return i.error?i.table._trans(null,Ln.bind(null,i.error)):i.table._trans("readwrite",t,"locked")},_n.prototype._addAlgorithm=function(t){var i=this._ctx;i.algorithm=pt(i.algorithm,t)},_n.prototype._iterate=function(t,i){return tr(this._ctx,t,i,this._ctx.table.core)},_n.prototype.clone=function(t){var i=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return t&&X(u,t),i._ctx=u,i},_n.prototype.raw=function(){return this._ctx.valueMapper=null,this},_n.prototype.each=function(t){var i=this._ctx;return this._read(function(u){return tr(i,t,u,i.table.core)})},_n.prototype.count=function(t){var i=this;return this._read(function(u){var a=i._ctx,c=a.table.core;if(Ve(a,!0))return c.count({trans:u,query:{index:Sr(a,c.schema),range:a.range}}).then(function(m){return Math.min(m,a.limit)});var d=0;return tr(a,function(){return++d,!1},u,c).then(function(){return d})}).then(t)},_n.prototype.sortBy=function(t,i){var u=t.split(".").reverse(),a=u[0],c=u.length-1;function d(O,l){return l?d(O[u[l]],l-1):O[a]}var m=this._ctx.dir==="next"?1:-1;function x(O,l){return wn(d(O,c),d(l,c))*m}return this.toArray(function(O){return O.sort(x)}).then(i)},_n.prototype.toArray=function(t){var i=this;return this._read(function(u){var a=i._ctx;if(a.dir==="next"&&Ve(a,!0)&&0<a.limit){var c=a.valueMapper,d=Sr(a,a.table.core.schema);return a.table.core.query({trans:u,limit:a.limit,values:!0,query:{index:d,range:a.range}}).then(function(x){return x=x.result,c?x.map(c):x})}var m=[];return tr(a,function(x){return m.push(x)},u,a.table.core).then(function(){return m})},t)},_n.prototype.offset=function(t){var i=this._ctx;return t<=0||(i.offset+=t,Ve(i)?Gi(i,function(){var u=t;return function(a,c){return u===0||(u===1?--u:c(function(){a.advance(u),u=0}),!1)}}):Gi(i,function(){var u=t;return function(){return--u<0}})),this},_n.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Gi(this._ctx,function(){var i=t;return function(u,a,c){return--i<=0&&a(c),0<=i}},!0),this},_n.prototype.until=function(t,i){return fi(this._ctx,function(u,a,c){return!t(u.value)||(a(c),i)}),this},_n.prototype.first=function(t){return this.limit(1).toArray(function(i){return i[0]}).then(t)},_n.prototype.last=function(t){return this.reverse().first(t)},_n.prototype.filter=function(t){var i;return fi(this._ctx,function(u){return t(u.value)}),(i=this._ctx).isMatch=pt(i.isMatch,t),this},_n.prototype.and=function(t){return this.filter(t)},_n.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},_n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},_n.prototype.desc=function(){return this.reverse()},_n.prototype.eachKey=function(t){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(u,a){t(a.key,a)})},_n.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},_n.prototype.eachPrimaryKey=function(t){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(u,a){t(a.primaryKey,a)})},_n.prototype.keys=function(t){var i=this._ctx;i.keysOnly=!i.isMatch;var u=[];return this.each(function(a,c){u.push(c.key)}).then(function(){return u}).then(t)},_n.prototype.primaryKeys=function(t){var i=this._ctx;if(i.dir==="next"&&Ve(i,!0)&&0<i.limit)return this._read(function(a){var c=Sr(i,i.table.core.schema);return i.table.core.query({trans:a,values:!1,limit:i.limit,query:{index:c,range:i.range}})}).then(function(a){return a.result}).then(t);i.keysOnly=!i.isMatch;var u=[];return this.each(function(a,c){u.push(c.primaryKey)}).then(function(){return u}).then(t)},_n.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},_n.prototype.firstKey=function(t){return this.limit(1).keys(function(i){return i[0]}).then(t)},_n.prototype.lastKey=function(t){return this.reverse().firstKey(t)},_n.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var i={};return fi(this._ctx,function(c){var a=c.primaryKey.toString(),c=sn(i,a);return i[a]=!0,!c}),this},_n.prototype.modify=function(t){var i=this,u=this._ctx;return this._write(function(a){var c,d,m;m=typeof t=="function"?t:(c=q(t),d=c.length,function(T){for(var R=!1,B=0;B<d;++B){var k=c[B],L=t[k],G=ee(T,k);L instanceof rr?(Fn(T,k,L.execute(G)),R=!0):G!==L&&(Fn(T,k,L),R=!0)}return R});var x=u.table.core,h=x.schema.primaryKey,O=h.outbound,l=h.extractKey,y=200,h=i.db._options.modifyChunkSize;h&&(y=typeof h=="object"?h[x.name]||h["*"]||200:h);function A(T,k){var B=k.failures,k=k.numFailures;E+=T-k;for(var L=0,G=q(B);L<G.length;L++){var z=G[L];_.push(B[z])}}var _=[],E=0,P=[];return i.clone().primaryKeys().then(function(T){function R(k){var L=Math.min(y,T.length-k);return x.getMany({trans:a,keys:T.slice(k,k+L),cache:"immutable"}).then(function(G){for(var z=[],W=[],$=O?[]:null,N=[],j=0;j<L;++j){var J=G[j],fn={value:ze(J),primKey:T[k+j]};m.call(fn,fn.value,fn)!==!1&&(fn.value==null?N.push(T[k+j]):O||wn(l(J),l(fn.value))===0?(W.push(fn.value),O&&$.push(T[k+j])):(N.push(T[k+j]),z.push(fn.value)))}return Promise.resolve(0<z.length&&x.mutate({trans:a,type:"add",values:z}).then(function(vn){for(var gn in vn.failures)N.splice(parseInt(gn),1);A(z.length,vn)})).then(function(){return(0<W.length||B&&typeof t=="object")&&x.mutate({trans:a,type:"put",keys:$,values:W,criteria:B,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<k}).then(function(vn){return A(W.length,vn)})}).then(function(){return(0<N.length||B&&t===hi)&&x.mutate({trans:a,type:"delete",keys:N,criteria:B,isAdditionalChunk:0<k}).then(function(vn){return A(N.length,vn)})}).then(function(){return T.length>k+L&&R(k+y)})})}var B=Ve(u)&&u.limit===1/0&&(typeof t!="function"||t===hi)&&{index:u.index,range:u.range};return R(0).then(function(){if(0<_.length)throw new Ye("Error modifying one or more objects",_,E,P);return T.length})})})},_n.prototype.delete=function(){var t=this._ctx,i=t.range;return Ve(t)&&(t.isPrimKey||i.type===3)?this._write(function(u){var a=t.table.core.schema.primaryKey,c=i;return t.table.core.count({trans:u,query:{index:a,range:c}}).then(function(d){return t.table.core.mutate({trans:u,type:"deleteRange",range:c}).then(function(m){var x=m.failures;if(m.lastResult,m.results,m=m.numFailures,m)throw new Ye("Could not delete some values",Object.keys(x).map(function(O){return x[O]}),d-m);return d-m})})}):this.modify(hi)},_n);function _n(){}var hi=function(t,i){return i.value=null};function Mu(t,i){return t<i?-1:t===i?0:1}function Mo(t,i){return i<t?-1:t===i?0:1}function ae(t,i,u){return t=t instanceof Nu?new t.Collection(t):t,t._ctx.error=new(u||TypeError)(i),t}function Bt(t){return new t.Collection(t,function(){return qu("")}).limit(0)}function Tr(t,i,u,a){var c,d,m,x,O,l,y,h=u.length;if(!u.every(function(E){return typeof E=="string"}))return ae(t,Du);function A(E){c=E==="next"?function(T){return T.toUpperCase()}:function(T){return T.toLowerCase()},d=E==="next"?function(T){return T.toLowerCase()}:function(T){return T.toUpperCase()},m=E==="next"?Mu:Mo;var P=u.map(function(T){return{lower:d(T),upper:c(T)}}).sort(function(T,R){return m(T.lower,R.lower)});x=P.map(function(T){return T.upper}),O=P.map(function(T){return T.lower}),y=(l=E)==="next"?"":a}A("next"),t=new t.Collection(t,function(){return Je(x[0],O[h-1]+a)}),t._ondirectionchange=function(E){A(E)};var _=0;return t._addAlgorithm(function(E,P,T){var R=E.key;if(typeof R!="string")return!1;var B=d(R);if(i(B,O,_))return!0;for(var k=null,L=_;L<h;++L){var G=function(z,W,$,N,j,J){for(var fn=Math.min(z.length,N.length),vn=-1,gn=0;gn<fn;++gn){var pe=W[gn];if(pe!==N[gn])return j(z[gn],$[gn])<0?z.substr(0,gn)+$[gn]+$.substr(gn+1):j(z[gn],N[gn])<0?z.substr(0,gn)+N[gn]+$.substr(gn+1):0<=vn?z.substr(0,vn)+W[vn]+$.substr(vn+1):null;j(z[gn],pe)<0&&(vn=gn)}return fn<N.length&&J==="next"?z+$.substr(z.length):fn<z.length&&J==="prev"?z.substr(0,$.length):vn<0?null:z.substr(0,vn)+N[vn]+$.substr(vn+1)}(R,B,x[L],O[L],m,l);G===null&&k===null?_=L+1:(k===null||0<m(k,G))&&(k=G)}return P(k!==null?function(){E.continue(k+y)}:T),!1}),t}function Je(t,i,u,a){return{type:2,lower:t,upper:i,lowerOpen:u,upperOpen:a}}function qu(t){return{type:1,lower:t,upper:t}}var Nu=(Object.defineProperty(Yn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Yn.prototype.between=function(t,i,u,a){u=u!==!1,a=a===!0;try{return 0<this._cmp(t,i)||this._cmp(t,i)===0&&(u||a)&&(!u||!a)?Bt(this):new this.Collection(this,function(){return Je(t,i,!u,!a)})}catch{return ae(this,be)}},Yn.prototype.equals=function(t){return t==null?ae(this,be):new this.Collection(this,function(){return qu(t)})},Yn.prototype.above=function(t){return t==null?ae(this,be):new this.Collection(this,function(){return Je(t,void 0,!0)})},Yn.prototype.aboveOrEqual=function(t){return t==null?ae(this,be):new this.Collection(this,function(){return Je(t,void 0,!1)})},Yn.prototype.below=function(t){return t==null?ae(this,be):new this.Collection(this,function(){return Je(void 0,t,!1,!0)})},Yn.prototype.belowOrEqual=function(t){return t==null?ae(this,be):new this.Collection(this,function(){return Je(void 0,t)})},Yn.prototype.startsWith=function(t){return typeof t!="string"?ae(this,Du):this.between(t,t+kt,!0,!0)},Yn.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Tr(this,function(i,u){return i.indexOf(u[0])===0},[t],kt)},Yn.prototype.equalsIgnoreCase=function(t){return Tr(this,function(i,u){return i===u[0]},[t],"")},Yn.prototype.anyOfIgnoreCase=function(){var t=nn.apply(Y,arguments);return t.length===0?Bt(this):Tr(this,function(i,u){return u.indexOf(i)!==-1},t,"")},Yn.prototype.startsWithAnyOfIgnoreCase=function(){var t=nn.apply(Y,arguments);return t.length===0?Bt(this):Tr(this,function(i,u){return u.some(function(a){return i.indexOf(a)===0})},t,kt)},Yn.prototype.anyOf=function(){var t=this,i=nn.apply(Y,arguments),u=this._cmp;try{i.sort(u)}catch{return ae(this,be)}if(i.length===0)return Bt(this);var a=new this.Collection(this,function(){return Je(i[0],i[i.length-1])});a._ondirectionchange=function(d){u=d==="next"?t._ascending:t._descending,i.sort(u)};var c=0;return a._addAlgorithm(function(d,m,x){for(var O=d.key;0<u(O,i[c]);)if(++c===i.length)return m(x),!1;return u(O,i[c])===0||(m(function(){d.continue(i[c])}),!1)}),a},Yn.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Yn.prototype.noneOf=function(){var t=nn.apply(Y,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return ae(this,be)}var i=t.reduce(function(u,a){return u?u.concat([[u[u.length-1][1],a]]):[[-1/0,a]]},null);return i.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},Yn.prototype.inAnyRange=function(R,i){var u=this,a=this._cmp,c=this._ascending,d=this._descending,m=this._min,x=this._max;if(R.length===0)return Bt(this);if(!R.every(function(B){return B[0]!==void 0&&B[1]!==void 0&&c(B[0],B[1])<=0}))return ae(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",rn.InvalidArgument);var O=!i||i.includeLowers!==!1,l=i&&i.includeUppers===!0,y,h=c;function A(B,k){return h(B[0],k[0])}try{(y=R.reduce(function(B,k){for(var L=0,G=B.length;L<G;++L){var z=B[L];if(a(k[0],z[1])<0&&0<a(k[1],z[0])){z[0]=m(z[0],k[0]),z[1]=x(z[1],k[1]);break}}return L===G&&B.push(k),B},[])).sort(A)}catch{return ae(this,be)}var _=0,E=l?function(B){return 0<c(B,y[_][1])}:function(B){return 0<=c(B,y[_][1])},P=O?function(B){return 0<d(B,y[_][0])}:function(B){return 0<=d(B,y[_][0])},T=E,R=new this.Collection(this,function(){return Je(y[0][0],y[y.length-1][1],!O,!l)});return R._ondirectionchange=function(B){h=B==="next"?(T=E,c):(T=P,d),y.sort(A)},R._addAlgorithm(function(B,k,L){for(var G,z=B.key;T(z);)if(++_===y.length)return k(L),!1;return!E(G=z)&&!P(G)||(u._cmp(z,y[_][1])===0||u._cmp(z,y[_][0])===0||k(function(){h===c?B.continue(y[_][0]):B.continue(y[_][1])}),!1)}),R},Yn.prototype.startsWithAnyOf=function(){var t=nn.apply(Y,arguments);return t.every(function(i){return typeof i=="string"})?t.length===0?Bt(this):this.inAnyRange(t.map(function(i){return[i,i+kt]})):ae(this,"startsWithAnyOf() only works with strings")},Yn);function Yn(){}function Re(t){return Kn(function(i){return Er(i),t(i.target.error),!1})}function Er(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Ir="storagemutated",zi="x-storagemutated-1",vt=Ar(null,Ir),Yi=(Ne.prototype._lock=function(){return Ie(!en.global),++this._reculock,this._reculock!==1||en.global||(en.lockOwnerFor=this),this},Ne.prototype._unlock=function(){if(Ie(!en.global),--this._reculock==0)for(en.global||(en.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{Rt(t[1],t[0])}catch{}}return this},Ne.prototype._locked=function(){return this._reculock&&en.lockOwnerFor!==this},Ne.prototype.create=function(t){var i=this;if(!this.mode)return this;var u=this.db.idbdb,a=this.db._state.dbOpenError;if(Ie(!this.idbtrans),!t&&!u)switch(a&&a.name){case"DatabaseClosedError":throw new rn.DatabaseClosed(a);case"MissingAPIError":throw new rn.MissingAPI(a.message,a);default:throw new rn.OpenFailed(a)}if(!this.active)throw new rn.TransactionInactive;return Ie(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Kn(function(c){Er(c),i._reject(t.error)}),t.onabort=Kn(function(c){Er(c),i.active&&i._reject(new rn.Abort(t.error)),i.active=!1,i.on("abort").fire(c)}),t.oncomplete=Kn(function(){i.active=!1,i._resolve(),"mutatedParts"in t&&vt.storagemutated.fire(t.mutatedParts)}),this},Ne.prototype._promise=function(t,i,u){var a=this;if(t==="readwrite"&&this.mode!=="readwrite")return Ln(new rn.ReadOnly("Transaction is readonly"));if(!this.active)return Ln(new rn.TransactionInactive);if(this._locked())return new Z(function(d,m){a._blockedFuncs.push([function(){a._promise(t,i,u).then(d,m)},en])});if(u)return lt(function(){var d=new Z(function(m,x){a._lock();var O=i(m,x,a);O&&O.then&&O.then(m,x)});return d.finally(function(){return a._unlock()}),d._lib=!0,d});var c=new Z(function(d,m){var x=i(d,m,a);x&&x.then&&x.then(d,m)});return c._lib=!0,c},Ne.prototype._root=function(){return this.parent?this.parent._root():this},Ne.prototype.waitFor=function(t){var i,u=this._root(),a=Z.resolve(t);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return a}):(u._waitingFor=a,u._waitingQueue=[],i=u.idbtrans.objectStore(u.storeNames[0]),function d(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(i.get(-1/0).onsuccess=d)}());var c=u._waitingFor;return new Z(function(d,m){a.then(function(x){return u._waitingQueue.push(Kn(d.bind(null,x)))},function(x){return u._waitingQueue.push(Kn(m.bind(null,x)))}).finally(function(){u._waitingFor===c&&(u._waitingFor=null)})})},Ne.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new rn.Abort))},Ne.prototype.table=function(t){var i=this._memoizedTables||(this._memoizedTables={});if(sn(i,t))return i[t];var u=this.schema[t];if(!u)throw new rn.NotFound("Table "+t+" not part of transaction");return u=new this.db.Table(t,u,this),u.core=this.db.core.table(t),i[t]=u},Ne);function Ne(){}function ji(t,i,u,a,c,d,m){return{name:t,keyPath:i,unique:u,multi:a,auto:c,compound:d,src:(u&&!m?"&":"")+(a?"*":"")+(c?"++":"")+Uu(i)}}function Uu(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Xi(t,i,u){return{name:t,primKey:i,indexes:u,mappedClass:null,idxByName:(a=function(c){return[c.name,c]},u.reduce(function(c,d,m){return m=a(d,m),m&&(c[m[0]]=m[1]),c},{}))};var a}var Or=function(t){try{return t.only([[]]),Or=function(){return[[]]},[[]]}catch{return Or=function(){return kt},kt}};function Rn(t){return t==null?function(){}:typeof t=="string"?(i=t).split(".").length===1?function(u){return u[i]}:function(u){return ee(u,i)}:function(u){return ee(u,t)};var i}function kn(t){return[].slice.call(t)}var qo=0;function Pr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function No(t,i,O){function a(T){if(T.type===3)return null;if(T.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var _=T.lower,E=T.upper,P=T.lowerOpen,T=T.upperOpen;return _===void 0?E===void 0?null:i.upperBound(E,!!T):E===void 0?i.lowerBound(_,!!P):i.bound(_,E,!!P,!!T)}function c(A){var _,E=A.name;return{name:E,schema:A,mutate:function(P){var T=P.trans,R=P.type,B=P.keys,k=P.values,L=P.range;return new Promise(function(G,z){G=Kn(G);var W=T.objectStore(E),$=W.keyPath==null,N=R==="put"||R==="add";if(!N&&R!=="delete"&&R!=="deleteRange")throw new Error("Invalid operation type: "+R);var j,J=(B||k||{length:1}).length;if(B&&k&&B.length!==k.length)throw new Error("Given keys array must have same length as given values array.");if(J===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function fn(jn){++pe,Er(jn)}var vn=[],gn=[],pe=0;if(R==="deleteRange"){if(L.type===4)return G({numFailures:pe,failures:gn,results:[],lastResult:void 0});L.type===3?vn.push(j=W.clear()):vn.push(j=W.delete(a(L)))}else{var $=N?$?[k,B]:[k,null]:[B,null],cn=$[0],Mn=$[1];if(N)for(var $n=0;$n<J;++$n)vn.push(j=Mn&&Mn[$n]!==void 0?W[R](cn[$n],Mn[$n]):W[R](cn[$n])),j.onerror=fn;else for($n=0;$n<J;++$n)vn.push(j=W[R](cn[$n])),j.onerror=fn}function Nr(jn){jn=jn.target.result,vn.forEach(function(yt,Ai){return yt.error!=null&&(gn[Ai]=yt.error)}),G({numFailures:pe,failures:gn,results:R==="delete"?B:vn.map(function(yt){return yt.result}),lastResult:jn})}j.onerror=function(jn){fn(jn),Nr(jn)},j.onsuccess=Nr})},getMany:function(P){var T=P.trans,R=P.keys;return new Promise(function(B,k){B=Kn(B);for(var L,G=T.objectStore(E),z=R.length,W=new Array(z),$=0,N=0,j=function(vn){vn=vn.target,W[vn._pos]=vn.result,++N===$&&B(W)},J=Re(k),fn=0;fn<z;++fn)R[fn]!=null&&((L=G.get(R[fn]))._pos=fn,L.onsuccess=j,L.onerror=J,++$);$===0&&B(W)})},get:function(P){var T=P.trans,R=P.key;return new Promise(function(B,k){B=Kn(B);var L=T.objectStore(E).get(R);L.onsuccess=function(G){return B(G.target.result)},L.onerror=Re(k)})},query:(_=l,function(P){return new Promise(function(T,R){T=Kn(T);var B,k,L,$=P.trans,G=P.values,z=P.limit,j=P.query,W=z===1/0?void 0:z,N=j.index,j=j.range,$=$.objectStore(E),N=N.isPrimaryKey?$:$.index(N.name),j=a(j);if(z===0)return T({result:[]});_?((W=G?N.getAll(j,W):N.getAllKeys(j,W)).onsuccess=function(J){return T({result:J.target.result})},W.onerror=Re(R)):(B=0,k=!G&&"openKeyCursor"in N?N.openKeyCursor(j):N.openCursor(j),L=[],k.onsuccess=function(J){var fn=k.result;return fn?(L.push(G?fn.value:fn.primaryKey),++B===z?T({result:L}):void fn.continue()):T({result:L})},k.onerror=Re(R))})}),openCursor:function(P){var T=P.trans,R=P.values,B=P.query,k=P.reverse,L=P.unique;return new Promise(function(G,z){G=Kn(G);var N=B.index,W=B.range,$=T.objectStore(E),$=N.isPrimaryKey?$:$.index(N.name),N=k?L?"prevunique":"prev":L?"nextunique":"next",j=!R&&"openKeyCursor"in $?$.openKeyCursor(a(W),N):$.openCursor(a(W),N);j.onerror=Re(z),j.onsuccess=Kn(function(J){var fn,vn,gn,pe,cn=j.result;cn?(cn.___id=++qo,cn.done=!1,fn=cn.continue.bind(cn),vn=(vn=cn.continuePrimaryKey)&&vn.bind(cn),gn=cn.advance.bind(cn),pe=function(){throw new Error("Cursor not stopped")},cn.trans=T,cn.stop=cn.continue=cn.continuePrimaryKey=cn.advance=function(){throw new Error("Cursor not started")},cn.fail=Kn(z),cn.next=function(){var Mn=this,$n=1;return this.start(function(){return $n--?Mn.continue():Mn.stop()}).then(function(){return Mn})},cn.start=function(Mn){function $n(){if(j.result)try{Mn()}catch(jn){cn.fail(jn)}else cn.done=!0,cn.start=function(){throw new Error("Cursor behind last entry")},cn.stop()}var Nr=new Promise(function(jn,yt){jn=Kn(jn),j.onerror=Re(yt),cn.fail=yt,cn.stop=function(Ai){cn.stop=cn.continue=cn.continuePrimaryKey=cn.advance=pe,jn(Ai)}});return j.onsuccess=Kn(function(jn){j.onsuccess=$n,$n()}),cn.continue=fn,cn.continuePrimaryKey=vn,cn.advance=gn,$n(),Nr},G(cn)):G(null)},z)})},count:function(P){var T=P.query,R=P.trans,B=T.index,k=T.range;return new Promise(function(L,G){var z=R.objectStore(E),W=B.isPrimaryKey?z:z.index(B.name),z=a(k),W=z?W.count(z):W.count();W.onsuccess=Kn(function($){return L($.target.result)}),W.onerror=Re(G)})}}}var d,m,x,y=(m=O,x=kn((d=t).objectStoreNames),{schema:{name:d.name,tables:x.map(function(A){return m.objectStore(A)}).map(function(A){var _=A.keyPath,T=A.autoIncrement,E=H(_),P={},T={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_==null,compound:E,keyPath:_,autoIncrement:T,unique:!0,extractKey:Rn(_)},indexes:kn(A.indexNames).map(function(R){return A.index(R)}).map(function(L){var B=L.name,k=L.unique,G=L.multiEntry,L=L.keyPath,G={name:B,compound:H(L),keyPath:L,unique:k,multiEntry:G,extractKey:Rn(L)};return P[Pr(L)]=G}),getIndexByKeyPath:function(R){return P[Pr(R)]}};return P[":id"]=T.primaryKey,_!=null&&(P[Pr(_)]=T.primaryKey),T})},hasGetAll:0<x.length&&"getAll"in m.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),O=y.schema,l=y.hasGetAll,y=O.tables.map(c),h={};return y.forEach(function(A){return h[A.name]=A}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(A){if(!h[A])throw new Error("Table '".concat(A,"' not found"));return h[A]},MIN_KEY:-1/0,MAX_KEY:Or(i),schema:O}}function Uo(t,i,u,a){var c=u.IDBKeyRange;return u.indexedDB,{dbcore:(a=No(i,c,a),t.dbcore.reduce(function(d,m){return m=m.create,S(S({},d),m(d))},a))}}function di(t,a){var u=a.db,a=Uo(t._middlewares,u,t._deps,a);t.core=a.dbcore,t.tables.forEach(function(c){var d=c.name;t.core.schema.tables.some(function(m){return m.name===d})&&(c.core=t.core.table(d),t[d]instanceof t.Table&&(t[d].core=c.core))})}function pi(t,i,u,a){u.forEach(function(c){var d=a[c];i.forEach(function(m){var x=function O(l,y){return Xn(l,y)||(l=V(l))&&O(l,y)}(m,c);(!x||"value"in x&&x.value===void 0)&&(m===t.Transaction.prototype||m instanceof t.Transaction?On(m,c,{get:function(){return this.table(c)},set:function(O){pn(this,c,{value:O,writable:!0,configurable:!0,enumerable:!0})}}):m[c]=new t.Table(c,d))})})}function vi(t,i){i.forEach(function(u){for(var a in u)u[a]instanceof t.Table&&delete u[a]})}function Wo(t,i){return t._cfg.version-i._cfg.version}function Qn(t,i,u,a){var c=t._dbSchema;u.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=Xi("$meta",Qi("")[0],[]),t._storeNames.push("$meta"));var d=t._createTransaction("readwrite",t._storeNames,c);d.create(u),d._completion.catch(a);var m=d._reject.bind(d),x=en.transless||en;lt(function(){return en.trans=d,en.transless=x,i!==0?(di(t,u),l=i,((O=d).storeNames.includes("$meta")?O.table("$meta").get("version").then(function(y){return y??l}):Z.resolve(l)).then(function(y){return A=y,_=d,E=u,P=[],y=(h=t)._versions,T=h._dbSchema=Cr(0,h.idbdb,E),(y=y.filter(function(R){return R._cfg.version>=A})).length!==0?(y.forEach(function(R){P.push(function(){var B=T,k=R._cfg.dbschema;Rr(h,B,E),Rr(h,k,E),T=h._dbSchema=k;var L=nt(B,k);L.add.forEach(function(N){gi(E,N[0],N[1].primKey,N[1].indexes)}),L.change.forEach(function(N){if(N.recreate)throw new rn.Upgrade("Not yet support for changing primary key");var j=E.objectStore(N.name);N.add.forEach(function(J){return re(j,J)}),N.change.forEach(function(J){j.deleteIndex(J.name),re(j,J)}),N.del.forEach(function(J){return j.deleteIndex(J)})});var G=R._cfg.contentUpgrade;if(G&&R._cfg.version>A){di(h,E),_._memoizedTables={};var z=st(k);L.del.forEach(function(N){z[N]=B[N]}),vi(h,[h.Transaction.prototype]),pi(h,[h.Transaction.prototype],q(z),z),_.schema=z;var W,$=mn(G);return $&&Jt(),L=Z.follow(function(){var N;(W=G(_))&&$&&(N=ht.bind(null,null),W.then(N,N))}),W&&typeof W.then=="function"?Z.resolve(W):L.then(function(){return W})}}),P.push(function(B){var k,L,G=R._cfg.dbschema;k=G,L=B,[].slice.call(L.db.objectStoreNames).forEach(function(z){return k[z]==null&&L.db.deleteObjectStore(z)}),vi(h,[h.Transaction.prototype]),pi(h,[h.Transaction.prototype],h._storeNames,h._dbSchema),_.schema=h._dbSchema}),P.push(function(B){h.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(h.idbdb.version/10)===R._cfg.version?(h.idbdb.deleteObjectStore("$meta"),delete h._dbSchema.$meta,h._storeNames=h._storeNames.filter(function(k){return k!=="$meta"})):B.objectStore("$meta").put(R._cfg.version,"version"))})}),function R(){return P.length?Z.resolve(P.shift()(_.idbtrans)).then(R):Z.resolve()}().then(function(){yi(T,E)})):Z.resolve();var h,A,_,E,P,T}).catch(m)):(q(c).forEach(function(y){gi(u,y,c[y].primKey,c[y].indexes)}),di(t,u),void Z.follow(function(){return t.on.populate.fire(d)}).catch(m));var O,l})}function Zi(t,i){yi(t._dbSchema,i),i.db.version%10!=0||i.objectStoreNames.contains("$meta")||i.db.createObjectStore("$meta").add(Math.ceil(i.db.version/10-1),"version");var u=Cr(0,t.idbdb,i);Rr(t,t._dbSchema,i);for(var a=0,c=nt(u,t._dbSchema).change;a<c.length;a++){var d=function(m){if(m.change.length||m.recreate)return console.warn("Unable to patch indexes of table ".concat(m.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=i.objectStore(m.name);m.add.forEach(function(O){Un&&console.debug("Dexie upgrade patch: Creating missing index ".concat(m.name,".").concat(O.src)),re(x,O)})}(c[a]);if(typeof d=="object")return d.value}}function nt(t,i){var u,a={del:[],add:[],change:[]};for(u in t)i[u]||a.del.push(u);for(u in i){var c=t[u],d=i[u];if(c){var m={name:u,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||c.primKey.auto!==d.primKey.auto)m.recreate=!0,a.change.push(m);else{var x=c.idxByName,O=d.idxByName,l=void 0;for(l in x)O[l]||m.del.push(l);for(l in O){var y=x[l],h=O[l];y?y.src!==h.src&&m.change.push(h):m.add.push(h)}(0<m.del.length||0<m.add.length||0<m.change.length)&&a.change.push(m)}}else a.add.push([u,d])}return a}function gi(t,i,u,a){var c=t.db.createObjectStore(i,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return a.forEach(function(d){return re(c,d)}),c}function yi(t,i){q(t).forEach(function(u){i.db.objectStoreNames.contains(u)||(Un&&console.debug("Dexie: Creating missing table",u),gi(i,u,t[u].primKey,t[u].indexes))})}function re(t,i){t.createIndex(i.name,i.keyPath,{unique:i.unique,multiEntry:i.multi})}function Cr(t,i,u){var a={};return At(i.objectStoreNames,0).forEach(function(c){for(var d=u.objectStore(c),m=ji(Uu(l=d.keyPath),l||"",!0,!1,!!d.autoIncrement,l&&typeof l!="string",!0),x=[],O=0;O<d.indexNames.length;++O){var y=d.index(d.indexNames[O]),l=y.keyPath,y=ji(y.name,l,!!y.unique,!!y.multiEntry,!1,l&&typeof l!="string",!1);x.push(y)}a[c]=Xi(c,m,x)}),a}function Rr(t,i,u){for(var a=u.db.objectStoreNames,c=0;c<a.length;++c){var d=a[c],m=u.objectStore(d);t._hasGetAll="getAll"in m;for(var x=0;x<m.indexNames.length;++x){var O=m.indexNames[x],l=m.index(O).keyPath,y=typeof l=="string"?l:"["+At(l).join("+")+"]";!i[d]||(l=i[d].idxByName[y])&&(l.name=O,delete i[d].idxByName[y],i[d].idxByName[O]=l)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&D.WorkerGlobalScope&&D instanceof D.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Qi(t){return t.split(",").map(function(i,u){var a=(i=i.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return ji(a,c||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),H(c),u===0)})}var Wu=(kr.prototype._parseStoresSpec=function(t,i){q(t).forEach(function(u){if(t[u]!==null){var a=Qi(t[u]),c=a.shift();if(c.unique=!0,c.multi)throw new rn.Schema("Primary key cannot be multi-valued");a.forEach(function(d){if(d.auto)throw new rn.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new rn.Schema("Index must have a name and cannot be an empty string")}),i[u]=Xi(u,c,a)}})},kr.prototype.stores=function(u){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?X(this._cfg.storesSource,u):u;var u=i._versions,a={},c={};return u.forEach(function(d){X(a,d._cfg.storesSource),c=d._cfg.dbschema={},d._parseStoresSpec(a,c)}),i._dbSchema=c,vi(i,[i._allTables,i,i.Transaction.prototype]),pi(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],q(c),c),i._storeNames=q(c),this},kr.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Et(this._cfg.contentUpgrade||Tn,t),this},kr);function kr(){}function mi(t,i){var u=t._dbNamesDB;return u||(u=t._dbNamesDB=new rt(oi,{addons:[],indexedDB:t,IDBKeyRange:i})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function ie(t){return t&&typeof t.databases=="function"}function Vi(t){return lt(function(){return en.letThrough=!0,t()})}function se(t){return!("from"in t)}var Jn=function(t,i){if(!this){var u=new Jn;return t&&"d"in t&&X(u,t),u}X(this,arguments.length?{d:1,from:t,to:1<arguments.length?i:t}:{d:0})};function ir(t,i,u){var a=wn(i,u);if(!isNaN(a)){if(0<a)throw RangeError();if(se(t))return X(t,{from:i,to:u,d:1});var c=t.l,a=t.r;if(wn(u,t.from)<0)return c?ir(c,i,u):t.l={from:i,to:u,d:1,l:null,r:null},Bn(t);if(0<wn(i,t.to))return a?ir(a,i,u):t.r={from:i,to:u,d:1,l:null,r:null},Bn(t);wn(i,t.from)<0&&(t.from=i,t.l=null,t.d=a?a.d+1:1),0<wn(u,t.to)&&(t.to=u,t.r=null,t.d=t.l?t.l.d+1:1),u=!t.r,c&&!t.l&&we(t,c),a&&u&&we(t,a)}}function we(t,i){se(i)||function u(a,O){var d=O.from,m=O.to,x=O.l,O=O.r;ir(a,d,m),x&&u(a,x),O&&u(a,O)}(t,i)}function Br(t,i){var u=ur(i),a=u.next();if(a.done)return!1;for(var c=a.value,d=ur(t),m=d.next(c.from),x=m.value;!a.done&&!m.done;){if(wn(x.from,c.to)<=0&&0<=wn(x.to,c.from))return!0;wn(c.from,x.from)<0?c=(a=u.next(x.from)).value:x=(m=d.next(c.from)).value}return!1}function ur(t){var i=se(t)?null:{s:0,n:t};return{next:function(u){for(var a=0<arguments.length;i;)switch(i.s){case 0:if(i.s=1,a)for(;i.n.l&&wn(u,i.n.from)<0;)i={up:i,n:i.n.l,s:1};else for(;i.n.l;)i={up:i,n:i.n.l,s:1};case 1:if(i.s=2,!a||wn(u,i.n.to)<=0)return{value:i.n,done:!1};case 2:if(i.n.r){i.s=3,i={up:i,n:i.n.r,s:0};continue}case 3:i=i.up}return{done:!0}}}}function Bn(t){var i,u,a=(((i=t.r)===null||i===void 0?void 0:i.d)||0)-(((u=t.l)===null||u===void 0?void 0:u.d)||0),c=1<a?"r":a<-1?"l":"";c&&(i=c=="r"?"l":"r",u=S({},t),a=t[c],t.from=a.from,t.to=a.to,t[c]=a[c],u[c]=a[i],(t[i]=u).d=et(u)),t.d=et(t)}function et(u){var i=u.r,u=u.l;return(i?u?Math.max(i.d,u.d):i.d:u?u.d:0)+1}function or(t,i){return q(i).forEach(function(u){t[u]?we(t[u],i[u]):t[u]=function a(c){var d,m,x={};for(d in c)sn(c,d)&&(m=c[d],x[d]=!m||typeof m!="object"||Jr.has(m.constructor)?m:a(m));return x}(i[u])}),t}function Ji(t,i){return t.all||i.all||Object.keys(t).some(function(u){return i[u]&&Br(i[u],t[u])})}Dn(Jn.prototype,((xe={add:function(t){return we(this,t),this},addKey:function(t){return ir(this,t,t),this},addKeys:function(t){var i=this;return t.forEach(function(u){return ir(i,u,u)}),this},hasKey:function(t){var i=ur(this).next(t).value;return i&&wn(i.from,t)<=0&&0<=wn(i.to,t)}})[Zn]=function(){return ur(this)},xe));var tt={},nu={},eu=!1;function _i(t){or(nu,t),eu||(eu=!0,setTimeout(function(){eu=!1,bi(nu,!(nu={}))},0))}function bi(t,i){i===void 0&&(i=!1);var u=new Set;if(t.all)for(var a=0,c=Object.values(tt);a<c.length;a++)Dr(m=c[a],t,u,i);else for(var d in t){var m,x=/^idb\:\/\/(.*)\/(.*)\//.exec(d);x&&(d=x[1],x=x[2],(m=tt["idb://".concat(d,"/").concat(x)])&&Dr(m,t,u,i))}u.forEach(function(O){return O()})}function Dr(t,i,u,a){for(var c=[],d=0,m=Object.entries(t.queries.query);d<m.length;d++){for(var x=m[d],O=x[0],l=[],y=0,h=x[1];y<h.length;y++){var A=h[y];Ji(i,A.obsSet)?A.subscribers.forEach(function(T){return u.add(T)}):a&&l.push(A)}a&&c.push([O,l])}if(a)for(var _=0,E=c;_<E.length;_++){var P=E[_],O=P[0],l=P[1];t.queries.query[O]=l}}function ar(t){var i=t._state,u=t._deps.indexedDB;if(i.isBeingOpened||t.idbdb)return i.dbReadyPromise.then(function(){return i.dbOpenError?Ln(i.dbOpenError):t});i.isBeingOpened=!0,i.dbOpenError=null,i.openComplete=!1;var a=i.openCanceller,c=Math.round(10*t.verno),d=!1;function m(){if(i.openCanceller!==a)throw new rn.DatabaseClosed("db.open() was cancelled")}function x(){return new Z(function(A,_){if(m(),!u)throw new rn.MissingAPI;var E=t.name,P=i.autoSchema||!c?u.open(E):u.open(E,c);if(!P)throw new rn.MissingAPI;P.onerror=Re(_),P.onblocked=Kn(t._fireOnBlocked),P.onupgradeneeded=Kn(function(T){var R;y=P.transaction,i.autoSchema&&!t._options.allowEmptyDB?(P.onerror=Er,y.abort(),P.result.close(),(R=u.deleteDatabase(E)).onsuccess=R.onerror=Kn(function(){_(new rn.NoSuchDatabase("Database ".concat(E," doesnt exist")))})):(y.onerror=Re(_),T=T.oldVersion>Math.pow(2,62)?0:T.oldVersion,h=T<1,t.idbdb=P.result,d&&Zi(t,y),Qn(t,T/10,y,_))},_),P.onsuccess=Kn(function(){y=null;var T,R,B,k,L,G=t.idbdb=P.result,z=At(G.objectStoreNames);if(0<z.length)try{var W=G.transaction((k=z).length===1?k[0]:k,"readonly");if(i.autoSchema)R=G,B=W,(T=t).verno=R.version/10,B=T._dbSchema=Cr(0,R,B),T._storeNames=At(R.objectStoreNames,0),pi(T,[T._allTables],q(B),B);else if(Rr(t,t._dbSchema,W),((L=nt(Cr(0,(L=t).idbdb,W),L._dbSchema)).add.length||L.change.some(function($){return $.add.length||$.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),c=G.version+1,d=!0,A(x());di(t,W)}catch{}nr.push(t),G.onversionchange=Kn(function($){i.vcFired=!0,t.on("versionchange").fire($)}),G.onclose=Kn(function($){t.on("close").fire($)}),h&&(L=t._deps,W=E,G=L.indexedDB,L=L.IDBKeyRange,ie(G)||W===oi||mi(G,L).put({name:W}).catch(Tn)),A()},_)}).catch(function(A){switch(A==null?void 0:A.name){case"UnknownError":if(0<i.PR1398_maxLoop)return i.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(0<c)return c=0,x()}return Z.reject(A)})}var O,l=i.dbReadyResolve,y=null,h=!1;return Z.race([a,(typeof navigator>"u"?Z.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(A){function _(){return indexedDB.databases().finally(A)}O=setInterval(_,100),_()}).finally(function(){return clearInterval(O)}):Promise.resolve()).then(x)]).then(function(){return m(),i.onReadyBeingFired=[],Z.resolve(Vi(function(){return t.on.ready.fire(t.vip)})).then(function A(){if(0<i.onReadyBeingFired.length){var _=i.onReadyBeingFired.reduce(Et,Tn);return i.onReadyBeingFired=[],Z.resolve(Vi(function(){return _(t.vip)})).then(A)}})}).finally(function(){i.openCanceller===a&&(i.onReadyBeingFired=null,i.isBeingOpened=!1)}).catch(function(A){i.dbOpenError=A;try{y&&y.abort()}catch{}return a===i.openCanceller&&t._close(),Ln(A)}).finally(function(){i.openComplete=!0,l()}).then(function(){var A;return h&&(A={},t.tables.forEach(function(_){_.schema.indexes.forEach(function(E){E.name&&(A["idb://".concat(t.name,"/").concat(_.name,"/").concat(E.name)]=new Jn(-1/0,[[[]]]))}),A["idb://".concat(t.name,"/").concat(_.name,"/")]=A["idb://".concat(t.name,"/").concat(_.name,"/:dels")]=new Jn(-1/0,[[[]]])}),vt(Ir).fire(A),bi(A,!0)),t})}function tu(t){function i(d){return t.next(d)}var u=c(i),a=c(function(d){return t.throw(d)});function c(d){return function(O){var x=d(O),O=x.value;return x.done?O:O&&typeof O.then=="function"?O.then(u,a):H(O)?Promise.all(O).then(u,a):u(O)}}return c(i)()}function Kr(t,i,u){for(var a=H(t)?t.slice():[t],c=0;c<u;++c)a.push(i);return a}var Gu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return S(S({},t),{table:function(i){var u=t.table(i),a=u.schema,c={},d=[];function m(h,A,_){var E=Pr(h),P=c[E]=c[E]||[],T=h==null?0:typeof h=="string"?1:h.length,R=0<A,R=S(S({},_),{name:R?"".concat(E,"(virtual-from:").concat(_.name,")"):_.name,lowLevelIndex:_,isVirtual:R,keyTail:A,keyLength:T,extractKey:Rn(h),unique:!R&&_.unique});return P.push(R),R.isPrimaryKey||d.push(R),1<T&&m(T===2?h[0]:h.slice(0,T-1),A+1,_),P.sort(function(B,k){return B.keyTail-k.keyTail}),R}i=m(a.primaryKey.keyPath,0,a.primaryKey),c[":id"]=[i];for(var x=0,O=a.indexes;x<O.length;x++){var l=O[x];m(l.keyPath,0,l)}function y(h){var A,_=h.query.index;return _.isVirtual?S(S({},h),{query:{index:_.lowLevelIndex,range:(A=h.query.range,_=_.keyTail,{type:A.type===1?2:A.type,lower:Kr(A.lower,A.lowerOpen?t.MAX_KEY:t.MIN_KEY,_),lowerOpen:!0,upper:Kr(A.upper,A.upperOpen?t.MIN_KEY:t.MAX_KEY,_),upperOpen:!0})}}):h}return S(S({},u),{schema:S(S({},a),{primaryKey:i,indexes:d,getIndexByKeyPath:function(h){return(h=c[Pr(h)])&&h[0]}}),count:function(h){return u.count(y(h))},query:function(h){return u.query(y(h))},openCursor:function(h){var A=h.query.index,_=A.keyTail,E=A.isVirtual,P=A.keyLength;return E?u.openCursor(y(h)).then(function(R){return R&&T(R)}):u.openCursor(h);function T(R){return Object.create(R,{continue:{value:function(B){B!=null?R.continue(Kr(B,h.reverse?t.MAX_KEY:t.MIN_KEY,_)):h.unique?R.continue(R.key.slice(0,P).concat(h.reverse?t.MIN_KEY:t.MAX_KEY,_)):R.continue()}},continuePrimaryKey:{value:function(B,k){R.continuePrimaryKey(Kr(B,t.MAX_KEY,_),k)}},primaryKey:{get:function(){return R.primaryKey}},key:{get:function(){var B=R.key;return P===1?B[0]:B.slice(0,P)}},value:{get:function(){return R.value}}})}}})}})}};function Lr(t,i,u,a){return u=u||{},a=a||"",q(t).forEach(function(c){var d,m,x;sn(i,c)?(d=t[c],m=i[c],typeof d=="object"&&typeof m=="object"&&d&&m?(x=_e(d))!==_e(m)?u[a+c]=i[c]:x==="Object"?Lr(d,m,u,a+c+"."):d!==m&&(u[a+c]=i[c]):d!==m&&(u[a+c]=i[c])):u[a+c]=void 0}),q(i).forEach(function(c){sn(t,c)||(u[a+c]=i[c])}),u}function Fr(t,i){return i.type==="delete"?i.keys:i.keys||i.values.map(t.extractKey)}var $u={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return S(S({},t),{table:function(i){var u=t.table(i),a=u.schema.primaryKey;return S(S({},u),{mutate:function(c){var d=en.trans,m=d.table(i).hook,x=m.deleting,O=m.creating,l=m.updating;switch(c.type){case"add":if(O.fire===Tn)break;return d._promise("readwrite",function(){return y(c)},!0);case"put":if(O.fire===Tn&&l.fire===Tn)break;return d._promise("readwrite",function(){return y(c)},!0);case"delete":if(x.fire===Tn)break;return d._promise("readwrite",function(){return y(c)},!0);case"deleteRange":if(x.fire===Tn)break;return d._promise("readwrite",function(){return function h(A,_,E){return u.query({trans:A,values:!1,query:{index:a,range:_},limit:E}).then(function(P){var T=P.result;return y({type:"delete",keys:T,trans:A}).then(function(R){return 0<R.numFailures?Promise.reject(R.failures[0]):T.length<E?{failures:[],numFailures:0,lastResult:void 0}:h(A,S(S({},_),{lower:T[T.length-1],lowerOpen:!0}),E)})})}(c.trans,c.range,1e4)},!0)}return u.mutate(c);function y(h){var A,_,E,P=en.trans,T=h.keys||Fr(a,h);if(!T)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?S(S({},h),{keys:T}):S({},h)).type!=="delete"&&(h.values=K([],h.values)),h.keys&&(h.keys=K([],h.keys)),A=u,E=T,((_=h).type==="add"?Promise.resolve([]):A.getMany({trans:_.trans,keys:E,cache:"immutable"})).then(function(R){var B=T.map(function(k,L){var G,z,W,$=R[L],N={onerror:null,onsuccess:null};return h.type==="delete"?x.fire.call(N,k,$,P):h.type==="add"||$===void 0?(G=O.fire.call(N,k,h.values[L],P),k==null&&G!=null&&(h.keys[L]=k=G,a.outbound||Fn(h.values[L],a.keyPath,k))):(G=Lr($,h.values[L]),(z=l.fire.call(N,G,k,$,P))&&(W=h.values[L],Object.keys(z).forEach(function(j){sn(W,j)?W[j]=z[j]:Fn(W,j,z[j])}))),N});return u.mutate(h).then(function(k){for(var L=k.failures,G=k.results,z=k.numFailures,k=k.lastResult,W=0;W<T.length;++W){var $=(G||T)[W],N=B[W];$==null?N.onerror&&N.onerror(L[W]):N.onsuccess&&N.onsuccess(h.type==="put"&&R[W]?h.values[W]:$)}return{failures:L,results:G,numFailures:z,lastResult:k}}).catch(function(k){return B.forEach(function(L){return L.onerror&&L.onerror(k)}),Promise.reject(k)})})}}})}})}};function Hu(t,i,u){try{if(!i||i.keys.length<t.length)return null;for(var a=[],c=0,d=0;c<i.keys.length&&d<t.length;++c)wn(i.keys[c],t[d])===0&&(a.push(u?ze(i.values[c]):i.values[c]),++d);return a.length===t.length?a:null}catch{return null}}var ru={stack:"dbcore",level:-1,create:function(t){return{table:function(i){var u=t.table(i);return S(S({},u),{getMany:function(a){if(!a.cache)return u.getMany(a);var c=Hu(a.keys,a.trans._cache,a.cache==="clone");return c?Z.resolve(c):u.getMany(a).then(function(d){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?ze(d):d},d})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),u.mutate(a)}})}}}};function wi(t,i){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!i.schema.primaryKey.outbound}function zu(t,i){switch(t){case"query":return i.values&&!i.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Yu={stack:"dbcore",level:0,name:"Observability",create:function(t){var i=t.schema.name,u=new Jn(t.MIN_KEY,t.MAX_KEY);return S(S({},t),{transaction:function(a,c,d){if(en.subscr&&c!=="readonly")throw new rn.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(en.querier));return t.transaction(a,c,d)},table:function(a){var c=t.table(a),d=c.schema,m=d.primaryKey,h=d.indexes,x=m.extractKey,O=m.outbound,l=m.autoIncrement&&h.filter(function(_){return _.compound&&_.keyPath.includes(m.keyPath)}),y=S(S({},c),{mutate:function(_){function E(j){return j="idb://".concat(i,"/").concat(a,"/").concat(j),k[j]||(k[j]=new Jn)}var P,T,R,B=_.trans,k=_.mutatedParts||(_.mutatedParts={}),L=E(""),G=E(":dels"),z=_.type,N=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[Fr(m,_).filter(function(j){return j}),_.values]:[],W=N[0],$=N[1],N=_.trans._cache;return H(W)?(L.addKeys(W),(N=z==="delete"||W.length===$.length?Hu(W,N):null)||G.addKeys(W),(N||$)&&(P=E,T=N,R=$,d.indexes.forEach(function(j){var J=P(j.name||"");function fn(gn){return gn!=null?j.extractKey(gn):null}function vn(gn){return j.multiEntry&&H(gn)?gn.forEach(function(pe){return J.addKey(pe)}):J.addKey(gn)}(T||R).forEach(function(gn,Mn){var cn=T&&fn(T[Mn]),Mn=R&&fn(R[Mn]);wn(cn,Mn)!==0&&(cn!=null&&vn(cn),Mn!=null&&vn(Mn))})}))):W?($={from:($=W.lower)!==null&&$!==void 0?$:t.MIN_KEY,to:($=W.upper)!==null&&$!==void 0?$:t.MAX_KEY},G.add($),L.add($)):(L.add(u),G.add(u),d.indexes.forEach(function(j){return E(j.name).add(u)})),c.mutate(_).then(function(j){return!W||_.type!=="add"&&_.type!=="put"||(L.addKeys(j.results),l&&l.forEach(function(J){for(var fn=_.values.map(function(cn){return J.extractKey(cn)}),vn=J.keyPath.findIndex(function(cn){return cn===m.keyPath}),gn=0,pe=j.results.length;gn<pe;++gn)fn[gn][vn]=j.results[gn];E(J.name).addKeys(fn)})),B.mutatedParts=or(B.mutatedParts||{},k),j})}}),h=function(E){var P=E.query,E=P.index,P=P.range;return[E,new Jn((E=P.lower)!==null&&E!==void 0?E:t.MIN_KEY,(P=P.upper)!==null&&P!==void 0?P:t.MAX_KEY)]},A={get:function(_){return[m,new Jn(_.key)]},getMany:function(_){return[m,new Jn().addKeys(_.keys)]},count:h,query:h,openCursor:h};return q(A).forEach(function(_){y[_]=function(E){var P=en.subscr,T=!!P,R=wi(en,c)&&zu(_,E)?E.obsSet={}:P;if(T){var B=function($){return $="idb://".concat(i,"/").concat(a,"/").concat($),R[$]||(R[$]=new Jn)},k=B(""),L=B(":dels"),P=A[_](E),T=P[0],P=P[1];if((_==="query"&&T.isPrimaryKey&&!E.values?L:B(T.name||"")).add(P),!T.isPrimaryKey){if(_!=="count"){var G=_==="query"&&O&&E.values&&c.query(S(S({},E),{values:!1}));return c[_].apply(this,arguments).then(function($){if(_==="query"){if(O&&E.values)return G.then(function(fn){return fn=fn.result,k.addKeys(fn),$});var N=E.values?$.result.map(x):$.result;(E.values?k:L).addKeys(N)}else if(_==="openCursor"){var j=$,J=E.values;return j&&Object.create(j,{key:{get:function(){return L.addKey(j.primaryKey),j.key}},primaryKey:{get:function(){var fn=j.primaryKey;return L.addKey(fn),fn}},value:{get:function(){return J&&k.addKey(j.primaryKey),j.value}}})}return $})}L.add(u)}}return c[_].apply(this,arguments)}}),y}})}};function ce(t,i,u){if(u.numFailures===0)return i;if(i.type==="deleteRange")return null;var a=i.keys?i.keys.length:"values"in i&&i.values?i.values.length:1;return u.numFailures===a?null:(i=S({},i),H(i.keys)&&(i.keys=i.keys.filter(function(c,d){return!(d in u.failures)})),"values"in i&&H(i.values)&&(i.values=i.values.filter(function(c,d){return!(d in u.failures)})),i)}function Mr(t,i){return u=t,((a=i).lower===void 0||(a.lowerOpen?0<wn(u,a.lower):0<=wn(u,a.lower)))&&(t=t,(i=i).upper===void 0||(i.upperOpen?wn(t,i.upper)<0:wn(t,i.upper)<=0));var u,a}function sr(t,i,A,a,c,d){if(!A||A.length===0)return t;var m=i.query.index,x=m.multiEntry,O=i.query.range,l=a.schema.primaryKey.extractKey,y=m.extractKey,h=(m.lowLevelIndex||m).extractKey,A=A.reduce(function(_,E){var P=_,T=[];if(E.type==="add"||E.type==="put")for(var R=new Jn,B=E.values.length-1;0<=B;--B){var k,L=E.values[B],G=l(L);R.hasKey(G)||(k=y(L),(x&&H(k)?k.some(function(j){return Mr(j,O)}):Mr(k,O))&&(R.addKey(G),T.push(L)))}switch(E.type){case"add":var z=new Jn().addKeys(i.values?_.map(function(J){return l(J)}):_),P=_.concat(i.values?T.filter(function(J){return J=l(J),!z.hasKey(J)&&(z.addKey(J),!0)}):T.map(function(J){return l(J)}).filter(function(J){return!z.hasKey(J)&&(z.addKey(J),!0)}));break;case"put":var W=new Jn().addKeys(E.values.map(function(J){return l(J)}));P=_.filter(function(J){return!W.hasKey(i.values?l(J):J)}).concat(i.values?T:T.map(function(J){return l(J)}));break;case"delete":var $=new Jn().addKeys(E.keys);P=_.filter(function(J){return!$.hasKey(i.values?l(J):J)});break;case"deleteRange":var N=E.range;P=_.filter(function(J){return!Mr(l(J),N)})}return P},t);return A===t?t:(A.sort(function(_,E){return wn(h(_),h(E))||wn(l(_),l(E))}),i.limit&&i.limit<1/0&&(A.length>i.limit?A.length=i.limit:t.length===i.limit&&A.length<i.limit&&(c.dirty=!0)),d?Object.freeze(A):A)}function iu(t,i){return wn(t.lower,i.lower)===0&&wn(t.upper,i.upper)===0&&!!t.lowerOpen==!!i.lowerOpen&&!!t.upperOpen==!!i.upperOpen}function ju(t,i){return function(u,a,c,d){if(u===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=wn(u,a))===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return a}(t.lower,i.lower,t.lowerOpen,i.lowerOpen)<=0&&0<=function(u,a,c,d){if(u===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=wn(u,a))===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return a}(t.upper,i.upper,t.upperOpen,i.upperOpen)}function Go(t,i,u,a){t.subscribers.add(u),a.addEventListener("abort",function(){var c,d;t.subscribers.delete(u),t.subscribers.size===0&&(c=t,d=i,setTimeout(function(){c.subscribers.size===0&&te(d,c)},3e3))})}var $o={stack:"dbcore",level:0,name:"Cache",create:function(t){var i=t.schema.name;return S(S({},t),{transaction:function(u,a,c){var d,m,x=t.transaction(u,a,c);return a==="readwrite"&&(m=(d=new AbortController).signal,c=function(O){return function(){if(d.abort(),a==="readwrite"){for(var l=new Set,y=0,h=u;y<h.length;y++){var A=h[y],_=tt["idb://".concat(i,"/").concat(A)];if(_){var E=t.table(A),P=_.optimisticOps.filter(function(J){return J.trans===x});if(x._explicit&&O&&x.mutatedParts)for(var T=0,R=Object.values(_.queries.query);T<R.length;T++)for(var B=0,k=(z=R[T]).slice();B<k.length;B++)Ji((W=k[B]).obsSet,x.mutatedParts)&&(te(z,W),W.subscribers.forEach(function(J){return l.add(J)}));else if(0<P.length){_.optimisticOps=_.optimisticOps.filter(function(J){return J.trans!==x});for(var L=0,G=Object.values(_.queries.query);L<G.length;L++)for(var z,W,$,N=0,j=(z=G[L]).slice();N<j.length;N++)(W=j[N]).res!=null&&x.mutatedParts&&(O&&!W.dirty?($=Object.isFrozen(W.res),$=sr(W.res,W.req,P,E,W,$),W.dirty?(te(z,W),W.subscribers.forEach(function(J){return l.add(J)})):$!==W.res&&(W.res=$,W.promise=Z.resolve({result:$}))):(W.dirty&&te(z,W),W.subscribers.forEach(function(J){return l.add(J)})))}}}l.forEach(function(J){return J()})}}},x.addEventListener("abort",c(!1),{signal:m}),x.addEventListener("error",c(!1),{signal:m}),x.addEventListener("complete",c(!0),{signal:m})),x},table:function(u){var a=t.table(u),c=a.schema.primaryKey;return S(S({},a),{mutate:function(d){var m=en.trans;if(c.outbound||m.db._options.cache==="disabled"||m.explicit||m.idbtrans.mode!=="readwrite")return a.mutate(d);var x=tt["idb://".concat(i,"/").concat(u)];return x?(m=a.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||Fr(c,d).some(function(O){return O==null}))?(x.optimisticOps.push(d),d.mutatedParts&&_i(d.mutatedParts),m.then(function(O){0<O.numFailures&&(te(x.optimisticOps,d),(O=ce(0,d,O))&&x.optimisticOps.push(O),d.mutatedParts&&_i(d.mutatedParts))}),m.catch(function(){te(x.optimisticOps,d),d.mutatedParts&&_i(d.mutatedParts)})):m.then(function(O){var l=ce(0,S(S({},d),{values:d.values.map(function(y,h){var A;return O.failures[h]?y:(y=(A=c.keyPath)!==null&&A!==void 0&&A.includes(".")?ze(y):S({},y),Fn(y,c.keyPath,O.results[h]),y)})}),O);x.optimisticOps.push(l),queueMicrotask(function(){return d.mutatedParts&&_i(d.mutatedParts)})}),m):a.mutate(d)},query:function(d){if(!wi(en,a)||!zu("query",d))return a.query(d);var m=((l=en.trans)===null||l===void 0?void 0:l.db._options.cache)==="immutable",h=en,x=h.requery,O=h.signal,l=function(E,P,T,R){var B=tt["idb://".concat(E,"/").concat(P)];if(!B)return[];if(!(P=B.queries[T]))return[null,!1,B,null];var k=P[(R.query?R.query.index.name:null)||""];if(!k)return[null,!1,B,null];switch(T){case"query":var L=k.find(function(G){return G.req.limit===R.limit&&G.req.values===R.values&&iu(G.req.query.range,R.query.range)});return L?[L,!0,B,k]:[k.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=R.limit&&(!R.values||G.req.values)&&ju(G.req.query.range,R.query.range)}),!1,B,k];case"count":return L=k.find(function(G){return iu(G.req.query.range,R.query.range)}),[L,!!L,B,k]}}(i,u,"query",d),y=l[0],h=l[1],A=l[2],_=l[3];return y&&h?y.obsSet=d.obsSet:(h=a.query(d).then(function(E){var P=E.result;if(y&&(y.res=P),m){for(var T=0,R=P.length;T<R;++T)Object.freeze(P[T]);Object.freeze(P)}else E.result=ze(P);return E}).catch(function(E){return _&&y&&te(_,y),Promise.reject(E)}),y={obsSet:d.obsSet,promise:h,subscribers:new Set,type:"query",req:d,dirty:!1},_?_.push(y):(_=[y],(A=A||(tt["idb://".concat(i,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=_)),Go(y,_,x,O),y.promise.then(function(E){return{result:sr(E.result,d,A==null?void 0:A.optimisticOps,a,y,m)}})}})}})}};function xi(t,i){return new Proxy(t,{get:function(u,a,c){return a==="db"?i:Reflect.get(u,a,c)}})}var rt=(qn.prototype.version=function(t){if(isNaN(t)||t<.1)throw new rn.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new rn.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var i=this._versions,u=i.filter(function(a){return a._cfg.version===t})[0];return u||(u=new this.Version(t),i.push(u),i.sort(Wo),u.stores({}),this._state.autoSchema=!1,u)},qn.prototype._whenReady=function(t){var i=this;return this.idbdb&&(this._state.openComplete||en.letThrough||this._vip)?t():new Z(function(u,a){if(i._state.openComplete)return a(new rn.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen)return void a(new rn.DatabaseClosed);i.open().catch(Tn)}i._state.dbReadyPromise.then(u,a)}).then(t)},qn.prototype.use=function(t){var i=t.stack,u=t.create,a=t.level,c=t.name;return c&&this.unuse({stack:i,name:c}),t=this._middlewares[i]||(this._middlewares[i]=[]),t.push({stack:i,create:u,level:a??10,name:c}),t.sort(function(d,m){return d.level-m.level}),this},qn.prototype.unuse=function(t){var i=t.stack,u=t.name,a=t.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(c){return a?c.create!==a:!!u&&c.name!==u})),this},qn.prototype.open=function(){var t=this;return Rt(qe,function(){return ar(t)})},qn.prototype._close=function(){var t=this._state,i=nr.indexOf(this);if(0<=i&&nr.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new Z(function(u){t.dbReadyResolve=u}),t.openCanceller=new Z(function(u,a){t.cancelOpen=a}))},qn.prototype.close=function(u){var i=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;i?(u.isBeingOpened&&u.cancelOpen(new rn.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new rn.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},qn.prototype.delete=function(t){var i=this;t===void 0&&(t={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new Z(function(c,d){function m(){i.close(t);var x=i._deps.indexedDB.deleteDatabase(i.name);x.onsuccess=Kn(function(){var O,l,y;O=i._deps,l=i.name,y=O.indexedDB,O=O.IDBKeyRange,ie(y)||l===oi||mi(y,O).delete(l).catch(Tn),c()}),x.onerror=Re(d),x.onblocked=i._fireOnBlocked}if(u)throw new rn.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(m):m()})},qn.prototype.backendDB=function(){return this.idbdb},qn.prototype.isOpen=function(){return this.idbdb!==null},qn.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},qn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},qn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(qn.prototype,"tables",{get:function(){var t=this;return q(this._allTables).map(function(i){return t._allTables[i]})},enumerable:!1,configurable:!0}),qn.prototype.transaction=function(){var t=(function(i,u,a){var c=arguments.length;if(c<2)throw new rn.InvalidArgument("Too few arguments");for(var d=new Array(c-1);--c;)d[c-1]=arguments[c];return a=d.pop(),[i,mr(d),a]}).apply(this,arguments);return this._transaction.apply(this,t)},qn.prototype._transaction=function(t,i,u){var a=this,c=en.trans;c&&c.db===this&&t.indexOf("!")===-1||(c=null);var d,m,x=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(m=i.map(function(l){if(l=l instanceof a.Table?l.name:l,typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),t=="r"||t===ai)d=ai;else{if(t!="rw"&&t!=si)throw new rn.InvalidArgument("Invalid transaction mode: "+t);d=si}if(c){if(c.mode===ai&&d===si){if(!x)throw new rn.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&m.forEach(function(l){if(c&&c.storeNames.indexOf(l)===-1){if(!x)throw new rn.SubTransaction("Table "+l+" not included in parent transaction.");c=null}}),x&&c&&!c.active&&(c=null)}}catch(l){return c?c._promise(null,function(y,h){h(l)}):Ln(l)}var O=(function l(y,h,A,_,E){return Z.resolve().then(function(){var P=en.transless||en,T=y._createTransaction(h,A,y._dbSchema,_);if(T.explicit=!0,P={trans:T,transless:P},_)T.idbtrans=_.idbtrans;else try{T.create(),T.idbtrans._explicit=!0,y._state.PR1398_maxLoop=3}catch(k){return k.name===Di.InvalidState&&y.isOpen()&&0<--y._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),y.close({disableAutoOpen:!1}),y.open().then(function(){return l(y,h,A,null,E)})):Ln(k)}var R,B=mn(E);return B&&Jt(),P=Z.follow(function(){var k;(R=E.call(T,T))&&(B?(k=ht.bind(null,null),R.then(k,k)):typeof R.next=="function"&&typeof R.throw=="function"&&(R=tu(R)))},P),(R&&typeof R.then=="function"?Z.resolve(R).then(function(k){return T.active?k:Ln(new rn.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):P.then(function(){return R})).then(function(k){return _&&T._resolve(),T._completion.then(function(){return k})}).catch(function(k){return T._reject(k),Ln(k)})})}).bind(null,this,d,m,c,u);return c?c._promise(d,O,"lock"):en.trans?Rt(en.transless,function(){return a._whenReady(O)}):this._whenReady(O)},qn.prototype.table=function(t){if(!sn(this._allTables,t))throw new rn.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},qn);function qn(t,i){var u=this;this._middlewares={},this.verno=0;var a=qn.dependencies;this._options=i=S({addons:qn.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},a=i.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,d,m,x,O,l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Tn,dbReadyPromise:null,cancelOpen:Tn,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};l.dbReadyPromise=new Z(function(h){l.dbReadyResolve=h}),l.openCanceller=new Z(function(h,A){l.cancelOpen=A}),this._state=l,this.name=t,this.on=Ar(this,"populate","blocked","versionchange","close",{ready:[Et,Tn]}),this.on.ready.subscribe=de(this.on.ready.subscribe,function(h){return function(A,_){qn.vip(function(){var E,P=u._state;P.openComplete?(P.dbOpenError||Z.resolve().then(A),_&&h(A)):P.onReadyBeingFired?(P.onReadyBeingFired.push(A),_&&h(A)):(h(A),E=u,_||h(function T(){E.on.ready.unsubscribe(A),E.on.ready.unsubscribe(T)}))})}}),this.Collection=(c=this,er(Hi.prototype,function(R,T){this.db=c;var _=Ku,E=null;if(T)try{_=T()}catch(B){E=B}var P=R._ctx,T=P.table,R=T.hook.reading.fire;this._ctx={table:T,index:P.index,isPrimKey:!P.index||T.schema.primKey.keyPath&&P.index===T.schema.primKey.name,range:_,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:E,or:P.or,valueMapper:R!==zt?R:null}})),this.Table=(d=this,er(Wi.prototype,function(h,A,_){this.db=d,this._tx=_,this.name=h,this.schema=A,this.hook=d._allTables[h]?d._allTables[h].hook:Ar(null,{creating:[ko,Tn],reading:[Oe,zt],updating:[Ou,Tn],deleting:[Xe,Tn]})})),this.Transaction=(m=this,er(Yi.prototype,function(h,A,_,E,P){var T=this;this.db=m,this.mode=h,this.storeNames=A,this.schema=_,this.chromeTransactionDurability=E,this.idbtrans=null,this.on=Ar(this,"complete","error","abort"),this.parent=P||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Z(function(R,B){T._resolve=R,T._reject=B}),this._completion.then(function(){T.active=!1,T.on.complete.fire()},function(R){var B=T.active;return T.active=!1,T.on.error.fire(R),T.parent?T.parent._reject(R):B&&T.idbtrans&&T.idbtrans.abort(),Ln(R)})})),this.Version=(x=this,er(Wu.prototype,function(h){this.db=x,this._cfg={version:h,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(O=this,er(Nu.prototype,function(h,A,_){if(this.db=O,this._ctx={table:h,index:A===":id"?null:A,or:_},this._cmp=this._ascending=wn,this._descending=function(E,P){return wn(P,E)},this._max=function(E,P){return 0<wn(E,P)?E:P},this._min=function(E,P){return wn(E,P)<0?E:P},this._IDBKeyRange=O._deps.IDBKeyRange,!this._IDBKeyRange)throw new rn.MissingAPI})),this.on("versionchange",function(h){0<h.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(h){!h.newVersion||h.newVersion<h.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(h.oldVersion/10))}),this._maxKey=Or(i.IDBKeyRange),this._createTransaction=function(h,A,_,E){return new u.Transaction(h,A,_,u._options.chromeTransactionDurability,E)},this._fireOnBlocked=function(h){u.on("blocked").fire(h),nr.filter(function(A){return A.name===u.name&&A!==u&&!A._state.vcFired}).map(function(A){return A.on("versionchange").fire(h)})},this.use(ru),this.use($o),this.use(Yu),this.use(Gu),this.use($u);var y=new Proxy(this,{get:function(h,A,_){if(A==="_vip")return!0;if(A==="table")return function(P){return xi(u.table(P),y)};var E=Reflect.get(h,A,_);return E instanceof Wi?xi(E,y):A==="tables"?E.map(function(P){return xi(P,y)}):A==="_createTransaction"?function(){return xi(E.apply(this,arguments),y)}:E}});this.vip=y,a.forEach(function(h){return h(u)})}var it,xe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ho=(qr.prototype.subscribe=function(t,i,u){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:i,complete:u})},qr.prototype[xe]=function(){return this},qr);function qr(t){this._subscribe=t}try{it={indexedDB:D.indexedDB||D.mozIndexedDB||D.webkitIndexedDB||D.msIndexedDB,IDBKeyRange:D.IDBKeyRange||D.webkitIDBKeyRange}}catch{it={indexedDB:null,IDBKeyRange:null}}function uu(t){var i,u=!1,a=new Ho(function(c){var d=mn(t),m,x=!1,O={},l={},y={get closed(){return x},unsubscribe:function(){x||(x=!0,m&&m.abort(),h&&vt.storagemutated.unsubscribe(_))}};c.start&&c.start(y);var h=!1,A=function(){return qi(E)},_=function(P){or(O,P),Ji(l,O)&&A()},E=function(){var P,T,R;!x&&it.indexedDB&&(O={},P={},m&&m.abort(),m=new AbortController,R=function(B){var k=Zt();try{d&&Jt();var L=lt(t,B);return L=d?L.finally(ht):L}finally{k&&Qt()}}(T={subscr:P,signal:m.signal,requery:A,querier:t,trans:null}),Promise.resolve(R).then(function(B){u=!0,i=B,x||T.signal.aborted||(O={},function(k){for(var L in k)if(sn(k,L))return;return 1}(l=P)||h||(vt(Ir,_),h=!0),qi(function(){return!x&&c.next&&c.next(B)}))},function(B){u=!1,["DatabaseClosedError","AbortError"].includes(B==null?void 0:B.name)||x||qi(function(){x||c.error&&c.error(B)})}))};return setTimeout(A,0),y});return a.hasValue=function(){return u},a.getValue=function(){return i},a}var fe=rt;function cr(t){var i=gt;try{gt=!0,vt.storagemutated.fire(t),bi(t,!0)}finally{gt=i}}Dn(fe,S(S({},Tt),{delete:function(t){return new fe(t,{addons:[]}).delete()},exists:function(t){return new fe(t,{addons:[]}).open().then(function(i){return i.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return i=fe.dependencies,u=i.indexedDB,i=i.IDBKeyRange,(ie(u)?Promise.resolve(u.databases()).then(function(a){return a.map(function(c){return c.name}).filter(function(c){return c!==oi})}):mi(u,i).toCollection().primaryKeys()).then(t)}catch{return Ln(new rn.MissingAPI)}var i,u},defineClass:function(){return function(t){X(this,t)}},ignoreTransaction:function(t){return en.trans?Rt(en.transless,t):t()},vip:Vi,async:function(t){return function(){try{var i=tu(t.apply(this,arguments));return i&&typeof i.then=="function"?i:Z.resolve(i)}catch(u){return Ln(u)}}},spawn:function(t,i,u){try{var a=tu(t.apply(u,i||[]));return a&&typeof a.then=="function"?a:Z.resolve(a)}catch(c){return Ln(c)}},currentTransaction:{get:function(){return en.trans||null}},waitFor:function(t,i){return i=Z.resolve(typeof t=="function"?fe.ignoreTransaction(t):t).timeout(i||6e4),en.trans?en.trans.waitFor(i):i},Promise:Z,debug:{get:function(){return Un},set:function(t){Yt(t)}},derive:En,extend:X,props:Dn,override:de,Events:Ar,on:vt,liveQuery:uu,extendObservabilitySet:or,getByKeyPath:ee,setByKeyPath:Fn,delByKeyPath:function(t,i){typeof i=="string"?Fn(t,i,void 0):"length"in i&&[].map.call(i,function(u){Fn(t,u,void 0)})},shallowClone:st,deepClone:ze,getObjectDiff:Lr,cmp:wn,asap:me,minKey:-1/0,addons:[],connections:nr,errnames:Di,dependencies:it,cache:tt,semVer:"4.0.11",version:"4.0.11".split(".").map(function(t){return parseInt(t)}).reduce(function(t,i,u){return t+i/Math.pow(10,2*u)})})),fe.maxKey=Or(fe.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(vt(Ir,function(t){gt||(t=new CustomEvent(zi,{detail:t}),gt=!0,dispatchEvent(t),gt=!1)}),addEventListener(zi,function(t){t=t.detail,gt||cr(t)}));var fr,gt=!1,Xu=function(){};return typeof BroadcastChannel<"u"&&((Xu=function(){(fr=new BroadcastChannel(zi)).onmessage=function(t){return t.data&&cr(t.data)}})(),typeof fr.unref=="function"&&fr.unref(),vt(Ir,function(t){gt||fr.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!rt.disableBfCache&&t.persisted){Un&&console.debug("Dexie: handling persisted pagehide"),fr!=null&&fr.close();for(var i=0,u=nr;i<u.length;i++)u[i].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!rt.disableBfCache&&t.persisted&&(Un&&console.debug("Dexie: handling persisted pageshow"),Xu(),cr({all:new Jn(-1/0,[[]])}))})),Z.rejectionMapper=function(t,i){return!t||t instanceof Ht||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Iu[t.name]?t:(i=new Iu[t.name](i||t.message,t),"stack"in t&&On(i,"stack",{get:function(){return this.inner.stack}}),i)},Yt(Un),S(rt,Object.freeze({__proto__:null,Dexie:rt,liveQuery:uu,Entity:Lu,cmp:wn,PropModification:rr,replacePrefix:function(t,i){return new rr({replacePrefix:[t,i]})},add:function(t){return new rr({add:t})},remove:function(t){return new rr({remove:t})},default:rt,RangeSet:Jn,mergeRanges:we,rangesOverlap:Br}),{default:rt}),rt})}(Io)),Io.exports}var oy=uy();const Ga=of(oy),Qc=Symbol.for("Dexie"),Po=globalThis[Qc]||(globalThis[Qc]=Ga);if(Ga.semVer!==Po.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ga.semVer} and ${Po.semVer}`);const{liveQuery:Xr,mergeRanges:$y,rangesOverlap:Hy,RangeSet:zy,cmp:Yy,Entity:jy,PropModification:Xy,replacePrefix:Zy,add:Qy,remove:Vy}=Po,ay="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ki=(v=21)=>{let w="",s=crypto.getRandomValues(new Uint8Array(v|=0));for(;v--;)w+=ay[s[v]&63];return w};class sy extends Po{constructor(){super("TravelPlannerDB");gr(this,"currentTravel");gr(this,"travels");gr(this,"travelPlans");gr(this,"travelChecklists");gr(this,"travelExpenses");gr(this,"participants");gr(this,"kvs");this.version(1).stores({currentTravel:"++id, travelId, name, startDateTime, endDateTime, createdAt",travels:"++id, travelId, name, startDateTime, endDateTime, createdAt",travelPlans:"++id, travelPlanId, travelId, title, description, tags, startDateTime, endDateTime, isAllDay, timezone, location, status, priority, budget, attachments, participants, createdAt, updatedAt, createdBy, version, recurrence",travelChecklists:"++id, itemId, travelId, name, category, isPacked, quantity, importance, notes, createdAt, updatedAt",travelExpenses:"++id, expenseId, travelId, amount, currency, tags, description, dateTime, paymentMethod, location, sharedWith, attachments, isReimbursed, createdAt, updatedAt",participants:"++id, userId, name, defaultRole",kvs:"++id, key, value"}),this.currentTravel=this.table("currentTravel"),this.travels=this.table("travels"),this.travelPlans=this.table("travelPlans"),this.travelChecklists=this.table("travelChecklists"),this.travelExpenses=this.table("travelExpenses"),this.participants=this.table("participants"),this.kvs=this.table("kvs"),this.currentTravel.hook("creating",function(s,S,K){S.travelId||(S.travelId=ki())}),this.travels.hook("creating",function(s,S,K){S.travelId||(S.travelId=ki())}),this.travelPlans.hook("creating",function(s,S,K){S.travelPlanId||(S.travelPlanId=ki())}),this.travelChecklists.hook("creating",function(s,S,K){S.itemId||(S.itemId=ki())}),this.travelExpenses.hook("creating",function(s,S,K){S.expenseId||(S.expenseId=ki())}),this.participants.hook("creating",function(s,S,K){S.userId||(S.userId=ki())})}}const In=new sy;var $a=function(v,w){return $a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,S){s.__proto__=S}||function(s,S){for(var K in S)Object.prototype.hasOwnProperty.call(S,K)&&(s[K]=S[K])},$a(v,w)};function Ja(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");$a(v,w);function s(){this.constructor=v}v.prototype=w===null?Object.create(w):(s.prototype=w.prototype,new s)}function cy(v,w,s,S){function K(D){return D instanceof s?D:new s(function(q){q(D)})}return new(s||(s=Promise))(function(D,q){function H(ln){try{V(S.next(ln))}catch(sn){q(sn)}}function X(ln){try{V(S.throw(ln))}catch(sn){q(sn)}}function V(ln){ln.done?D(ln.value):K(ln.value).then(H,X)}V((S=S.apply(v,w||[])).next())})}function af(v,w){var s={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},S,K,D,q=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return q.next=H(0),q.throw=H(1),q.return=H(2),typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function H(V){return function(ln){return X([V,ln])}}function X(V){if(S)throw new TypeError("Generator is already executing.");for(;q&&(q=0,V[0]&&(s=0)),s;)try{if(S=1,K&&(D=V[0]&2?K.return:V[0]?K.throw||((D=K.return)&&D.call(K),0):K.next)&&!(D=D.call(K,V[1])).done)return D;switch(K=0,D&&(V=[V[0]&2,D.value]),V[0]){case 0:case 1:D=V;break;case 4:return s.label++,{value:V[1],done:!1};case 5:s.label++,K=V[1],V=[0];continue;case 7:V=s.ops.pop(),s.trys.pop();continue;default:if(D=s.trys,!(D=D.length>0&&D[D.length-1])&&(V[0]===6||V[0]===2)){s=0;continue}if(V[0]===3&&(!D||V[1]>D[0]&&V[1]<D[3])){s.label=V[1];break}if(V[0]===6&&s.label<D[1]){s.label=D[1],D=V;break}if(D&&s.label<D[2]){s.label=D[2],s.ops.push(V);break}D[2]&&s.ops.pop(),s.trys.pop();continue}V=w.call(v,s)}catch(ln){V=[6,ln],K=0}finally{S=D=0}if(V[0]&5)throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}}function Tu(v){var w=typeof Symbol=="function"&&Symbol.iterator,s=w&&v[w],S=0;if(s)return s.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&S>=v.length&&(v=void 0),{value:v&&v[S++],done:!v}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ha(v,w){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var S=s.call(v),K,D=[],q;try{for(;(w===void 0||w-- >0)&&!(K=S.next()).done;)D.push(K.value)}catch(H){q={error:H}}finally{try{K&&!K.done&&(s=S.return)&&s.call(S)}finally{if(q)throw q.error}}return D}function za(v,w,s){if(s||arguments.length===2)for(var S=0,K=w.length,D;S<K;S++)(D||!(S in w))&&(D||(D=Array.prototype.slice.call(w,0,S)),D[S]=w[S]);return v.concat(D||Array.prototype.slice.call(w))}function Bi(v){return this instanceof Bi?(this.v=v,this):new Bi(v)}function fy(v,w,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S=s.apply(v,w||[]),K,D=[];return K=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),H("next"),H("throw"),H("return",q),K[Symbol.asyncIterator]=function(){return this},K;function q(pn){return function(On){return Promise.resolve(On).then(pn,sn)}}function H(pn,On){S[pn]&&(K[pn]=function(En){return new Promise(function(Xn,Me){D.push([pn,En,Xn,Me])>1||X(pn,En)})},On&&(K[pn]=On(K[pn])))}function X(pn,On){try{V(S[pn](On))}catch(En){Dn(D[0][3],En)}}function V(pn){pn.value instanceof Bi?Promise.resolve(pn.value.v).then(ln,sn):Dn(D[0][2],pn)}function ln(pn){X("next",pn)}function sn(pn){X("throw",pn)}function Dn(pn,On){pn(On),D.shift(),D.length&&X(D[0][0],D[0][1])}}function ly(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var w=v[Symbol.asyncIterator],s;return w?w.call(v):(v=typeof Tu=="function"?Tu(v):v[Symbol.iterator](),s={},S("next"),S("throw"),S("return"),s[Symbol.asyncIterator]=function(){return this},s);function S(D){s[D]=v[D]&&function(q){return new Promise(function(H,X){q=v[D](q),K(H,X,q.done,q.value)})}}function K(D,q,H,X){Promise.resolve(X).then(function(V){D({value:V,done:H})},q)}}function oe(v){return typeof v=="function"}function hy(v){var w=function(S){Error.call(S),S.stack=new Error().stack},s=v(w);return s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,s}var qa=hy(function(v){return function(s){v(this),this.message=s?s.length+` errors occurred during unsubscription:
`+s.map(function(S,K){return K+1+") "+S.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=s}});function Vc(v,w){if(v){var s=v.indexOf(w);0<=s&&v.splice(s,1)}}var ns=function(){function v(w){this.initialTeardown=w,this.closed=!1,this._parentage=null,this._finalizers=null}return v.prototype.unsubscribe=function(){var w,s,S,K,D;if(!this.closed){this.closed=!0;var q=this._parentage;if(q)if(this._parentage=null,Array.isArray(q))try{for(var H=Tu(q),X=H.next();!X.done;X=H.next()){var V=X.value;V.remove(this)}}catch(En){w={error:En}}finally{try{X&&!X.done&&(s=H.return)&&s.call(H)}finally{if(w)throw w.error}}else q.remove(this);var ln=this.initialTeardown;if(oe(ln))try{ln()}catch(En){D=En instanceof qa?En.errors:[En]}var sn=this._finalizers;if(sn){this._finalizers=null;try{for(var Dn=Tu(sn),pn=Dn.next();!pn.done;pn=Dn.next()){var On=pn.value;try{Jc(On)}catch(En){D=D??[],En instanceof qa?D=za(za([],Ha(D)),Ha(En.errors)):D.push(En)}}}catch(En){S={error:En}}finally{try{pn&&!pn.done&&(K=Dn.return)&&K.call(Dn)}finally{if(S)throw S.error}}}if(D)throw new qa(D)}},v.prototype.add=function(w){var s;if(w&&w!==this)if(this.closed)Jc(w);else{if(w instanceof v){if(w.closed||w._hasParent(this))return;w._addParent(this)}(this._finalizers=(s=this._finalizers)!==null&&s!==void 0?s:[]).push(w)}},v.prototype._hasParent=function(w){var s=this._parentage;return s===w||Array.isArray(s)&&s.includes(w)},v.prototype._addParent=function(w){var s=this._parentage;this._parentage=Array.isArray(s)?(s.push(w),s):s?[s,w]:w},v.prototype._removeParent=function(w){var s=this._parentage;s===w?this._parentage=null:Array.isArray(s)&&Vc(s,w)},v.prototype.remove=function(w){var s=this._finalizers;s&&Vc(s,w),w instanceof v&&w._removeParent(this)},v.EMPTY=function(){var w=new v;return w.closed=!0,w}(),v}();ns.EMPTY;function sf(v){return v instanceof ns||v&&"closed"in v&&oe(v.remove)&&oe(v.add)&&oe(v.unsubscribe)}function Jc(v){oe(v)?v():v.unsubscribe()}var dy={Promise:void 0},py={setTimeout:function(v,w){for(var s=[],S=2;S<arguments.length;S++)s[S-2]=arguments[S];return setTimeout.apply(void 0,za([v,w],Ha(s)))},clearTimeout:function(v){return clearTimeout(v)},delegate:void 0};function cf(v){py.setTimeout(function(){throw v})}function nf(){}function vy(v){v()}var es=function(v){Ja(w,v);function w(s){var S=v.call(this)||this;return S.isStopped=!1,s?(S.destination=s,sf(s)&&s.add(S)):S.destination=my,S}return w.create=function(s,S,K){return new Ya(s,S,K)},w.prototype.next=function(s){this.isStopped||this._next(s)},w.prototype.error=function(s){this.isStopped||(this.isStopped=!0,this._error(s))},w.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},w.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,v.prototype.unsubscribe.call(this),this.destination=null)},w.prototype._next=function(s){this.destination.next(s)},w.prototype._error=function(s){try{this.destination.error(s)}finally{this.unsubscribe()}},w.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},w}(ns),gy=function(){function v(w){this.partialObserver=w}return v.prototype.next=function(w){var s=this.partialObserver;if(s.next)try{s.next(w)}catch(S){Eo(S)}},v.prototype.error=function(w){var s=this.partialObserver;if(s.error)try{s.error(w)}catch(S){Eo(S)}else Eo(w)},v.prototype.complete=function(){var w=this.partialObserver;if(w.complete)try{w.complete()}catch(s){Eo(s)}},v}(),Ya=function(v){Ja(w,v);function w(s,S,K){var D=v.call(this)||this,q;return oe(s)||!s?q={next:s??void 0,error:S??void 0,complete:K??void 0}:q=s,D.destination=new gy(q),D}return w}(es);function Eo(v){cf(v)}function yy(v){throw v}var my={closed:!0,next:nf,error:yy,complete:nf},ts=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function _y(v){return v}function by(v){return v.length===0?_y:v.length===1?v[0]:function(s){return v.reduce(function(S,K){return K(S)},s)}}var xt=function(){function v(w){w&&(this._subscribe=w)}return v.prototype.lift=function(w){var s=new v;return s.source=this,s.operator=w,s},v.prototype.subscribe=function(w,s,S){var K=this,D=xy(w)?w:new Ya(w,s,S);return vy(function(){var q=K,H=q.operator,X=q.source;D.add(H?H.call(D,X):X?K._subscribe(D):K._trySubscribe(D))}),D},v.prototype._trySubscribe=function(w){try{return this._subscribe(w)}catch(s){w.error(s)}},v.prototype.forEach=function(w,s){var S=this;return s=ef(s),new s(function(K,D){var q=new Ya({next:function(H){try{w(H)}catch(X){D(X),q.unsubscribe()}},error:D,complete:K});S.subscribe(q)})},v.prototype._subscribe=function(w){var s;return(s=this.source)===null||s===void 0?void 0:s.subscribe(w)},v.prototype[ts]=function(){return this},v.prototype.pipe=function(){for(var w=[],s=0;s<arguments.length;s++)w[s]=arguments[s];return by(w)(this)},v.prototype.toPromise=function(w){var s=this;return w=ef(w),new w(function(S,K){var D;s.subscribe(function(q){return D=q},function(q){return K(q)},function(){return S(D)})})},v.create=function(w){return new v(w)},v}();function ef(v){var w;return(w=v??dy.Promise)!==null&&w!==void 0?w:Promise}function wy(v){return v&&oe(v.next)&&oe(v.error)&&oe(v.complete)}function xy(v){return v&&v instanceof es||wy(v)&&sf(v)}function Ay(v){return oe(v==null?void 0:v.lift)}function rs(v){return function(w){if(Ay(w))return w.lift(function(s){try{return v(s,this)}catch(S){this.error(S)}});throw new TypeError("Unable to lift unknown Observable type")}}function ja(v,w,s,S,K){return new Sy(v,w,s,S,K)}var Sy=function(v){Ja(w,v);function w(s,S,K,D,q,H){var X=v.call(this,s)||this;return X.onFinalize=q,X.shouldUnsubscribe=H,X._next=S?function(V){try{S(V)}catch(ln){s.error(ln)}}:v.prototype._next,X._error=D?function(V){try{D(V)}catch(ln){s.error(ln)}finally{this.unsubscribe()}}:v.prototype._error,X._complete=K?function(){try{K()}catch(V){s.error(V)}finally{this.unsubscribe()}}:v.prototype._complete,X}return w.prototype.unsubscribe=function(){var s;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var S=this.closed;v.prototype.unsubscribe.call(this),!S&&((s=this.onFinalize)===null||s===void 0||s.call(this))}},w}(es),ff=function(v){return v&&typeof v.length=="number"&&typeof v!="function"};function lf(v){return oe(v==null?void 0:v.then)}function hf(v){return oe(v[ts])}function df(v){return Symbol.asyncIterator&&oe(v==null?void 0:v[Symbol.asyncIterator])}function pf(v){return new TypeError("You provided "+(v!==null&&typeof v=="object"?"an invalid object":"'"+v+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Ty(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vf=Ty();function gf(v){return oe(v==null?void 0:v[vf])}function yf(v){return fy(this,arguments,function(){var s,S,K,D;return af(this,function(q){switch(q.label){case 0:s=v.getReader(),q.label=1;case 1:q.trys.push([1,,9,10]),q.label=2;case 2:return[4,Bi(s.read())];case 3:return S=q.sent(),K=S.value,D=S.done,D?[4,Bi(void 0)]:[3,5];case 4:return[2,q.sent()];case 5:return[4,Bi(K)];case 6:return[4,q.sent()];case 7:return q.sent(),[3,2];case 8:return[3,10];case 9:return s.releaseLock(),[7];case 10:return[2]}})})}function mf(v){return oe(v==null?void 0:v.getReader)}function Co(v){if(v instanceof xt)return v;if(v!=null){if(hf(v))return Ey(v);if(ff(v))return Iy(v);if(lf(v))return Oy(v);if(df(v))return _f(v);if(gf(v))return Py(v);if(mf(v))return Cy(v)}throw pf(v)}function Ey(v){return new xt(function(w){var s=v[ts]();if(oe(s.subscribe))return s.subscribe(w);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Iy(v){return new xt(function(w){for(var s=0;s<v.length&&!w.closed;s++)w.next(v[s]);w.complete()})}function Oy(v){return new xt(function(w){v.then(function(s){w.closed||(w.next(s),w.complete())},function(s){return w.error(s)}).then(null,cf)})}function Py(v){return new xt(function(w){var s,S;try{for(var K=Tu(v),D=K.next();!D.done;D=K.next()){var q=D.value;if(w.next(q),w.closed)return}}catch(H){s={error:H}}finally{try{D&&!D.done&&(S=K.return)&&S.call(K)}finally{if(s)throw s.error}}w.complete()})}function _f(v){return new xt(function(w){Ry(v,w).catch(function(s){return w.error(s)})})}function Cy(v){return _f(yf(v))}function Ry(v,w){var s,S,K,D;return cy(this,void 0,void 0,function(){var q,H;return af(this,function(X){switch(X.label){case 0:X.trys.push([0,5,6,11]),s=ly(v),X.label=1;case 1:return[4,s.next()];case 2:if(S=X.sent(),!!S.done)return[3,4];if(q=S.value,w.next(q),w.closed)return[2];X.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return H=X.sent(),K={error:H},[3,11];case 6:return X.trys.push([6,,9,10]),S&&!S.done&&(D=s.return)?[4,D.call(s)]:[3,8];case 7:X.sent(),X.label=8;case 8:return[3,10];case 9:if(K)throw K.error;return[7];case 10:return[7];case 11:return w.complete(),[2]}})})}function Vr(v,w,s,S,K){S===void 0&&(S=0),K===void 0&&(K=!1);var D=w.schedule(function(){s(),K?v.add(this.schedule(null,S)):this.unsubscribe()},S);if(v.add(D),!K)return D}function bf(v,w){return w===void 0&&(w=0),rs(function(s,S){s.subscribe(ja(S,function(K){return Vr(S,v,function(){return S.next(K)},w)},function(){return Vr(S,v,function(){return S.complete()},w)},function(K){return Vr(S,v,function(){return S.error(K)},w)}))})}function wf(v,w){return w===void 0&&(w=0),rs(function(s,S){S.add(v.schedule(function(){return s.subscribe(S)},w))})}function ky(v,w){return Co(v).pipe(wf(w),bf(w))}function By(v,w){return Co(v).pipe(wf(w),bf(w))}function Dy(v,w){return new xt(function(s){var S=0;return w.schedule(function(){S===v.length?s.complete():(s.next(v[S++]),s.closed||this.schedule())})})}function Ky(v,w){return new xt(function(s){var S;return Vr(s,w,function(){S=v[vf](),Vr(s,w,function(){var K,D,q;try{K=S.next(),D=K.value,q=K.done}catch(H){s.error(H);return}q?s.complete():s.next(D)},0,!0)}),function(){return oe(S==null?void 0:S.return)&&S.return()}})}function xf(v,w){if(!v)throw new Error("Iterable cannot be null");return new xt(function(s){Vr(s,w,function(){var S=v[Symbol.asyncIterator]();Vr(s,w,function(){S.next().then(function(K){K.done?s.complete():s.next(K.value)})},0,!0)})})}function Ly(v,w){return xf(yf(v),w)}function Fy(v,w){if(v!=null){if(hf(v))return ky(v,w);if(ff(v))return Dy(v,w);if(lf(v))return By(v,w);if(df(v))return xf(v,w);if(gf(v))return Ky(v,w);if(mf(v))return Ly(v,w)}throw pf(v)}function My(v,w){return w?Fy(v,w):Co(v)}function Na(v,w){return rs(function(s,S){var K=null,D=0,q=!1,H=function(){return q&&!K&&S.complete()};s.subscribe(ja(S,function(X){K==null||K.unsubscribe();var V=0,ln=D++;Co(v(X,ln)).subscribe(K=ja(S,function(sn){return S.next(w?w(X,sn,ln,V++):sn)},function(){K=null,H()}))},function(){q=!0,H()}))})}function wt(v,w){return Kg(v)?new xt(s=>Xa(v,S=>s.next(S),w)):My(v)}function Zr(v,w){const s=Au(void 0),S=v.subscribe({next:K=>s.value=K,error:void 0});return Dg(()=>{S.unsubscribe()}),s}async function qy(){return await Lg("plugin:commands|exit_app",{payload:{}}),null}const Jy=Fg("store",()=>{const v=Mg({interval:1e3}),w=Au(),s=Au(),S=Zr(wt(Xr(async()=>await In.currentTravel.limit(1).first()))),K=Zr(wt(Xr(async()=>await In.travels.toArray()))),D=async Y=>{const nn=await In.travels.add(Y);return await In.currentTravel.clear(),await In.currentTravel.add(Y),nn},q=async Y=>{await In.currentTravel.clear(),await In.currentTravel.add(bu(Y))},H=Y=>{var nn;return(nn=K.value)==null?void 0:nn.find(mn=>mn.travelId===Y)},X=async Y=>{var mn;const nn=await In.travels.update(Y.id,bu(Y));return((mn=S.value)==null?void 0:mn.travelId)===Y.travelId&&await In.currentTravel.update(S.value.id,bu(Y)),nn},V=async Y=>{var nn,mn;await In.travels.delete(Y.id),Y.id===((nn=S.value)==null?void 0:nn.id)&&((mn=K.value)!=null&&mn.length?await q(K.value[0]):await In.currentTravel.clear())},ln=Zr(wt(S).pipe(Na(Y=>wt(Xr(async()=>S.value?await In.travelPlans.where("travelId").equals(S.value.travelId).filter(nn=>nn.status!=="deleted").toArray():[]))))),sn=Oo(()=>{var nn;const Y=new Date(v.value).setHours(0,0,0,0);return Xc.orderBy((nn=ln.value)==null?void 0:nn.filter(mn=>mn.endDateTime>=Y),["startDateTime","endDateTime"],["asc","asc"])}),Dn=Oo(()=>{var nn;const Y=new Date(v.value).setHours(0,0,0,0);return(nn=ln.value)==null?void 0:nn.filter(mn=>mn.endDateTime<Y)}),pn=Zr(wt(Xr(async()=>{console.log("get customTravelPlanTags");const Y=await In.kvs.where("key").equals("customTravelPlanTags").first();return Y?Y.value:[]}))),On=async Y=>{const nn=await In.kvs.where("key").equals("customTravelPlanTags").first();nn?await In.kvs.update(nn.id,{value:Y}):await In.kvs.add({key:"customTravelPlanTags",value:Y})},En=Y=>{var nn;return(nn=ln.value)==null?void 0:nn.find(mn=>mn.travelPlanId===Y)},Xn=async Y=>await In.travelPlans.add(Y),Me=async Y=>await In.travelPlans.update(Y.id,bu(Y)),At=async Y=>await In.travelPlans.delete(Y.id),de=Zr(wt(S).pipe(Na(Y=>wt(Xr(async()=>S.value?await In.travelChecklists.where("travelId").equals(S.value.travelId).toArray():[]))))),Ie=Y=>{var nn;return(nn=de.value)==null?void 0:nn.find(mn=>mn.itemId===Y)},me=async Y=>await In.travelChecklists.add(Y),ee=async Y=>await In.travelChecklists.update(Y.id,bu(Y)),Fn=async Y=>await In.travelChecklists.delete(Y.id),st=Zr(wt(Xr(async()=>{const Y=await In.kvs.where("key").equals("customTravelChecklistTags").first();return Y?Y.value:[]}))),yr=async Y=>{const nn=await In.kvs.where("key").equals("customTravelChecklistTags").first();nn?await In.kvs.update(nn.id,{value:Y}):await In.kvs.add({key:"customTravelChecklistTags",value:Y})},mr=Zr(wt(S).pipe(Na(Y=>wt(Xr(async()=>(console.log("currentTravel.value"),S.value?(console.log(await In.travelExpenses.where("travelId").equals(S.value.travelId).toArray()),await In.travelExpenses.where("travelId").equals(S.value.travelId).toArray()):[])))))),Jr=Y=>{var nn;return(nn=mr.value)==null?void 0:nn.find(mn=>mn.expenseId===Y)},St=async Y=>await In.travelExpenses.add(Y),ze=async Y=>await In.travelExpenses.update(Y.id,Y),ni=async Y=>await In.travelExpenses.delete(Y.id),_e={},Zn=(Y,nn)=>{_e[Y]=_e[Y]||[],!_e[Y].includes(nn)&&_e[Y].push(nn)},$t=(Y,nn)=>{_e[Y]&&Xc.remove(_e[Y],mn=>mn===nn)},te=async Y=>{if(_e[Y])for(const nn of _e[Y])try{await Promise.resolve(nn())}catch(mn){console.error(`Error executing callback for ${Y}:`,mn)}};return rf(async()=>{const Y=qg();Zn("Travel",async()=>{await qy()}),Zn("CreateTravel",async()=>{Le.push({name:"Travel"})}),Zn("EditTravel",async()=>{Le.push({name:"Travel"})}),Zn("CreatePlan",async()=>{Le.push({name:"Travel"})}),Zn("EditPlan",async()=>{Le.push({name:"Travel"})}),Zn("PlanPosition",async()=>{Y.params.travelPlanId?Le.push({name:"EditPlan",params:{travelPlanId:Y.params.travelPlanId}}):Le.push({name:"CreatePlan"})}),Zn("CreateChecklist",async()=>{Le.push({name:"Travel"})}),Zn("EditChecklist",async()=>{Le.push({name:"Travel"})}),Zn("CreateExpense",async()=>{Le.push({name:"Travel"})}),Zn("EditExpense",async()=>{Le.push({name:"Travel"})}),Zn("ExpensePosition",async()=>{Y.params.expenseId?Le.push({name:"EditExpense",params:{travelPlanId:Y.params.expenseId}}):Le.push({name:"CreateExpense"})}),Zn("RoadMap",async()=>{Le.push({name:"Travel"})}),window.androidBackCallback=async()=>{var mn;const nn=(mn=Y.name)==null?void 0:mn.toString();nn&&await te(nn)}}),{now:v,planSelectAddress:w,expenseSelectAddress:s,currentTravel:S,travels:K,createTravel:D,switchTravel:q,getTravelById:H,updateTravel:X,deleteTravel:V,travelPlans:ln,travelPlansFromToday:sn,travelPlansBeforeToday:Dn,customTravelPlanTags:pn,getTravelPlanById:En,addTravelPlan:Xn,updateTravelPlan:Me,deleteTravelPlan:At,updateCustomTravelPlanTags:On,travelChecklists:de,customTravelChecklistTags:st,getChecklistItem:Ie,addChecklistItem:me,updateTravelChecklist:ee,deleteTravelChecklist:Fn,updateCustomTravelChecklistTags:yr,travelExpenses:mr,getTravelExpenseById:Jr,addTravelExpense:St,updateTravelExpense:ze,deleteTravelExpense:ni,addBackCallback:Zn,removeBackCallback:$t,triggerBackCallbacks:te}});export{Yg as B,uf as I,Gy as N,Ng as P,Xc as _,Jy as a,Ug as o,Wy as s,Gg as u};
