import{d as F,t as G,c as ee,r as M,u as Ke,a as p,w as ie,e as xe,b as Ze,f as T,g as Te,h as st,i as Dt,j as It,s as aa,o as na,k as Et,l as rt,m as Mt,n as Ot,p as de,q as _e,v as ve,x as it,y as je,z as Rt,A as sa,B as X,C as We,D as Se,E as pe,F as le,G as Pe,H as ze,I as zt,J as oa,K as be,L as ct,M as Re,N as la,O as et,P as tt,Q as Le,R as ot,S as ra,T as ia,U as vt,V as ca,W as ua,X as K,Y as da,Z as me,_ as Be,$ as ut,a0 as qe,a1 as Fe,a2 as ma,a3 as At,a4 as fa,a5 as va,a6 as ht,a7 as ha,a8 as ga,a9 as pa,aa as gt,ab as ba,ac as ya,ad as xa,ae as $e,af as dt,ag as w,ah as y,ai as n,aj as z,ak as k,al as mt,am as A,an as N,ao as Y,ap as J,aq as he,ar as Lt,as as ft,at as _a,au as V,av as De,aw as se,ax as wa,ay as ka,az as $a,aA as Ta,aB as Ca,aC as Pa}from"./index-DOtJjWyZ.js";import{A as Ie,T as Ft}from"./index-B8EoO87B.js";import{u as Sa,o as Nt,B as Ba,s as Da,a as fe,I as Ee,_ as Ae,N as Ia}from"./index-DGOxOV-o.js";import{T as ne}from"./TravelPlan-k6Lqvmii.js";import{c as jt,p as Ea,P as Wt,a as Ma,m as Oa,u as Ra}from"./mount-component-DIRmEMmG.js";import{B as ye}from"./index-kokZwNH7.js";import{u as za,r as Yt,a as Ht,b as Aa}from"./use-id-dXsS4j74.js";import{n as La,s as pt,b as at,a as Me,c as Oe,d as Fa,f as Xe}from"./format-BUPkFkKG.js";import{C as Na}from"./index-DkNMYPPN.js";/* empty css               */import{M as ja,T as bt,X as yt,o as Wa,f as xt,a as Ya,V as Ha}from"./XYZ-s-mLm_Ec.js";import{t as Va,a as Ua}from"./tdt-CRYrco9l.js";import{s as Xa}from"./index-mAKpSMLY.js";function _t(e,l){return e.reduce((a,d)=>Math.abs(a-l)<Math.abs(d-l)?a:d)}const[Vt,wt]=ee("action-bar"),Ut=Symbol(Vt),Ka={placeholder:Boolean,safeAreaInsetBottom:G};var Za=F({name:Vt,props:Ka,setup(e,{slots:l}){const a=M(),d=Sa(a,wt),{linkChildren:c}=Ke(Ut);c();const t=()=>{var v;return p("div",{ref:a,class:[wt(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(v=l.default)==null?void 0:v.call(l)])};return()=>e.placeholder?d(t):t()}});const qa=ie(Za),[Ga,Ja]=ee("action-bar-button"),Qa=xe({},Yt,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var en=F({name:Ga,props:Qa,setup(e,{slots:l}){const a=za(),{parent:d,index:c}=Ze(Ut),t=T(()=>{if(d){const s=d.children[c.value-1];return!(s&&"isButton"in s)}}),v=T(()=>{if(d){const s=d.children[c.value+1];return!(s&&"isButton"in s)}});return Te({isButton:!0}),()=>{const{type:s,icon:r,text:o,color:m,loading:$,disabled:h}=e;return p(ye,{class:Ja([s,{last:v.value,first:t.value}]),size:"large",type:s,icon:r,color:m,loading:$,disabled:h,onClick:a},{default:()=>[l.default?l.default():o]})}}});const kt=ie(en);function tn(e,l,a){let d,c=0;const t=e.scrollLeft,v=a===0?1:Math.round(a*1e3/16);let s=t;function r(){Dt(d)}function o(){s+=(l-t)/v,e.scrollLeft=s,++c<v&&(d=st(o))}return o(),r}function an(e,l,a,d){let c,t=It(e);const v=t<l,s=a===0?1:Math.round(a*1e3/16),r=(l-t)/s;function o(){Dt(c)}function m(){t+=r,(v&&t>l||!v&&t<l)&&(t=l),aa(e,t),v&&t<l||!v&&t>l?c=st(m):d&&(c=st(d))}return m(),o}function nn(){const e=M([]),l=[];return na(()=>{e.value=[]}),[e,d=>(l[d]||(l[d]=c=>{e.value[d]=c}),l[d])]}function Xt(e,l){if(!Et||!window.IntersectionObserver)return;const a=new IntersectionObserver(t=>{l(t[0].intersectionRatio>0)},{root:document.body}),d=()=>{e.value&&a.observe(e.value)},c=()=>{e.value&&a.unobserve(e.value)};rt(c),Mt(c),Ot(d)}const[sn,on]=ee("sticky"),ln={zIndex:ve,position:_e("top"),container:Object,offsetTop:de(0),offsetBottom:de(0)};var rn=F({name:sn,props:ln,emits:["scroll","change"],setup(e,{emit:l,slots:a}){const d=M(),c=it(d),t=je({fixed:!1,width:0,height:0,transform:0}),v=M(!1),s=T(()=>Rt(e.position==="top"?e.offsetTop:e.offsetBottom)),r=T(()=>{if(v.value)return;const{fixed:h,height:f,width:i}=t;if(h)return{width:`${i}px`,height:`${f}px`}}),o=T(()=>{if(!t.fixed||v.value)return;const h=xe(sa(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${s.value}px`});return t.transform&&(h.transform=`translate3d(0, ${t.transform}px, 0)`),h}),m=h=>l("scroll",{scrollTop:h,isFixed:t.fixed}),$=()=>{if(!d.value||Se(d))return;const{container:h,position:f}=e,i=pe(d),g=It(window);if(t.width=i.width,t.height=i.height,f==="top")if(h){const u=pe(h),b=u.bottom-s.value-t.height;t.fixed=s.value>i.top&&u.bottom>0,t.transform=b<0?b:0}else t.fixed=s.value>i.top;else{const{clientHeight:u}=document.documentElement;if(h){const b=pe(h),_=u-b.top-s.value-t.height;t.fixed=u-s.value<i.bottom&&u>b.top,t.transform=_<0?-_:0}else t.fixed=u-s.value<i.bottom}m(g)};return X(()=>t.fixed,h=>l("change",h)),We("scroll",$,{target:c,passive:!0}),Xt(d,$),X([Pe,ze],()=>{!d.value||Se(d)||!t.fixed||(v.value=!0,le(()=>{const h=pe(d);t.width=h.width,t.height=h.height,v.value=!1}))}),()=>{var h;return p("div",{ref:d,style:r.value},[p("div",{class:on({fixed:t.fixed&&!v.value}),style:o.value},[(h=a.default)==null?void 0:h.call(a)])])}}});const cn=ie(rn),[Kt,He]=ee("swipe"),un={loop:G,width:ve,height:ve,vertical:Boolean,autoplay:de(0),duration:de(500),touchable:G,lazyRender:Boolean,initialSwipe:de(0),indicatorColor:String,showIndicators:G,stopPropagation:G},Zt=Symbol(Kt);var dn=F({name:Kt,props:un,emits:["change","dragStart","dragEnd"],setup(e,{emit:l,slots:a}){const d=M(),c=M(),t=je({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let v=!1;const s=zt(),{children:r,linkChildren:o}=Ke(Zt),m=T(()=>r.length),$=T(()=>t[e.vertical?"height":"width"]),h=T(()=>e.vertical?s.deltaY.value:s.deltaX.value),f=T(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-$.value*m.value:0),i=T(()=>$.value?Math.ceil(Math.abs(f.value)/$.value):m.value),g=T(()=>m.value*$.value),u=T(()=>(t.active+m.value)%m.value),b=T(()=>{const E=e.vertical?"vertical":"horizontal";return s.direction.value===E}),_=T(()=>{const E={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+t.offset.toFixed(2)}px)`};if($.value){const j=e.vertical?"height":"width",W=e.vertical?"width":"height";E[j]=`${g.value}px`,E[W]=e[W]?`${e[W]}px`:""}return E}),S=E=>{const{active:j}=t;return E?e.loop?et(j+E,-1,m.value):et(j+E,0,i.value):j},P=(E,j=0)=>{let W=E*$.value;e.loop||(W=Math.min(W,-f.value));let te=j-W;return e.loop||(te=et(te,f.value,0)),te},x=({pace:E=0,offset:j=0,emitChange:W})=>{if(m.value<=1)return;const{active:te}=t,C=S(E),R=P(C,j);if(e.loop){if(r[0]&&R!==f.value){const L=R<f.value;r[0].setOffset(L?g.value:0)}if(r[m.value-1]&&R!==0){const L=R>0;r[m.value-1].setOffset(L?-g.value:0)}}t.active=C,t.offset=R,W&&C!==te&&l("change",u.value)},O=()=>{t.swiping=!0,t.active<=-1?x({pace:m.value}):t.active>=m.value&&x({pace:-m.value})},I=()=>{O(),s.reset(),Re(()=>{t.swiping=!1,x({pace:-1,emitChange:!0})})},U=()=>{O(),s.reset(),Re(()=>{t.swiping=!1,x({pace:1,emitChange:!0})})};let D;const B=()=>clearTimeout(D),H=()=>{B(),+e.autoplay>0&&m.value>1&&(D=setTimeout(()=>{U(),H()},+e.autoplay))},Z=(E=+e.initialSwipe)=>{if(!d.value)return;const j=()=>{var W,te;if(!Se(d)){const C={width:d.value.offsetWidth,height:d.value.offsetHeight};t.rect=C,t.width=+((W=e.width)!=null?W:C.width),t.height=+((te=e.height)!=null?te:C.height)}m.value&&(E=Math.min(m.value-1,E),E===-1&&(E=m.value-1)),t.active=E,t.swiping=!0,t.offset=P(E),r.forEach(C=>{C.setOffset(0)}),H()};Se(d)?le().then(j):j()},re=()=>Z(t.active);let oe;const q=E=>{!e.touchable||E.touches.length>1||(s.start(E),v=!1,oe=Date.now(),B(),O())},ce=E=>{e.touchable&&t.swiping&&(s.move(E),b.value&&(!e.loop&&(t.active===0&&h.value>0||t.active===m.value-1&&h.value<0)||(la(E,e.stopPropagation),x({offset:h.value}),v||(l("dragStart",{index:u.value}),v=!0))))},we=()=>{if(!e.touchable||!t.swiping)return;const E=Date.now()-oe,j=h.value/E;if((Math.abs(j)>.25||Math.abs(h.value)>$.value/2)&&b.value){const te=e.vertical?s.offsetY.value:s.offsetX.value;let C=0;e.loop?C=te>0?h.value>0?-1:1:0:C=-Math[h.value>0?"ceil":"floor"](h.value/$.value),x({pace:C,emitChange:!0})}else h.value&&x({pace:0});v=!1,t.swiping=!1,l("dragEnd",{index:u.value}),H()},Ge=(E,j={})=>{O(),s.reset(),Re(()=>{let W;e.loop&&E===m.value?W=t.active===0?0:E:W=E%m.value,j.immediate?Re(()=>{t.swiping=!1}):t.swiping=!1,x({pace:W-t.active,emitChange:!0})})},Je=(E,j)=>{const W=j===u.value,te=W?{backgroundColor:e.indicatorColor}:void 0;return p("i",{style:te,class:He("indicator",{active:W})},null)},Qe=()=>{if(a.indicator)return a.indicator({active:u.value,total:m.value});if(e.showIndicators&&m.value>1)return p("div",{class:He("indicators",{vertical:e.vertical})},[Array(m.value).fill("").map(Je)])};return Te({prev:I,next:U,state:t,resize:re,swipeTo:Ge}),o({size:$,props:e,count:m,activeIndicator:u}),X(()=>e.initialSwipe,E=>Z(+E)),X(m,()=>Z(t.active)),X(()=>e.autoplay,H),X([Pe,ze,()=>e.width,()=>e.height],re),X(oa(),E=>{E==="visible"?H():B()}),be(Z),ct(()=>Z(t.active)),Nt(()=>Z(t.active)),rt(B),Mt(B),We("touchmove",ce,{target:c}),()=>{var E;return p("div",{ref:d,class:He()},[p("div",{ref:c,style:_.value,class:He("track",{vertical:e.vertical}),onTouchstartPassive:q,onTouchend:we,onTouchcancel:we},[(E=a.default)==null?void 0:E.call(a)]),Qe()])}}});const mn=ie(dn),[fn,$t]=ee("tabs");var vn=F({name:fn,props:{count:tt(Number),inited:Boolean,animated:Boolean,duration:tt(ve),swipeable:Boolean,lazyRender:Boolean,currentIndex:tt(Number)},emits:["change"],setup(e,{emit:l,slots:a}){const d=M(),c=s=>l("change",s),t=()=>{var s;const r=(s=a.default)==null?void 0:s.call(a);return e.animated||e.swipeable?p(mn,{ref:d,loop:!1,class:$t("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:c},{default:()=>[r]}):r},v=s=>{const r=d.value;r&&r.state.active!==s&&r.swipeTo(s,{immediate:!e.inited})};return X(()=>e.currentIndex,v),be(()=>{v(e.currentIndex)}),Te({swipeRef:d}),()=>p("div",{class:$t("content",{animated:e.animated||e.swipeable})},[t()])}});const[qt,Ve]=ee("tabs"),hn={type:_e("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:de(0),duration:de(.3),animated:Boolean,ellipsis:G,swipeable:Boolean,scrollspy:Boolean,offsetTop:de(0),background:String,lazyRender:G,showHeader:G,lineWidth:ve,lineHeight:ve,beforeChange:Function,swipeThreshold:de(5),titleActiveColor:String,titleInactiveColor:String},Gt=Symbol(qt);var gn=F({name:qt,props:hn,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:l,slots:a}){let d,c,t,v,s;const r=M(),o=M(),m=M(),$=M(),h=Ht(),f=it(r),[i,g]=nn(),{children:u,linkChildren:b}=Ke(Gt),_=je({inited:!1,position:"",lineStyle:{},currentIndex:-1}),S=T(()=>u.length>+e.swipeThreshold||!e.ellipsis||e.shrink),P=T(()=>({borderColor:e.color,background:e.background})),x=(C,R)=>{var L;return(L=C.name)!=null?L:R},O=T(()=>{const C=u[_.currentIndex];if(C)return x(C,_.currentIndex)}),I=T(()=>Rt(e.offsetTop)),U=T(()=>e.sticky?I.value+d:0),D=C=>{const R=o.value,L=i.value;if(!S.value||!R||!L||!L[_.currentIndex])return;const ae=L[_.currentIndex].$el,Q=ae.offsetLeft-(R.offsetWidth-ae.offsetWidth)/2;v&&v(),v=tn(R,Q,C?0:+e.duration)},B=()=>{const C=_.inited;le(()=>{const R=i.value;if(!R||!R[_.currentIndex]||e.type!=="line"||Se(r.value))return;const L=R[_.currentIndex].$el,{lineWidth:ae,lineHeight:Q}=e,ge=L.offsetLeft+L.offsetWidth/2,ke={width:Le(ae),backgroundColor:e.color,transform:`translateX(${ge}px) translateX(-50%)`};if(C&&(ke.transitionDuration=`${e.duration}s`),ot(Q)){const Ye=Le(Q);ke.height=Ye,ke.borderRadius=Ye}_.lineStyle=ke})},H=C=>{const R=C<_.currentIndex?-1:1;for(;C>=0&&C<u.length;){if(!u[C].disabled)return C;C+=R}},Z=(C,R)=>{const L=H(C);if(!ot(L))return;const ae=u[L],Q=x(ae,L),ge=_.currentIndex!==null;_.currentIndex!==L&&(_.currentIndex=L,R||D(),B()),Q!==e.active&&(l("update:active",Q),ge&&l("change",Q,ae.title)),t&&!e.scrollspy&&ia(Math.ceil(vt(r.value)-I.value))},re=(C,R)=>{const L=u.findIndex((ae,Q)=>x(ae,Q)===C);Z(L===-1?0:L,R)},oe=(C=!1)=>{if(e.scrollspy){const R=u[_.currentIndex].$el;if(R&&f.value){const L=vt(R,f.value)-U.value;c=!0,s&&s(),s=an(f.value,L,C?0:+e.duration,()=>{c=!1})}}},q=(C,R,L)=>{const{title:ae,disabled:Q}=u[R],ge=x(u[R],R);Q||(jt(e.beforeChange,{args:[ge],done:()=>{Z(R),oe()}}),Aa(C)),l("clickTab",{name:ge,title:ae,event:L,disabled:Q})},ce=C=>{t=C.isFixed,l("scroll",C)},we=C=>{le(()=>{re(C),oe(!0)})},Ge=()=>{for(let C=0;C<u.length;C++){const{top:R}=pe(u[C].$el);if(R>U.value)return C===0?0:C-1}return u.length-1},Je=()=>{if(e.scrollspy&&!c){const C=Ge();Z(C)}},Qe=()=>{if(e.type==="line"&&u.length)return p("div",{class:Ve("line"),style:_.lineStyle},null)},E=()=>{var C,R,L;const{type:ae,border:Q,sticky:ge}=e,ke=[p("div",{ref:ge?void 0:m,class:[Ve("wrap"),{[ra]:ae==="line"&&Q}]},[p("div",{ref:o,role:"tablist",class:Ve("nav",[ae,{shrink:e.shrink,complete:S.value}]),style:P.value,"aria-orientation":"horizontal"},[(C=a["nav-left"])==null?void 0:C.call(a),u.map(Ye=>Ye.renderTitle(q)),Qe(),(R=a["nav-right"])==null?void 0:R.call(a)])]),(L=a["nav-bottom"])==null?void 0:L.call(a)];return ge?p("div",{ref:m},[ke]):ke},j=()=>{B(),le(()=>{var C,R;D(!0),(R=(C=$.value)==null?void 0:C.swipeRef.value)==null||R.resize()})};X(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],B),X(Pe,j),X(()=>e.active,C=>{C!==O.value&&re(C)}),X(()=>u.length,()=>{_.inited&&(re(e.active),B(),le(()=>{D(!0)}))});const W=()=>{re(e.active,!0),le(()=>{_.inited=!0,m.value&&(d=pe(m.value).height),D(!0)})},te=(C,R)=>l("rendered",C,R);return Te({resize:j,scrollTo:we}),ct(B),Nt(B),Ot(W),Xt(r,B),We("scroll",Je,{target:f,passive:!0}),b({id:h,props:e,setLine:B,scrollable:S,onRendered:te,currentName:O,setTitleRefs:g,scrollIntoView:D}),()=>p("div",{ref:r,class:Ve([e.type])},[e.showHeader?e.sticky?p(cn,{container:r.value,offsetTop:I.value,onScroll:ce},{default:()=>[E()]}):E():null,p(vn,{ref:$,count:u.length,inited:_.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:_.currentIndex,onChange:Z},{default:()=>{var C;return[(C=a.default)==null?void 0:C.call(a)]}})])}});const Jt=Symbol(),pn=()=>ca(Jt,null),[bn,Tt]=ee("tab"),yn=F({name:bn,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:ve,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:G},setup(e,{slots:l}){const a=T(()=>{const c={},{type:t,color:v,disabled:s,isActive:r,activeColor:o,inactiveColor:m}=e;v&&t==="card"&&(c.borderColor=v,s||(r?c.backgroundColor=v:c.color=v));const h=r?o:m;return h&&(c.color=h),c}),d=()=>{const c=p("span",{class:Tt("text",{ellipsis:!e.scrollable})},[l.title?l.title():e.title]);return e.dot||ot(e.badge)&&e.badge!==""?p(Ba,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[c]}):c};return()=>p("div",{id:e.id,role:"tab",class:[Tt([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:a.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[d()])}}),[xn,_n]=ee("swipe-item");var wn=F({name:xn,setup(e,{slots:l}){let a;const d=je({offset:0,inited:!1,mounted:!1}),{parent:c,index:t}=Ze(Zt);if(!c)return;const v=T(()=>{const o={},{vertical:m}=c.props;return c.size.value&&(o[m?"height":"width"]=`${c.size.value}px`),d.offset&&(o.transform=`translate${m?"Y":"X"}(${d.offset}px)`),o}),s=T(()=>{const{loop:o,lazyRender:m}=c.props;if(!m||a)return!0;if(!d.mounted)return!1;const $=c.activeIndicator.value,h=c.count.value-1,f=$===0&&o?h:$-1,i=$===h&&o?0:$+1;return a=t.value===$||t.value===f||t.value===i,a}),r=o=>{d.offset=o};return be(()=>{le(()=>{d.mounted=!0})}),Te({setOffset:r}),()=>{var o;return p("div",{class:_n(),style:v.value},[s.value?(o=l.default)==null?void 0:o.call(l):null])}}});const kn=ie(wn),[$n,nt]=ee("tab"),Tn=xe({},Yt,{dot:Boolean,name:ve,badge:ve,title:String,disabled:Boolean,titleClass:At,titleStyle:[String,Object],showZeroBadge:G});var Cn=F({name:$n,props:Tn,setup(e,{slots:l}){const a=Ht(),d=M(!1),c=ma(),{parent:t,index:v}=Ze(Gt);if(!t)return;const s=()=>{var i;return(i=e.name)!=null?i:v.value},r=()=>{d.value=!0,t.props.lazyRender&&le(()=>{t.onRendered(s(),e.title)})},o=T(()=>{const i=s()===t.currentName.value;return i&&!d.value&&r(),i}),m=M(""),$=M("");ua(()=>{const{titleClass:i,titleStyle:g}=e;m.value=i?K(i):"",$.value=g&&typeof g!="string"?da(me(g)):g});const h=i=>p(yn,qe({key:a,id:`${t.id}-${v.value}`,ref:t.setTitleRefs(v.value),style:$.value,class:m.value,isActive:o.value,controls:a,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:g=>i(c.proxy,v.value,g)},Fe(t.props,["type","color","shrink"]),Fe(e,["dot","badge","title","disabled","showZeroBadge"])),{title:l.title}),f=M(!o.value);return X(o,i=>{i?f.value=!1:Re(()=>{f.value=!0})}),X(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),fa(Jt,o),Te({id:a,renderTitle:h}),()=>{var i;const g=`${t.id}-${v.value}`,{animated:u,swipeable:b,scrollspy:_,lazyRender:S}=t.props;if(!l.default&&!u)return;const P=_||o.value;if(u||b)return p(kn,{id:a,role:"tabpanel",class:nt("panel-wrapper",{inactive:f.value}),tabindex:o.value?0:-1,"aria-hidden":!o.value,"aria-labelledby":g,"data-allow-mismatch":"attribute"},{default:()=>{var I;return[p("div",{class:nt("panel")},[(I=l.default)==null?void 0:I.call(l)])]}});const O=d.value||_||!S?(i=l.default)==null?void 0:i.call(l):null;return Be(p("div",{id:a,role:"tabpanel",class:nt("panel"),tabindex:P?0:-1,"aria-labelledby":g,"data-allow-mismatch":"attribute"},[O]),[[ut,P]])}}});const Pn=ie(Cn),Sn=ie(gn),[Qt,Bn]=ee("row"),ea=Symbol(Qt),Dn={tag:_e("div"),wrap:G,align:String,gutter:{type:[String,Number,Array],default:0},justify:String};var In=F({name:Qt,props:Dn,setup(e,{slots:l}){const{children:a,linkChildren:d}=Ke(ea),c=T(()=>{const s=[[]];let r=0;return a.forEach((o,m)=>{r+=Number(o.span),r>24?(s.push([m]),r-=24):s[s.length-1].push(m)}),s}),t=T(()=>{let s=0;Array.isArray(e.gutter)?s=Number(e.gutter[0])||0:s=Number(e.gutter);const r=[];return s&&c.value.forEach(o=>{const m=s*(o.length-1)/o.length;o.forEach(($,h)=>{if(h===0)r.push({right:m});else{const f=s-r[$-1].right,i=m-f;r.push({left:f,right:i})}})}),r}),v=T(()=>{const{gutter:s}=e,r=[];if(Array.isArray(s)&&s.length>1){const o=Number(s[1])||0;if(o<=0)return r;c.value.forEach((m,$)=>{$!==c.value.length-1&&m.forEach(()=>{r.push({bottom:o})})})}return r});return d({spaces:t,verticalSpaces:v}),()=>{const{tag:s,wrap:r,align:o,justify:m}=e;return p(s,{class:Bn({[`align-${o}`]:o,[`justify-${m}`]:m,nowrap:!r})},{default:()=>{var $;return[($=l.default)==null?void 0:$.call(l)]}})}}});const[En,Mn]=ee("col"),On={tag:_e("div"),span:de(0),offset:ve};var Rn=F({name:En,props:On,setup(e,{slots:l}){const{parent:a,index:d}=Ze(ea),c=T(()=>{if(!a)return;const{spaces:t,verticalSpaces:v}=a;let s={};if(t&&t.value&&t.value[d.value]){const{left:o,right:m}=t.value[d.value];s={paddingLeft:o?`${o}px`:null,paddingRight:m?`${m}px`:null}}const{bottom:r}=v.value[d.value]||{};return xe(s,{marginBottom:r?`${r}px`:null})});return()=>{const{tag:t,span:v,offset:s}=e;return p(t,{style:c.value,class:Mn({[v]:v,[`offset-${s}`]:s})},{default:()=>{var r;return[(r=l.default)==null?void 0:r.call(l)]}})}}});const zn=ie(Rn),[An,ue,Ue]=ee("dialog"),Ln=xe({},Ma,{title:String,theme:String,width:ve,message:[String,Function],callback:Function,allowHtml:Boolean,className:At,transition:_e("van-dialog-bounce"),messageAlign:String,closeOnPopstate:G,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:G,closeOnClickOverlay:Boolean,keyboardEnabled:G,destroyOnClose:Boolean}),Fn=[...Ea,"transition","closeOnPopstate","destroyOnClose"];var Nn=F({name:An,props:Ln,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:l,slots:a}){const d=M(),c=je({confirm:!1,cancel:!1}),t=b=>l("update:show",b),v=b=>{var _;t(!1),(_=e.callback)==null||_.call(e,b)},s=b=>()=>{e.show&&(l(b),e.beforeClose?(c[b]=!0,jt(e.beforeClose,{args:[b],done(){v(b),c[b]=!1},canceled(){c[b]=!1}})):v(b))},r=s("cancel"),o=s("confirm"),m=va(b=>{var _,S;if(!e.keyboardEnabled||b.target!==((S=(_=d.value)==null?void 0:_.popupRef)==null?void 0:S.value))return;({Enter:e.showConfirmButton?o:ht,Escape:e.showCancelButton?r:ht})[b.key](),l("keydown",b)},["enter","esc"]),$=()=>{const b=a.title?a.title():e.title;if(b)return p("div",{class:ue("header",{isolated:!e.message&&!a.default})},[b])},h=b=>{const{message:_,allowHtml:S,messageAlign:P}=e,x=ue("message",{"has-title":b,[P]:P}),O=ha(_)?_():_;return S&&typeof O=="string"?p("div",{class:x,innerHTML:O},null):p("div",{class:x},[O])},f=()=>{if(a.default)return p("div",{class:ue("content")},[a.default()]);const{title:b,message:_,allowHtml:S}=e;if(_){const P=!!(b||a.title);return p("div",{key:S?1:0,class:ue("content",{isolated:!P})},[h(P)])}},i=()=>p("div",{class:[pa,ue("footer")]},[e.showCancelButton&&p(ye,{size:"large",text:e.cancelButtonText||Ue("cancel"),class:ue("cancel"),style:{color:e.cancelButtonColor},loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:r},null),e.showConfirmButton&&p(ye,{size:"large",text:e.confirmButtonText||Ue("confirm"),class:[ue("confirm"),{[ga]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:o},null)]),g=()=>p(qa,{class:ue("footer")},{default:()=>[e.showCancelButton&&p(kt,{type:"warning",text:e.cancelButtonText||Ue("cancel"),class:ue("cancel"),color:e.cancelButtonColor,loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:r},null),e.showConfirmButton&&p(kt,{type:"danger",text:e.confirmButtonText||Ue("confirm"),class:ue("confirm"),color:e.confirmButtonColor,loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:o},null)]}),u=()=>a.footer?a.footer():e.theme==="round-button"?g():i();return()=>{const{width:b,title:_,theme:S,message:P,className:x}=e;return p(Wt,qe({ref:d,role:"dialog",class:[ue([S]),x],style:{width:Le(b)},tabindex:0,"aria-labelledby":_||P,onKeydown:m,"onUpdate:show":t},Fe(e,Fn)),{default:()=>[$(),f(),u()]})}}});let lt;const jn={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let Wn=xe({},jn);function Yn(){({instance:lt}=Oa({setup(){const{state:l,toggle:a}=Ra();return()=>p(Nn,qe(l,{"onUpdate:show":a}),null)}}))}function Hn(e){return Et?new Promise((l,a)=>{lt||Yn(),lt.open(xe({},Wn,e,{callback:d=>{(d==="confirm"?l:a)(d)}}))}):Promise.resolve(void 0)}const Ne=e=>Hn(xe({showCancelButton:!0},e)),[Vn,Un]=ee("divider"),Xn={dashed:Boolean,hairline:G,vertical:Boolean,contentPosition:_e("center")};var Kn=F({name:Vn,props:Xn,setup(e,{slots:l}){return()=>{var a;return p("div",{role:"separator",class:Un({dashed:e.dashed,hairline:e.hairline,vertical:e.vertical,[`content-${e.contentPosition}`]:!!l.default&&!e.vertical})},[!e.vertical&&((a=l.default)==null?void 0:a.call(l))])}}});const Zn=ie(Kn),qn={gap:{type:[Number,Object],default:24},icon:String,axis:_e("y"),magnetic:String,offset:{type:Object,default:()=>({x:-1,y:-1})},teleport:{type:[String,Object],default:"body"}},[Gn,Ct]=ee("floating-bubble");var Jn=F({name:Gn,inheritAttrs:!1,props:qn,emits:["click","update:offset","offsetChange"],setup(e,{slots:l,emit:a,attrs:d}){const c=M(),t=M({x:0,y:0,width:0,height:0}),v=T(()=>gt(e.gap)?e.gap.x:e.gap),s=T(()=>gt(e.gap)?e.gap.y:e.gap),r=T(()=>({top:s.value,right:Pe.value-t.value.width-v.value,bottom:ze.value-t.value.height-s.value,left:v.value})),o=M(!1);let m=!1;const $=T(()=>{const x={},O=Le(t.value.x),I=Le(t.value.y);return x.transform=`translate3d(${O}, ${I}, 0)`,(o.value||!m)&&(x.transition="none"),x}),h=()=>{if(!P.value)return;const{width:x,height:O}=pe(c.value),{offset:I}=e;t.value={x:I.x>-1?I.x:Pe.value-x-v.value,y:I.y>-1?I.y:ze.value-O-s.value,width:x,height:O}},f=zt();let i=0,g=0;const u=x=>{f.start(x),o.value=!0,i=t.value.x,g=t.value.y};We("touchmove",x=>{if(x.preventDefault(),f.move(x),e.axis!=="lock"&&!f.isTap.value){if(e.axis==="x"||e.axis==="xy"){let I=i+f.deltaX.value;I<r.value.left&&(I=r.value.left),I>r.value.right&&(I=r.value.right),t.value.x=I}if(e.axis==="y"||e.axis==="xy"){let I=g+f.deltaY.value;I<r.value.top&&(I=r.value.top),I>r.value.bottom&&(I=r.value.bottom),t.value.y=I}const O=Fe(t.value,["x","y"]);a("update:offset",O)}},{target:c});const _=()=>{o.value=!1,le(()=>{if(e.magnetic==="x"){const x=_t([r.value.left,r.value.right],t.value.x);t.value.x=x}if(e.magnetic==="y"){const x=_t([r.value.top,r.value.bottom],t.value.y);t.value.y=x}if(!f.isTap.value){const x=Fe(t.value,["x","y"]);a("update:offset",x),(i!==x.x||g!==x.y)&&a("offsetChange",x)}})},S=x=>{f.isTap.value?a("click",x):x.stopPropagation()};be(()=>{h(),le(()=>{m=!0})}),X([Pe,ze,v,s,()=>e.offset],h,{deep:!0});const P=M(!0);return ct(()=>{P.value=!0}),rt(()=>{e.teleport&&(P.value=!1)}),()=>{const x=Be(p("div",qe({class:Ct(),ref:c,onTouchstartPassive:u,onTouchend:_,onTouchcancel:_,onClickCapture:S,style:$.value},d),[l.default?l.default():p(Da,{name:e.icon,class:Ct("icon")},null)]),[[ut,P.value]]);return e.teleport?p(ba,{to:e.teleport},{default:()=>[x]}):x}}});const Qn=ie(Jn),[es,Ce,ts]=ee("list"),as={error:Boolean,offset:de(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:_e("down"),loadingText:String,finishedText:String,immediateCheck:G};var ns=F({name:es,props:as,emits:["load","update:error","update:loading"],setup(e,{emit:l,slots:a}){const d=M(e.loading),c=M(),t=M(),v=pn(),s=it(c),r=T(()=>e.scroller||s.value),o=()=>{le(()=>{if(d.value||e.finished||e.disabled||e.error||(v==null?void 0:v.value)===!1)return;const{direction:i}=e,g=+e.offset,u=pe(r);if(!u.height||Se(c))return;let b=!1;const _=pe(t);i==="up"?b=u.top-_.top<=g:b=_.bottom-u.bottom<=g,b&&(d.value=!0,l("update:loading",!0),l("load"))})},m=()=>{if(e.finished){const i=a.finished?a.finished():e.finishedText;if(i)return p("div",{class:Ce("finished-text")},[i])}},$=()=>{l("update:error",!1),o()},h=()=>{if(e.error){const i=a.error?a.error():e.errorText;if(i)return p("div",{role:"button",class:Ce("error-text"),tabindex:0,onClick:$},[i])}},f=()=>{if(d.value&&!e.finished&&!e.disabled)return p("div",{class:Ce("loading")},[a.loading?a.loading():p(xa,{class:Ce("loading-icon")},{default:()=>[e.loadingText||ts("loading")]})])};return X(()=>[e.loading,e.finished,e.error],o),v&&X(v,i=>{i&&o()}),ya(()=>{d.value=e.loading}),be(()=>{e.immediateCheck&&o()}),Te({check:o}),We("scroll",o,{target:r,passive:!0}),()=>{var i;const g=(i=a.default)==null?void 0:i.call(a),u=p("div",{ref:t,class:Ce("placeholder")},null);return p("div",{ref:c,role:"feed",class:Ce(),"aria-busy":d.value},[e.direction==="down"?g:u,f(),m(),h(),e.direction==="up"?g:u])}}});const ta=ie(ns),ss=ie(In),os="/travel-plan/assets/empty-travel-B0sIUAVX.png";function ls(e,l){const a=l.getTime();if(e.status=="completed")return ne.completed;if(e.status=="deleted")return ne.deleted;if(e.status=="cancelled")return ne.cancelled;const d=24*60*60*1e3;return a>=e.startDateTime-d&&a<e.startDateTime&&e.status!=ne.upcoming&&(e.status=ne.upcoming,fe().updateTravelPlan(e)),a>e.endDateTime&&e.status!=ne.expired&&(e.status=ne.expired,fe().updateTravelPlan(e)),a>=e.startDateTime&&a<=e.endDateTime&&e.status!=ne.inProgress&&(e.status=ne.inProgress,fe().updateTravelPlan(e)),e.status}function rs(e,l){const a=l.getTime();if(a<e.startDateTime)return 0;if(a>e.endDateTime)return 100;const d=e.endDateTime-e.startDateTime,c=a-e.startDateTime;return Math.round(c/d*100)}const is={class:"card-content relative z-10"},cs={class:"card-header flex justify-between items-start mb-3 gap-2"},us={class:"plan-title flex-1 text-base font-semibold text-gray-800 truncate mr-2"},ds={class:"header-right flex items-center gap-1.5"},ms={key:0,class:"tags-container flex flex-wrap gap-1.5 mb-2.5"},fs={key:1,class:"location-info flex items-center text-sm text-gray-500 mb-2.5"},vs={class:"location-text"},hs={key:2,class:"plan-description text-sm text-gray-600 mb-3 line-clamp-2 leading-relaxed"},gs={key:3,class:"budget-info flex items-center text-sm text-gray-500 mb-3"},ps={class:"budget-text"},bs={key:4,class:"progress-container h-2 bg-gray-200 rounded mb-3 mt-4 relative"},ys={class:"progress-text absolute right-0 -top-4 text-xs text-green-500 font-medium"},xs={class:"time-info flex mt-2"},_s={class:"time-item flex items-center w-full"},ws={class:"time-details flex-1"},ks={class:"time-range text-xs text-gray-600 inline-flex items-center gap-1 flex-wrap"},$s={class:"font-bold"},Ts={class:"font-bold"},Cs={key:0,class:"all-day-badge text-xs px-1.5 py-0.5 bg-gray-100 text-gray-500 rounded ml-1.5"},Ps=F({__name:"PlanCard",props:{plan:{}},emits:["update-plan","cancel-plan"],setup(e,{emit:l}){const a=e,d=fe(),{now:c}=$e(d),t=T(()=>ls(a.plan,c.value)),v=T(()=>rs(a.plan,c.value)),s=T(()=>a.plan.status==="cancelled"),r=T(()=>t.value==="completed"),o=M(!1),m=T(()=>{const D=[];return s.value?D.push({name:"撤销取消",icon:"revoke",callback:()=>{a.plan.status=ne.planned,d.updateTravelPlan(a.plan)}}):(r.value?D.push({name:"撤销完成",icon:"revoke",callback:()=>{a.plan.status=ne.planned,d.updateTravelPlan(a.plan)}}):(D.push({name:"编辑",icon:"edit",color:"green",callback:U}),D.push({name:"标记完成",icon:"success",color:"#10B981",callback:()=>{a.plan.status=ne.completed,d.updateTravelPlan(a.plan)}}),D.push({name:"延后一天",icon:"clock-o",color:"#1E90FF",callback:()=>{a.plan.startDateTime+=24*60*60*1e3,a.plan.endDateTime+=24*60*60*1e3,d.updateTravelPlan(a.plan)}})),D.push({name:"取消计划",icon:"delete-o",color:"#FF8C00",callback:()=>{a.plan.status=ne.cancelled,d.updateTravelPlan(a.plan)}}),D.push({name:"删除计划",icon:"fail",color:"red",callback:()=>{Ne({title:"确定要删除此计划吗？",confirmButtonText:"确定"}).then(()=>{a.plan.status=ne.deleted,d.deleteTravelPlan(a.plan)})}})),D}),$=T(()=>s.value?"bg-gray-50":""),h=T(()=>({planned:"bg-gray-400",upcoming:"bg-yellow-400","in-progress":"bg-green-400",completed:"bg-blue-400",expired:"bg-red-400",cancelled:"bg-gray-400",deleted:"bg-gray-400"})[t.value]),f=T(()=>({planned:"bg-gray-100 text-gray-800",upcoming:"bg-yellow-100 text-yellow-800","in-progress":"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",expired:"bg-red-100 text-red-800",cancelled:"bg-gray-200 text-gray-700",deleted:"bg-gray-100 text-gray-800"})[t.value]),i=T(()=>({planned:"未开始",upcoming:"即将开始","in-progress":"进行中",completed:"已完成",expired:"已结束",cancelled:"已取消",deleted:"已删除"})[t.value]),g=T(()=>({low:"bg-blue-100 text-blue-800",high:"bg-red-100 text-red-800",medium:""})[a.plan.priority]),u=T(()=>({low:"低优先级",high:"高优先级",medium:""})[a.plan.priority]),b=T(()=>{switch(t.value){case"cancelled":return"此计划已取消";case"upcoming":return`计划即将在 ${I.value} 后开始`;case"planned":return`${I.value} 后开始`;default:return null}}),_=T(()=>{switch(t.value){case"cancelled":return"text-red-500 bg-red-50";case"upcoming":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}}),S=T(()=>{switch(t.value){case"cancelled":return"info-o";case"upcoming":return"warning-o";default:return"clock-o"}}),P=D=>{const B=new Date(D);return{date:B.toLocaleDateString(),time:B.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}},x=T(()=>P(a.plan.startDateTime)),O=T(()=>P(a.plan.endDateTime)),I=T(()=>{const D=a.plan.startDateTime-c.value.getTime();if(D<=0)return"";const B=Math.floor(D/(1e3*60*60)),H=Math.floor(D%(1e3*60*60)/(1e3*60));return B>=24?`${Math.floor(B/24)}天`:B>=1?`${B}小时${H}分钟`:`${H}分钟`}),U=()=>{dt.push({name:"EditPlan",params:{travelPlanId:a.plan.travelPlanId}})};return(D,B)=>{const H=Ee,Z=ye,re=Ie;return y(),w("div",{class:K(["plan-card relative w-full bg-white rounded-xl shadow-sm p-4 mb-4 overflow-hidden transition-all duration-300 active:scale-[0.98] border border-gray-100",$.value]),onClick:U},[n("div",{class:K(["card-accent absolute top-0 left-0 w-1 h-full",h.value])},null,2),D.plan.priority!=="medium"?(y(),w("div",{key:0,class:K(["priority-flag absolute bottom-3 -right-5 w-20 py-0.5 text-center text-xs font-medium transform -rotate-45 z-100",g.value])},k(u.value),3)):z("",!0),n("div",is,[n("div",cs,[n("h3",us,k(D.plan.title),1),n("div",ds,[n("div",{class:K(["status-badge text-xs px-2 py-1 rounded-xl font-medium whitespace-nowrap ml-2",f.value])},k(i.value),3),p(Z,{round:"",size:"mini",plain:"",onClick:B[0]||(B[0]=mt(oe=>o.value=!0,["stop"])),class:"action-button p-0 w-6 h-6 min-w-6 border border-gray-200 bg-white text-gray-500"},{default:A(()=>[p(H,{name:"ellipsis",size:"14"})]),_:1})])]),D.plan.tags&&D.plan.tags.length>0?(y(),w("div",ms,[(y(!0),w(N,null,Y(D.plan.tags,(oe,q)=>(y(),w("span",{key:q,class:"tag text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-xl inline-flex items-center"},k(oe),1))),128))])):z("",!0),D.plan.location?(y(),w("div",fs,[p(H,{name:"location-o",class:"location-icon mr-1.5 text-gray-400"}),n("span",vs,k(D.plan.location.name),1)])):z("",!0),D.plan.description?(y(),w("p",hs,k(D.plan.description),1)):z("",!0),D.plan.budget?(y(),w("div",gs,[p(H,{name:"balance-o",class:"budget-icon mr-1.5 text-gray-400"}),n("span",ps,"预算: ¥"+k(D.plan.budget.toLocaleString()),1)])):z("",!0),t.value==="in-progress"?(y(),w("div",bs,[n("div",{class:"progress-bar h-full rounded bg-gradient-to-r from-green-400 to-green-600 transition-all duration-600 ease-in-out",style:me({width:`${v.value}%`})},null,4),n("span",ys,k(v.value)+"% ",1)])):z("",!0),n("div",xs,[n("div",_s,[p(H,{name:"calendar-o",class:"time-icon mr-2 text-gray-400 text-sm flex-shrink-0"}),n("div",ws,[n("span",ks,[n("span",$s,k(x.value.date),1),J(" "+k(x.value.time)+" ",1),B[2]||(B[2]=n("span",{class:"time-separator text-gray-400 mx-1 font-normal"},"→",-1)),n("span",Ts,k(O.value.date),1),J(" "+k(O.value.time),1)]),D.plan.isAllDay?(y(),w("span",Cs,"全天")):z("",!0)])])]),b.value?(y(),w("div",{key:5,class:K(["status-hint flex items-center text-xs px-2.5 py-1.5 rounded mt-2.5",_.value])},[p(H,{name:S.value,class:"hint-icon mr-1.5 text-sm"},null,8,["name"]),n("span",null,k(b.value),1)],2)):z("",!0)]),p(re,{teleport:"body",show:o.value,"onUpdate:show":B[1]||(B[1]=oe=>o.value=oe),title:D.plan.title,actions:m.value,"cancel-text":"取消","close-on-click-action":"",class:"action-sheet"},null,8,["show","title","actions"])],2)}}}),Pt=he(Ps,[["__scopeId","data-v-4ec6f8b5"]]);function Ss(e,l,a){const[d,c]=La(a==null?void 0:a.in,e,l);return+pt(d,a)==+pt(c,a)}const Bs={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},Ds=(e,l,a)=>{let d;const c=Bs[e];return typeof c=="string"?d=c:l===1?d=c.one:d=c.other.replace("{{count}}",String(l)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?d+"内":d+"前":d},Is={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},Es={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},Ms={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Os={date:at({formats:Is,defaultWidth:"full"}),time:at({formats:Es,defaultWidth:"full"}),dateTime:at({formats:Ms,defaultWidth:"full"})};function St(e,l,a){const d="eeee p";return Ss(e,l,a)?d:e.getTime()>l.getTime()?"'下个'"+d:"'上个'"+d}const Rs={lastWeek:St,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:St,other:"PP p"},zs=(e,l,a,d)=>{const c=Rs[e];return typeof c=="function"?c(l,a,d):c},As={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},Ls={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},Fs={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},Ns={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},js={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Ws={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Ys=(e,l)=>{const a=Number(e);switch(l==null?void 0:l.unit){case"date":return a.toString()+"日";case"hour":return a.toString()+"时";case"minute":return a.toString()+"分";case"second":return a.toString()+"秒";default:return"第 "+a.toString()}},Hs={ordinalNumber:Ys,era:Me({values:As,defaultWidth:"wide"}),quarter:Me({values:Ls,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Me({values:Fs,defaultWidth:"wide"}),day:Me({values:Ns,defaultWidth:"wide"}),dayPeriod:Me({values:js,defaultWidth:"wide",formattingValues:Ws,defaultFormattingWidth:"wide"})},Vs=/^(第\s*)?\d+(日|时|分|秒)?/i,Us=/\d+/i,Xs={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},Ks={any:[/^(前)/i,/^(公元)/i]},Zs={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},qs={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},Gs={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},Js={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},Qs={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},eo={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},to={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},ao={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},no={ordinalNumber:Fa({matchPattern:Vs,parsePattern:Us,valueCallback:e=>parseInt(e,10)}),era:Oe({matchPatterns:Xs,defaultMatchWidth:"wide",parsePatterns:Ks,defaultParseWidth:"any"}),quarter:Oe({matchPatterns:Zs,defaultMatchWidth:"wide",parsePatterns:qs,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Oe({matchPatterns:Gs,defaultMatchWidth:"wide",parsePatterns:Js,defaultParseWidth:"any"}),day:Oe({matchPatterns:Qs,defaultMatchWidth:"wide",parsePatterns:eo,defaultParseWidth:"any"}),dayPeriod:Oe({matchPatterns:to,defaultMatchWidth:"any",parsePatterns:ao,defaultParseWidth:"any"})},Bt={code:"zh-CN",formatDistance:Ds,formatLong:Os,formatRelative:zs,localize:Hs,match:no,options:{weekStartsOn:1,firstWeekContainsDate:4}},so={class:"w-full h-full flex flex-col gap-4 overflow-auto thin-scrollbar"},oo={key:0,class:"expired-plans-section"},lo={class:"current-plans-section"},ro={class:"date-header rounded sticky top-0 z-1000 bg-white px-4 py-1 backdrop-blur-sm"},io={class:"text-sm font-medium text-gray-800"},co={class:"ml-2 text-xs text-gray-500"},uo={key:1,class:"empty-state"},mo=F({__name:"index",setup(e){Lt();const l=fe(),{currentTravel:a,travelPlansBeforeToday:d,travelPlansFromToday:c}=$e(l),t=M(!1),v=r=>{const o=new Date,m=new Date(o);return m.setDate(m.getDate()+1),r.toDateString()===o.toDateString()?"今天":r.toDateString()===m.toDateString()?"明天":r.getFullYear()===o.getFullYear()?Xe(r,"M月d日 EEE",{locale:Bt}):Xe(r,"yyyy年M月d日 EEE",{locale:Bt})},s=T(()=>{var o;const r={};return(o=c.value)==null||o.forEach(m=>{const $=new Date(m.startDateTime).toDateString();r[$]||(r[$]=[]),r[$].push(m)}),r});return(r,o)=>{var h,f;const m=Zn,$=ft("remember-scroll");return Be((y(),w("div",so,[p(_a,{name:"fade-slide-y"},{default:A(()=>{var i;return[t.value&&((i=V(d))!=null&&i.length)?(y(),w("div",oo,[o[1]||(o[1]=n("div",{class:"section-header text-gray-500 text-sm px-2 py-1"}," 已结束的计划 ",-1)),p(De,{name:"list",tag:"div",class:"px-4"},{default:A(()=>[(y(!0),w(N,null,Y(V(d),(g,u)=>(y(),se(Pt,{key:g.id,plan:g,class:"expired-plan"},null,8,["plan"]))),128))]),_:1})])):z("",!0)]}),_:1}),Be(n("div",null,[p(m,{class:"custom-divider"},{default:A(()=>[n("span",{class:"divider-text",onClick:o[0]||(o[0]=i=>t.value=!t.value)},k(t.value?"隐藏更早的计划":"显示更早的计划"),1)]),_:1})],512),[[ut,(h=V(d))==null?void 0:h.length]]),n("div",lo,[(f=V(c))!=null&&f.length?(y(!0),w(N,{key:0},Y(s.value,(i,g)=>(y(),w("div",{key:g,class:"plan-group"},[n("div",ro,[n("span",io,k(v(new Date(g))),1),n("span",co," 开始"+k(i.length)+"个计划 ",1)]),p(De,{name:"list",tag:"div",class:"px-4"},{default:A(()=>[(y(!0),w(N,null,Y(i,u=>(y(),se(Pt,{key:u.id,plan:u,class:"current-plan"},null,8,["plan"]))),128))]),_:2},1024)]))),128)):(y(),w("div",uo,o[2]||(o[2]=[n("img",{src:os,alt:"空状态",class:"empty-image"},null,-1),n("p",{class:"empty-text"},"暂无旅行计划",-1),n("p",{class:"empty-hint"},"点击下方按钮创建您的旅行计划",-1)]))),o[3]||(o[3]=n("div",{class:"shrink-0 h-[220px]"},null,-1))])])),[[$]])}}}),fo=he(mo,[["__scopeId","data-v-ba7c1a7f"]]),vo="/travel-plan/assets/empty-checklist-HhKlvO9r.png",ho={class:"item-main flex items-start"},go={class:"item-content flex-1"},po={class:"item-header flex justify-between items-center mb-1.5"},bo={class:"item-meta flex items-center mb-1.5"},yo={class:"quantity text-sm text-gray-600"},xo={key:0,class:"item-notes flex items-center text-sm text-gray-500"},_o=F({__name:"ChecklistItemCard",props:{item:{}},setup(e){const l=e,a=fe(),d={low:"#1989fa",medium:"#ff976a",high:"#ee0a24"},c=T({get:()=>l.item.isPacked,set:i=>{l.item.isPacked=i,a.updateTravelChecklist(l.item)}}),t=M(!1),v=T(()=>Ae.filter([{name:"编辑",value:"edit",color:"green",icon:"edit"},{name:"设为高优先级",value:"high",color:"#ee0a24",icon:"fire"},{name:"设为中优先级",value:"medium",color:"#ff976a",icon:"warning"},{name:"设为低优先级",value:"low",color:"#1989fa",icon:"arrow-down"},{name:"删除",value:"delete",color:"red",icon:"delete"}],i=>i.value!==l.item.importance)),s=i=>{switch(i.value){case"edit":dt.push({name:"EditChecklist",params:{itemId:l.item.itemId}});break;case"delete":Ne({title:"确定删除该条清单吗？",message:"删除后无法恢复",confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{a.deleteTravelChecklist(l.item)});break;case"high":case"medium":case"low":l.item.importance=i.value,a.updateTravelChecklist(l.item);break}},r=M(1),o=M(!1),m=()=>{o.value=!0,r.value=.98},$=()=>{o.value=!1,r.value=1},h=()=>{},f=i=>{c.value=i};return(i,g)=>{const u=Na,b=Ee,_=ye,S=Ft,P=Ie;return y(),w("div",{class:K(["checklist-item relative w-full bg-white rounded-xl shadow-sm p-4 mb-3 transition-all duration-300 border border-gray-100 active:scale-[0.98]",{"bg-gray-50 opacity-80":i.item.isPacked}]),onClick:h,onTouchstart:m,onTouchend:$,style:me({transform:`scale(${r.value})`,"border-left":`4px solid ${d[i.item.importance]}`})},[n("div",ho,[p(u,{modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=x=>c.value=x),name:i.item.id.toString(),onChange:f,class:"item-checkbox mr-3 mt-0.5",shape:"square","checked-color":"#07c160","icon-size":"18px"},null,8,["modelValue","name"]),n("div",go,[n("div",po,[n("h3",{class:K(["item-name flex-1 text-base font-medium text-gray-800 truncate mr-2",{"line-through text-gray-500":i.item.isPacked}])},k(i.item.name),3),p(_,{round:"",size:"mini",plain:"",onClick:g[1]||(g[1]=mt(x=>t.value=!0,["stop"])),class:"action-button p-0 w-6 h-6 min-w-6 border border-gray-200 bg-white text-gray-500"},{default:A(()=>[p(b,{name:"ellipsis",size:"14"})]),_:1})]),n("div",bo,[p(S,{class:"category-tag mr-2 text-xs rounded",plain:"",type:"primary",size:"medium"},{default:A(()=>[J(k(i.item.tag),1)]),_:1}),n("span",yo," x"+k(i.item.quantity),1)]),i.item.notes?(y(),w("div",xo,[p(b,{name:"notes-o",size:"14",class:"mr-1"}),n("span",null,k(i.item.notes),1)])):z("",!0)])]),p(P,{teleport:"body",show:t.value,"onUpdate:show":g[2]||(g[2]=x=>t.value=x),actions:v.value,title:i.item.name,"cancel-text":"取消","close-on-click-action":"",onSelect:s},null,8,["show","actions","title"])],38)}}}),wo=he(_o,[["__scopeId","data-v-e0781993"]]),ko={class:"w-full h-full p-0 flex flex-col overflow-auto thin-scrollbar"},$o={class:"grouping-control"},To={key:0,class:"empty-state"},Co={class:"section-header"},Po={class:"category-title"},So={class:"category-count"},Bo=F({__name:"index",setup(e){const l=fe(),{travelChecklists:a}=$e(l),d=[{value:"tag",name:"标签"},{value:"importance",name:"优先级"},{value:"packed",name:"打包"}],c=M("tag"),t=M(!1),v=T(()=>{const o=a.value||[],m={};o.forEach(f=>{let i="";switch(c.value){case"tag":i=f.tag||"未分类";break;case"importance":i=f.importance||"medium";break;case"packed":i=f.isPacked?"已打包":"未打包";break}m[i]||(m[i]=[]),m[i].push(f)});const $={},h=Object.keys(m);switch(c.value){case"importance":["high","medium","low"].forEach(f=>{h.includes(f)&&($[f]=m[f])});break;case"packed":["未打包","已打包"].forEach(f=>{h.includes(f)&&($[f]=m[f])});break;default:h.sort().forEach(f=>{$[f]=m[f]})}return $}),s=T(()=>Object.keys(v.value).map(o=>c.value==="importance"?{key:o,display:o==="high"?"高优先级":o==="medium"?"中优先级":"低优先级",icon:o==="high"?"warning-o":o==="medium"?"records":"circle"}:c.value==="packed"?{key:o,display:o,icon:o==="已打包"?"checked":"clear"}:{key:o,display:o,icon:"label-o"}));async function r(o,m){o.isPacked=m,await l.updateTravelChecklist(o)}return(o,m)=>{const $=Ee,h=ye,f=Ie,i=ta,g=ft("remember-scroll");return Be((y(),w("div",ko,[n("div",$o,[p(h,{plain:"",hairline:"",type:"primary",size:"small",onClick:m[0]||(m[0]=u=>t.value=!0)},{icon:A(()=>[p($,{name:"apps-o"})]),default:A(()=>{var u;return[J(" "+k((u=d.find(b=>b.value===c.value))==null?void 0:u.name),1)]}),_:1}),p(f,{teleport:"body",show:t.value,"onUpdate:show":m[1]||(m[1]=u=>t.value=u),actions:d,"cancel-text":"取消","close-on-click-action":"",onSelect:m[2]||(m[2]=u=>{c.value=u.value})},null,8,["show"])]),p(i,{class:"travel-checklist-list thin-scrollbar"},{default:A(()=>[s.value.length===0?(y(),w("div",To,m[3]||(m[3]=[n("img",{src:vo,alt:"空状态",class:"empty-image"},null,-1),n("p",{class:"empty-text"},"暂无清单项",-1),n("p",{class:"empty-hint"},"点击下方按钮添加您的旅行物品",-1)]))):(y(),se(De,{key:1,name:"fade-slide-y",tag:"div",class:"categories-container"},{default:A(()=>[(y(!0),w(N,null,Y(s.value,({key:u,display:b,icon:_})=>(y(),w("div",{key:u,class:K(["category-section",{"packed-section":c.value==="packed"&&u==="已打包"}])},[n("div",Co,[p($,{name:_,class:"category-icon"},null,8,["name"]),n("span",Po,k(b),1),n("span",So,k(v.value[u].length),1)]),p(De,{name:"list",tag:"div",class:"item-container"},{default:A(()=>[(y(!0),w(N,null,Y(v.value[u],S=>(y(),se(wo,{key:S.id,item:S,class:K({"packed-item":S.isPacked}),"onUpdate:isPacked":P=>r(S,P)},null,8,["item","class","onUpdate:isPacked"]))),128))]),_:2},1024)],2))),128))]),_:1})),m[4]||(m[4]=n("div",{class:"shrink-0 h-[220px]"},null,-1))]),_:1,__:[4]})])),[[g]])}}}),Do=he(Bo,[["__scopeId","data-v-3001d752"]]),Io="/travel-plan/assets/empty-expense-CM_oImbK.png",Eo={class:"item-main flex items-start"},Mo={class:"item-content flex-1"},Oo={class:"item-header flex justify-between items-center mb-1.5"},Ro={class:"amount-info flex items-baseline"},zo={class:"currency text-sm font-medium text-gray-500 mr-1"},Ao={key:0,class:"location-info flex items-center text-sm text-gray-500 mb-2.5"},Lo={class:"location-text"},Fo={class:"item-meta flex flex-col mb-1.5"},No={key:0,class:"description text-sm text-gray-700 mb-1"},jo={class:"date-info flex items-center text-xs text-gray-500"},Wo={class:"item-footer flex flex-wrap items-center"},Yo=F({__name:"ExpenseCard",props:{item:{}},setup(e){const l=e,a=fe(),d=T(()=>l.item.amount>1e3?"#ee0a24":l.item.amount>500?"#ff976a":"#1989fa"),c=M(!1),t=T(()=>Ae.reject([{name:"编辑",value:"edit",color:"green",icon:"edit"},{name:"标记为已报销",value:"reimburse",color:"#07c160",icon:"passed"},{name:"标记为未报销",value:"unreimburse",color:"#1989fa",icon:"revoke"},{name:"删除",value:"delete",color:"red",icon:"delete"}],i=>i.value==="reimburse"&&l.item.isReimbursed||i.value==="unreimburse"&&!l.item.isReimbursed)),v=i=>{switch(i.value){case"edit":dt.push({name:"EditExpense",params:{expenseId:l.item.expenseId}});break;case"delete":Ne({title:"确定删除这笔花费吗？",message:"删除后无法恢复",confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{a.deleteTravelExpense(l.item)});break;case"reimburse":l.item.isReimbursed=!0;break;case"unreimburse":l.item.isReimbursed=!1;break}},s=M(1),r=M(!1),o=()=>{r.value=!0,s.value=.98},m=()=>{r.value=!1,s.value=1},$=()=>{},h=i=>Xe(new Date(i),"yyyy/MM/dd HH:mm"),f=i=>({cash:"现金",credit_card:"信用卡",alipay:"支付宝",wechat_pay:"微信支付",bank_transfer:"银行转账",other:"其他"})[i]||i;return(i,g)=>{const u=Ee,b=ye,_=Ft,S=Ie;return y(),w("div",{class:K(["expense-item relative w-full bg-white rounded-xl shadow-sm p-4 mb-3 transition-all duration-300 border border-gray-100 active:scale-[0.98]",{"bg-gray-50 opacity-80":i.item.isReimbursed}]),onClick:$,onTouchstart:o,onTouchend:m,style:me({transform:`scale(${s.value})`,"border-left":`4px solid ${d.value}`})},[n("div",Eo,[n("div",Mo,[n("div",Oo,[n("div",Ro,[n("span",zo,k(i.item.currency),1),n("h3",{class:K(["amount text-xl font-semibold text-gray-800",{"line-through text-gray-500":i.item.isReimbursed}])},k(i.item.amount),3)]),p(b,{round:"",size:"mini",plain:"",onClick:g[0]||(g[0]=mt(P=>c.value=!0,["stop"])),class:"action-button p-0 w-6 h-6 min-w-6 border border-gray-200 bg-white text-gray-500"},{default:A(()=>[p(u,{name:"ellipsis",size:"14"})]),_:1})]),i.item.location?(y(),w("div",Ao,[p(u,{name:"location-o",class:"location-icon mr-1.5 text-gray-400"}),n("span",Lo,k(i.item.location.name),1)])):z("",!0),n("div",Fo,[i.item.description?(y(),w("p",No,k(i.item.description),1)):z("",!0),n("div",jo,[p(u,{name:"clock-o",size:"12",class:"mr-1"}),n("span",null,k(h(i.item.dateTime)),1)])]),n("div",Wo,[i.item.paymentMethod?(y(),se(_,{key:0,class:"payment-tag mr-2 mb-1 text-xs rounded",plain:"",type:"primary",size:"medium"},{default:A(()=>[J(k(f(i.item.paymentMethod)),1)]),_:1})):z("",!0),(y(!0),w(N,null,Y(i.item.tags,P=>(y(),se(_,{key:P,class:"expense-tag mr-2 mb-1 text-xs rounded",plain:"",type:"success",size:"medium"},{default:A(()=>[J(k(P),1)]),_:2},1024))),128)),i.item.isReimbursed?(y(),se(_,{key:1,class:"reimbursed-tag mr-2 mb-1 text-xs rounded",plain:"",type:"success",size:"medium"},{default:A(()=>g[2]||(g[2]=[J(" 已报销 ")])),_:1,__:[2]})):z("",!0)])])]),p(S,{teleport:"body",show:c.value,"onUpdate:show":g[1]||(g[1]=P=>c.value=P),actions:t.value,title:i.item.description||"旅行花费","cancel-text":"取消","close-on-click-action":"",onSelect:v},null,8,["show","actions","title"])],38)}}}),Ho=he(Yo,[["__scopeId","data-v-91241413"]]),Vo={class:"w-full h-full p-0 flex flex-col overflow-auto thin-scrollbar"},Uo={class:"grouping-control"},Xo={key:0,class:"empty-state"},Ko={key:0,class:"summary-cards"},Zo={class:"summary-card total"},qo={class:"summary-amount"},Go={class:"summary-card reimbursed"},Jo={class:"summary-amount"},Qo={class:"section-header"},el={class:"category-title"},tl={class:"category-count"},al={class:"category-total"},nl=F({__name:"index",setup(e){const l=fe(),{travelExpenses:a}=$e(l),d=[{value:"tag",name:"标签"},{value:"date",name:"日期"},{value:"currency",name:"货币"},{value:"payment",name:"支付方式"}],c=M("date"),t=M(!1),v=h=>new Date(h).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric",weekday:"short"}),s=T(()=>{const h=a.value||[],f={};h.forEach(u=>{var _;let b="";switch(c.value){case"tag":b=(_=u.tags)!=null&&_.length?u.tags[0]:"未分类";break;case"date":b=v(u.dateTime);break;case"currency":b=u.currency||"未知货币";break;case"payment":b=u.paymentMethod||"其他";break}f[b]||(f[b]=[]),f[b].push(u)});const i={};let g=Object.keys(f);switch(c.value){case"date":g.sort((_,S)=>f[S][0].dateTime-f[_][0].dateTime);break;case"currency":const u=["CNY","USD","EUR","JPY","GBP"];g.sort((_,S)=>{const P=u.indexOf(_),x=u.indexOf(S);return P===-1&&x===-1?_.localeCompare(S):P===-1?1:x===-1?-1:P-x});break;case"payment":const b=["alipay","wechat_pay","credit_card","cash","bank_transfer"];g.sort((_,S)=>{const P=b.indexOf(_),x=b.indexOf(S);return P===-1&&x===-1?_.localeCompare(S):P===-1?1:x===-1?-1:P-x});break;case"tag":default:g.sort((_,S)=>_.localeCompare(S))}return g.forEach(u=>{i[u]=f[u]}),i}),r=T(()=>{const h={};return Object.keys(s.value).forEach(f=>{const i=s.value[f];if(c.value==="currency")h[f]={amount:i.reduce((g,u)=>g+u.amount,0),currency:f};else{const g={};i.forEach(u=>{g[u.currency]||(g[u.currency]=0),g[u.currency]+=u.amount}),h[f]={amount:Object.values(g).reduce((u,b)=>u+b,0),currency:Object.entries(g).map(([u,b])=>`${b.toFixed(2)} ${u}`).join(" + ")}}}),h}),o=T(()=>{const h={};return(a.value||[]).forEach(f=>{h[f.currency]||(h[f.currency]=0),h[f.currency]+=f.amount}),h}),m=T(()=>{const h={};return(a.value||[]).filter(f=>f.isReimbursed).forEach(f=>{h[f.currency]||(h[f.currency]=0),h[f.currency]+=f.amount}),h}),$=T(()=>Object.keys(s.value).map(h=>c.value==="payment"?{key:h,display:h==="cash"?"现金":h==="credit_card"?"信用卡":h==="alipay"?"支付宝":h==="wechat_pay"?"微信支付":h==="bank_transfer"?"银行转账":"其他支付",icon:h==="cash"?"cash-o":h==="credit_card"?"credit-pay":h==="alipay"?"alipay":h==="wechat_pay"?"wechat":h==="bank_transfer"?"balance-o":"more-o"}:c.value==="currency"?{key:h,display:h==="CNY"?"人民币":h==="USD"?"美元":h==="EUR"?"欧元":h==="JPY"?"日元":h==="GBP"?"英镑":h,icon:"gold-coin-o"}:{key:h,display:h,icon:c.value==="date"?"calendar-o":"label-o"}));return(h,f)=>{const i=Ee,g=ye,u=Ie,b=zn,_=ss,S=ta,P=ft("remember-scroll");return Be((y(),w("div",Vo,[n("div",Uo,[p(g,{plain:"",hairline:"",type:"primary",size:"small",onClick:f[0]||(f[0]=x=>t.value=!0)},{icon:A(()=>[p(i,{name:"apps-o"})]),default:A(()=>{var x;return[J(" "+k((x=d.find(O=>O.value===c.value))==null?void 0:x.name),1)]}),_:1}),p(u,{teleport:"body",show:t.value,"onUpdate:show":f[1]||(f[1]=x=>t.value=x),actions:d,"cancel-text":"取消","close-on-click-action":"",onSelect:f[2]||(f[2]=x=>{c.value=x.value})},null,8,["show"])]),p(S,{class:"travel-expense-list thin-scrollbar"},{default:A(()=>[$.value.length===0?(y(),w("div",Xo,f[3]||(f[3]=[n("img",{src:Io,alt:"空状态",class:"empty-image"},null,-1),n("p",{class:"empty-text"},"暂无花费记录",-1),n("p",{class:"empty-hint"},"点击下方按钮添加您的旅行花费",-1)]))):(y(),se(De,{key:1,name:"fade-slide-y",tag:"div",class:"categories-container"},{default:A(()=>[V(a)&&V(a).length>0?(y(),w("div",Ko,[p(_,{gutter:"8"},{default:A(()=>[p(b,{span:"12"},{default:A(()=>[n("div",Zo,[f[4]||(f[4]=n("div",{class:"summary-title"},"总花费",-1)),n("div",qo,[Object.keys(o.value).length>1?(y(!0),w(N,{key:0},Y(o.value,(x,O)=>(y(),w("div",{key:O},k(x.toFixed(2))+" "+k(O),1))),128)):(y(),w(N,{key:1},[J(k(Object.values(o.value)[0]||"0.00")+" "+k(Object.keys(o.value)[0]||"CNY"),1)],64))])])]),_:1}),p(b,{span:"12"},{default:A(()=>{var x;return[n("div",Go,[f[5]||(f[5]=n("div",{class:"summary-title"},"已报销",-1)),n("div",Jo,[Object.keys(m.value).length>1?(y(!0),w(N,{key:0},Y(m.value,(O,I)=>(y(),w("div",{key:I},k(O.toFixed(2))+" "+k(I),1))),128)):(y(),w(N,{key:1},[J(k(((x=Object.values(m.value)[0])==null?void 0:x.toFixed(2))||"0.00")+" "+k(Object.keys(m.value)[0]||"CNY"),1)],64))])])]}),_:1})]),_:1})])):z("",!0),(y(!0),w(N,null,Y($.value,({key:x,display:O,icon:I})=>(y(),w("div",{key:x,class:"category-section"},[n("div",Qo,[p(i,{name:I,class:"category-icon"},null,8,["name"]),n("span",el,k(O),1),n("span",tl,k(s.value[x].length)+"项 ",1),n("span",al,k(r.value[x].currency),1)]),p(De,{name:"list",tag:"div",class:"item-container"},{default:A(()=>[(y(!0),w(N,null,Y(s.value[x],U=>(y(),se(Ho,{key:U.expenseId,item:U,class:K({"reimbursed-item":U.isReimbursed})},null,8,["item","class"]))),128))]),_:2},1024)]))),128))]),_:1})),f[6]||(f[6]=n("div",{class:"shrink-0 h-[220px]"},null,-1))]),_:1,__:[6]})])),[[P]])}}}),sl=he(nl,[["__scopeId","data-v-25622eff"]]),ol={class:"bg-white rounded-xl shadow-sm p-4 border border-gray-100"},ll={class:"space-y-4"},rl={class:"bg-blue-50 p-4 rounded-lg"},il={class:"text-base font-medium text-gray-800 mb-1"},cl={key:0,class:"text-sm text-gray-600"},ul={class:"grid grid-cols-2 gap-3"},dl={class:"bg-gray-50 p-3 rounded-lg"},ml={class:"text-sm font-medium text-gray-700"},fl={class:"bg-gray-50 p-3 rounded-lg"},vl={class:"text-sm font-medium text-gray-700"},hl=F({__name:"TravelBasicInfo",props:{travel:{},travelDays:{}},setup(e){const l=e,a=T(()=>{if(!l.travel.startDateTime||!l.travel.endDateTime)return"";const c=new Date(l.travel.startDateTime),t=new Date(l.travel.endDateTime);return`${c.toLocaleDateString()} - ${t.toLocaleDateString()}`}),d=T(()=>l.travel.description&&l.travel.description.trim().length>0);return(c,t)=>(y(),w("div",ol,[t[2]||(t[2]=n("div",{class:"flex items-center mb-4"},[n("div",{class:"h-5 w-1 bg-blue-500 rounded-full mr-2"}),n("h2",{class:"text-lg font-semibold text-gray-800"},"旅行基本信息")],-1)),n("div",ll,[n("div",rl,[n("h3",il,k(c.travel.name),1),d.value?(y(),w("p",cl,k(c.travel.description),1)):z("",!0)]),n("div",ul,[n("div",dl,[t[0]||(t[0]=n("p",{class:"text-xs text-gray-500 mb-1"},"旅行时间",-1)),n("p",ml,k(a.value),1)]),n("div",fl,[t[1]||(t[1]=n("p",{class:"text-xs text-gray-500 mb-1"},"旅行天数",-1)),n("p",vl,k(c.travelDays)+" 天",1)])])])]))}}),gl=he(hl,[["__scopeId","data-v-d25876fd"]]),pl=F({__name:"MapView",props:{plans:{},travelId:{}},setup(e){const l=e,a=M(null),d=M(),c=M(),t=M([]),v={low:"#4CAF50",medium:"#FFC107",high:"#F44336"},s={completed:"#9E9E9E",cancelled:"#607D8B",expired:"#795548",default:"#2196F3"},r={飞机出行:"fa fa-plane",高铁出行:"fa fa-train",自驾游:"fa fa-car",租车服务:"fa fa-car",酒店住宿:"fa fa-bed",特色民宿:"fa fa-home",青旅体验:"fa fa-users",露营帐篷:"fa fa-fire",景区门票:"fa fa-ticket",导游服务:"fa fa-female",旅行保险:"fa fa-shield",行李托运:"fa fa-suitcase",机场接送:"fa fa-plane",当地美食:"fa fa-cutlery",美食街:"fa fa-road",特产购物:"fa fa-shopping-bag",景点拍照:"fa fa-camera",徒步路线:"fa fa-male",签证服务:"fa fa-book"},o=(g,u="MM/dd HH:mm")=>{const b=new Date(g);return b.getMinutes()===0&&(b.getHours()===0?u=u.replace(" HH:mm","日").replace("/","月"):u=u.replace(":mm","点")),Xe(new Date(g),u)},m=async()=>{a.value&&(d.value=new ja({target:a.value,layers:[new bt({source:new yt({url:await Va(),maxZoom:17})}),new bt({source:new yt({url:await Ua(),maxZoom:17})})],overlays:[]}),c.value=new Wa({popupClass:"default",closeBox:!0,onclose:()=>{var g;(g=d.value)==null||g.getTargetElement().focus()}}),d.value.addOverlay(c.value))},$=(g,u)=>{var S,P;if(!c.value||g.length===0)return;const b=Ae.sortBy(g,"startDateTime");let _='<div class="plan-popup">';g.length>1&&(_+=`<div class="popup-header">
      <h4>${g.length}项计划</h4>
    </div>`),_+='<div class="plan-list">',b.forEach(x=>{var D;const O=o(x.startDateTime),I=o(x.endDateTime),U=h(x);_+=`
      <div class="plan-item" data-plan-id="${x.travelPlanId}">
        <div class="plan-header">
          <span class="status-dot" style="background-color: ${U}"></span>
          <h5>${x.title}</h5>
          <span class="plan-status">${f(x.status)}</span>
        </div>
        <div class="plan-time">
          <i class="fa fa-clock-o"></i> ${O} - ${I}
        </div>
        ${x.description?`<div class="plan-description">${x.description}</div>`:""}
        ${(D=x.tags)!=null&&D.length?`
          <div class="plan-tags">
            ${x.tags.map(B=>`
              <span class="plan-tag">
                <i class="${r[B]||"fa fa-tag"}"></i> ${B}
              </span>
            `).join("")}
          </div>
        `:""}
      </div>
      <hr class="plan-divider">
    `}),_+="</div></div>",(S=c.value)==null||S.show(u,_),(P=c.value)==null||P.setPosition(u)},h=g=>{const u=Date.now();return g.status==="completed"?s.completed:g.status==="cancelled"?s.cancelled:g.endDateTime<u?s.expired:v[g.priority]||s.default},f=g=>({planning:"计划中",inProgress:"进行中",completed:"已完成",cancelled:"已取消"})[g]||"",i=()=>{var u;[...t.value].forEach(b=>{var _;l.plans.findIndex(S=>{var P;return(P=b.getElement())==null?void 0:P.className.includes(S.travelPlanId)})===-1&&((_=d.value)==null||_.removeOverlay(b),Ae.remove(t.value,b))});const g=Ae.groupBy(l.plans,b=>`${b.location.coordinates.lng},${b.location.coordinates.lat}`);if(Object.entries(g).forEach(([b,_])=>{var Z,re,oe;const[S,P]=b.split(",").map(Number),O=xt([S,P]),I=_[0],U=(Z=I.tags)!=null&&Z.length&&r[I.tags[0]]?`<i class="${r[I.tags[0]]}"></i>`:'<i class="fa fa-map-marker"></i>',D=h(I),B=_.length>1?"#9C27B0":D,H=t.value.findIndex(q=>_.some(ce=>{var we;return(we=q.getElement())==null?void 0:we.className.includes(ce.travelPlanId)}));if(H===-1){const q=new Ya({color:B});t.value.push(q),(re=d.value)==null||re.addOverlay(q),q.setClassName(_.map(ce=>ce.travelPlanId).join(" ")),q.show(O,U),(oe=q.getElement())==null||oe.addEventListener("click",ce=>{ce.stopPropagation(),$(_,O)})}else{const q=t.value[H];q.setColor(B),q.show(O,U),q.setClassName(_.map(ce=>ce.travelPlanId).join(" "))}}),l.plans.length){const b=l.plans[l.plans.length-1],_=[b.location.coordinates.lng,b.location.coordinates.lat];(u=d.value)==null||u.setView(new Ha({center:xt(_),zoom:12}))}};return X(()=>l.plans,()=>{i()},{deep:!0}),be(async()=>{await le(),await m(),await i()}),(g,u)=>(y(),w("div",{ref_key:"mapElement",ref:a,class:"w-full h-full"},null,512))}}),bl=he(pl,[["__scopeId","data-v-64e81a63"]]),yl={class:"p-4"},xl={class:"mb-6"},_l={class:"grid grid-cols-2 gap-3"},wl={class:"text-sm font-medium capitalize"},kl={class:"text-2xl font-bold mt-1"},$l={class:"mb-6"},Tl={class:"flex space-x-3 overflow-x-auto pb-2"},Cl={class:"text-sm font-medium capitalize"},Pl={class:"text-xl font-bold mt-1"},Sl={class:"mb-6"},Bl={class:"flex flex-wrap gap-2"},Dl={class:"text-purple-600"},Il={key:0,class:"mb-6"},El={class:"flex justify-between items-center mb-3"},Ml={class:"flex items-center"},Ol={class:"text-sm text-gray-500 mr-2"},Rl=F({__name:"PlanStatistics",props:{plans:{},travelId:{}},setup(e){const l=e,a=T(()=>{const f={planned:0,upcoming:0,"in-progress":0,expired:0,completed:0,cancelled:0};return l.plans.forEach(i=>{i.status in f&&f[i.status]++}),f}),d=f=>{switch(f){case"planned":return"计划";case"upcoming":return"即将开始";case"in-progress":return"进行中";case"expired":return"已结束";case"completed":return"已完成";case"cancelled":return"已取消";default:return f}},c=T(()=>l.plans.reduce((f,i)=>(f[i.priority]=(f[i.priority]||0)+1,f),{})),t=f=>{switch(f){case"high":return"高";case"medium":return"中";case"low":return"低";default:return f}},v=T(()=>{const f=new Map;return l.plans.forEach(i=>{var g;(g=i.tags)==null||g.forEach(u=>{f.set(u,(f.get(u)||0)+1)})}),Array.from(f.entries()).sort((i,g)=>g[1]-i[1])}),s=T(()=>l.plans.filter(f=>{var i;return((i=f.location)==null?void 0:i.coordinates)&&f.startDateTime>=new Date().setHours(0,0,0,0)})),r=M(!1),o=M(!1);be(()=>{setTimeout(()=>{r.value=!0},300)});const m={planned:"bg-indigo-100 text-indigo-800",upcoming:"bg-blue-100 text-blue-800",inProgress:"bg-amber-100 text-amber-800",expired:"bg-gray-100 text-gray-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},$={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"},h=()=>{o.value=!o.value};return(f,i)=>(y(),w("div",yl,[i[6]||(i[6]=n("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"旅行计划统计",-1)),n("button",{onClick:i[0]||(i[0]=g=>f.$router.push({name:"RoadMap"})),class:"px-2 py-1 bg-blue-500 hover:bg-blue-600 rounded-md transition-colors mb-4"},i[1]||(i[1]=[n("span",{class:"text-white text-sm"},"查看路线图",-1)])),n("div",xl,[i[2]||(i[2]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"计划状态",-1)),n("div",_l,[(y(!0),w(N,null,Y(a.value,(g,u)=>(y(),w("div",{key:u,class:K(["sub-card rounded-xl p-3 shadow-sm",m[u]])},[n("div",wl,k(d(u)),1),n("div",kl,k(g),1)],2))),128))])]),n("div",$l,[i[3]||(i[3]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"优先级分布",-1)),n("div",Tl,[(y(!0),w(N,null,Y(c.value,(g,u)=>(y(),w("div",{key:u,class:K(["sub-card flex-shrink-0 rounded-xl p-4 shadow-sm min-w-[120px]",$[u]])},[n("div",Cl,k(t(u)),1),n("div",Pl,k(g),1)],2))),128))])]),n("div",Sl,[i[4]||(i[4]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"热门标签",-1)),n("div",Bl,[(y(!0),w(N,null,Y(v.value.slice(0,8),([g,u],b)=>(y(),w("span",{key:b,class:"sub-card bg-gradient-to-r from-purple-100 to-blue-100 text-purple-800 text-sm px-3 py-2 rounded-lg font-medium shadow-xs"},[J(" #"+k(g)+" ",1),n("span",Dl,"("+k(u)+")",1)]))),128))])]),s.value.length>0?(y(),w("div",Il,[n("div",El,[i[5]||(i[5]=n("h3",{class:"text-lg font-semibold text-gray-800"},"位置分布",-1)),n("div",Ml,[n("span",Ol,k(s.value.length)+" 个地点 ",1),n("div",{onClick:h,class:"text-sm text-blue-600 hover:text-blue-800 focus:outline-none transition-colors"},k(o.value?"▼":"▲"),1)])]),n("div",{class:K(["bg-gray-50 rounded-xl overflow-hidden shadow-sm border border-gray-100 transition-all duration-300 ease-in-out",{"h-60":!o.value,"h-[80vh]":o.value}])},[r.value?(y(),se(bl,{key:0,plans:s.value,travelId:f.travelId},null,8,["plans","travelId"])):z("",!0)],2)])):z("",!0)]))}}),zl=he(Rl,[["__scopeId","data-v-473a9574"]]),Al={class:"px-4 py-6"},Ll={class:"bg-white rounded-xl shadow-sm p-5 mb-6"},Fl={class:"flex items-center justify-between mb-2"},Nl={class:"text-gray-600 text-sm"},jl={class:"font-bold text-primary-600"},Wl={class:"relative pt-1"},Yl={class:"overflow-hidden h-3 mb-4 text-xs flex rounded-full bg-gray-200"},Hl={class:"text-xs text-gray-500 mt-1"},Vl={key:0,class:"bg-white rounded-xl shadow-sm p-5 mb-6"},Ul={class:"space-y-4"},Xl={class:"flex justify-between items-center mb-1"},Kl={class:"text-gray-700 font-medium"},Zl={class:"text-sm font-semibold"},ql={class:"text-primary-600"},Gl={class:"w-full bg-gray-100 rounded-full h-2"},Jl={key:1,class:"bg-white rounded-xl shadow-sm p-5"},Ql={class:"space-y-4"},er={class:"flex justify-between items-center mb-1"},tr={class:"flex items-center"},ar={class:"text-gray-700 font-medium capitalize"},nr={class:"text-sm font-semibold"},sr={class:"text-primary-600"},or={class:"w-full bg-gray-100 rounded-full h-2"},lr=F({__name:"ChecklistStatistics",props:{items:{}},setup(e){const l=e,a=T(()=>{const s=l.items.length,r=l.items.filter(m=>m.isPacked).length,o=s-r;return{total:s,completed:r,remaining:o,percentage:s>0?Math.round(r/s*100):0}}),d=T(()=>{const s=new Map;return l.items.forEach(r=>{s.has(r.tag)||s.set(r.tag,{total:0,completed:0});const o=s.get(r.tag);o.total++,r.isPacked&&o.completed++}),Array.from(s.entries()).sort((r,o)=>o[1].total-r[1].total)}),c=T(()=>l.items.reduce((s,r)=>(s[r.importance]||(s[r.importance]={total:0,completed:0}),s[r.importance].total++,r.isPacked&&s[r.importance].completed++,s),{})),t=s=>({high:"bg-red-500",medium:"bg-yellow-500",low:"bg-green-500"})[s.toLowerCase()]||"bg-purple-500",v=s=>({high:"高",medium:"中",low:"低"})[s.toLowerCase()]||"未知";return(s,r)=>(y(),w("div",Al,[r[3]||(r[3]=n("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"旅行清单统计",-1)),n("div",Ll,[r[0]||(r[0]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"完成进度",-1)),n("div",Fl,[n("span",Nl,k(a.value.completed)+" / "+k(a.value.total)+" 已完成",1),n("span",jl,k(a.value.percentage)+"%",1)]),n("div",Wl,[n("div",Yl,[n("div",{style:me({width:`${a.value.percentage}%`}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-gradient-to-r from-blue-500 to-teal-400"},null,4)])]),n("p",Hl,k(a.value.remaining)+" 项待完成 ",1)]),d.value.length>0?(y(),w("div",Vl,[r[1]||(r[1]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"分类统计",-1)),n("ul",Ul,[(y(!0),w(N,null,Y(d.value,([o,m],$)=>(y(),w("li",{key:$,class:"flex flex-col"},[n("div",Xl,[n("span",Kl,k(o),1),n("span",Zl,[n("span",ql,k(m.completed),1),J(" / "+k(m.total),1)])]),n("div",Gl,[n("div",{class:"h-2 rounded-full bg-gradient-to-r from-blue-400 to-indigo-500",style:me({width:`${m.completed/m.total*100}%`})},null,4)])]))),128))])])):z("",!0),Object.keys(c.value).length>0?(y(),w("div",Jl,[r[2]||(r[2]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"优先级统计",-1)),n("ul",Ql,[(y(!0),w(N,null,Y(c.value,(o,m)=>(y(),w("li",{key:m,class:"flex flex-col"},[n("div",er,[n("div",tr,[n("span",{class:K(["w-3 h-3 rounded-full mr-2",t(m)])},null,2),n("span",ar,k(v(m)),1)]),n("span",nr,[n("span",sr,k(o.completed),1),J(" / "+k(o.total),1)])]),n("div",or,[n("div",{class:K(["h-2 rounded-full",t(m)]),style:me({width:`${o.completed/o.total*100}%`})},null,6)])]))),128))])])):z("",!0)]))}}),rr=he(lr,[["__scopeId","data-v-ecfaec9f"]]),ir={key:0,class:"bg-white rounded-xl shadow-sm p-4"},cr={class:"relative"},ur={key:0,class:"flex justify-center space-x-2 mb-2 overflow-x-auto pb-2"},dr={key:0},mr={class:"overflow-x-auto pb-2 -mx-2 px-2 scroll-touch",style:{"scrollbar-width":"none","-ms-overflow-style":"none"}},fr={class:"flex space-x-3 min-w-max relative"},vr={key:0,class:"absolute -top-8 left-1/2 -translate-x-1/2 text-xs font-medium text-gray-500 whitespace-nowrap"},hr={key:1,class:"absolute -top-7 left-1/2 -translate-x-1/2 text-xs text-gray-500 whitespace-nowrap"},gr={key:0,class:"text-gray-400"},pr={class:"relative h-32 w-9 flex flex-col justify-end"},br={class:"absolute -top-6 left-1/2 -translate-x-1/2 text-[11px] font-medium bg-indigo-100 text-indigo-700 px-1.5 rounded-full shadow-sm whitespace-nowrap"},yr={class:"mt-2 text-center space-y-0.5"},xr={class:"text-xs font-medium text-gray-700"},_r={class:"text-[11px] text-gray-400"},wr=F({__name:"ExpenseTrandCard",props:{expenses:{}},setup(e){const l=e,a=T(()=>{const c=new Map;l.expenses.forEach(o=>{const m=new Date(o.dateTime),$=m.toISOString().split("T")[0],h=`${m.getFullYear()}-${m.getMonth()}`;c.has($)||c.set($,{date:m,amount:0,monthKey:h,monthLabel:m.toLocaleDateString("zh-CN",{month:"long"}),yearLabel:m.getFullYear().toString(),showMonthLabel:!1,showYearLabel:!1}),c.get($).amount+=o.amount});const t=Array.from(c.values()).sort((o,m)=>+o.date-+m.date);let v=0,s="",r=0;return t.forEach(o=>{v=Math.max(v,o.amount),o.date.getFullYear()!==r&&(o.showYearLabel=!0,r=o.date.getFullYear()),o.monthKey!==s&&(o.showMonthLabel=!0,s=o.monthKey)}),{items:t,maxAmount:v,monthDividers:t.reduce((o,m,$)=>(m.showMonthLabel&&o.push($),o),[])}}),d=c=>a.value.maxAmount?`${c/a.value.maxAmount*80}%`:"0%";return(c,t)=>a.value.items.length>0?(y(),w("div",ir,[t[2]||(t[2]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"每日花费趋势",-1)),n("div",cr,[a.value.monthDividers.length>1?(y(),w("div",ur,[(y(!0),w(N,null,Y(a.value.monthDividers,(v,s)=>(y(),w("div",{key:s,class:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600 whitespace-nowrap"},[J(k(a.value.items[v].monthLabel)+" ",1),a.value.items[v].showYearLabel?(y(),w("span",dr,k(a.value.items[v].yearLabel)+"年 ",1)):z("",!0)]))),128))])):z("",!0),n("div",mr,[n("div",fr,[(y(!0),w(N,null,Y(a.value.monthDividers,(v,s)=>(y(),w("div",{key:"divider-"+s,class:"absolute bottom-0 top-7 w-px bg-gray-200/80 z-10",style:me({left:`${v*40}px`})},null,4))),128)),(y(!0),w(N,null,Y(a.value.items,(v,s)=>(y(),w("div",{key:v.date.toISOString(),class:"flex flex-col items-center px-1 relative z-0"},[v.showYearLabel&&v.date.getMonth()===0?(y(),w("div",vr,k(v.yearLabel)+"年 ",1)):z("",!0),v.showMonthLabel?(y(),w("div",hr,[J(k(v.monthLabel)+" ",1),v.date.getMonth()===0&&!v.showYearLabel?(y(),w("span",gr," ("+k(v.yearLabel)+") ",1)):z("",!0)])):z("",!0),n("div",pr,[t[0]||(t[0]=wa('<div class="absolute inset-0 flex flex-col justify-between"><div class="border-t border-gray-100/50"></div><div class="border-t border-gray-100/50"></div><div class="border-t border-gray-100/50"></div><div class="border-t border-gray-100/50"></div></div>',1)),n("div",{class:"relative w-full rounded-t-lg bg-gradient-to-t from-indigo-400 to-indigo-300 shadow-sm hover:shadow-md transition-all active:scale-[0.98]",style:me({height:d(v.amount)})},[n("div",br," ¥"+k(v.amount.toFixed(0)),1)],4)]),n("div",yr,[n("div",xr,k(v.date.getDate())+"日 ",1),n("div",_r,k(v.date.toLocaleDateString("zh-CN",{weekday:"short"})),1)])]))),128))])]),t[1]||(t[1]=n("div",{class:"absolute right-0 top-0 h-full w-8 bg-gradient-to-l from-white to-transparent pointer-events-none"},null,-1))])])):z("",!0)}}),kr={class:"p-4"},$r={class:"mb-6 bg-white rounded-xl shadow-sm p-5 active:scale-[0.98] transition-transform"},Tr={class:"flex items-end"},Cr={class:"text-3xl font-bold text-indigo-600"},Pr={class:"grid grid-cols-1 gap-4 mb-6"},Sr={key:0,class:"bg-white rounded-xl shadow-sm p-5"},Br={class:"space-y-4"},Dr={class:"flex justify-between text-base mb-1"},Ir={class:"text-gray-700 font-medium"},Er={class:"font-medium"},Mr={class:"flex items-center"},Or={class:"w-full bg-gray-100 rounded-full h-2.5 mr-2"},Rr={class:"text-xs text-gray-400"},zr={key:1,class:"bg-white rounded-xl shadow-sm p-5"},Ar={class:"space-y-4"},Lr={class:"flex justify-between text-base mb-1"},Fr={class:"text-gray-700 font-medium capitalize"},Nr={class:"font-medium"},jr={class:"flex items-center"},Wr={class:"w-full bg-gray-100 rounded-full h-2.5 mr-2"},Yr={class:"text-xs text-gray-400"},Hr=F({__name:"ExpenseStatistics",props:{expenses:{}},setup(e){const l=e,a=T(()=>l.expenses.reduce((v,s)=>v+s.amount,0)),d=T(()=>{const v=new Map;return l.expenses.forEach(s=>{var r;(r=s.tags)==null||r.forEach(o=>{v.set(o,(v.get(o)||0)+s.amount)}),(!s.tags||s.tags.length===0)&&v.set("其他",(v.get("其他")||0)+s.amount)}),Array.from(v.entries()).sort((s,r)=>r[1]-s[1])}),c=T(()=>l.expenses.reduce((v,s)=>(v[s.paymentMethod]=(v[s.paymentMethod]||0)+s.amount,v),{})),t=v=>{switch(v){case"cash":return"现金";case"credit_card":return"信用卡";case"alipay":return"支付宝";case"wechat_pay":return"微信支付";case"bank_transfer":return"银行转账";case"other":return"其他";default:return v}};return(v,s)=>(y(),w("div",kr,[s[4]||(s[4]=n("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"旅行花费统计",-1)),n("div",$r,[s[1]||(s[1]=n("h3",{class:"text-sm font-medium text-gray-500 mb-1"},"总花费",-1)),n("div",Tr,[n("p",Cr,k(a.value.toFixed(2)),1),s[0]||(s[0]=n("span",{class:"text-sm text-gray-500 ml-1 mb-1"},"元",-1))])]),n("div",Pr,[d.value.length>0?(y(),w("div",Sr,[s[2]||(s[2]=n("h3",{class:"text-lg font-semibold text-gray-700 mb-3"},"分类统计",-1)),n("ul",Br,[(y(!0),w(N,null,Y(d.value,([r,o],m)=>(y(),w("li",{key:m,class:"active:scale-[0.98] transition-transform"},[n("div",Dr,[n("span",Ir,k(r),1),n("span",Er,k(o.toFixed(2))+" 元",1)]),n("div",Mr,[n("div",Or,[n("div",{class:"bg-gradient-to-r from-indigo-400 to-purple-400 h-2.5 rounded-full",style:me({width:`${o/a.value*100}%`})},null,4)]),n("span",Rr,k((o/a.value*100).toFixed(1))+"%",1)])]))),128))])])):z("",!0),Object.keys(c.value).length>0?(y(),w("div",zr,[s[3]||(s[3]=n("h3",{class:"text-lg font-semibold text-gray-700 mb-3"},"支付方式",-1)),n("ul",Ar,[(y(!0),w(N,null,Y(c.value,(r,o)=>(y(),w("li",{key:o,class:"active:scale-[0.98] transition-transform"},[n("div",Lr,[n("span",Fr,k(t(o)),1),n("span",Nr,k(r.toFixed(2))+" 元",1)]),n("div",jr,[n("div",Wr,[n("div",{class:"bg-gradient-to-r from-amber-400 to-orange-400 h-2.5 rounded-full",style:me({width:`${r/a.value*100}%`})},null,4)]),n("span",Yr,k((r/a.value*100).toFixed(1))+"%",1)])]))),128))])])):z("",!0)]),p(wr,{expenses:l.expenses},null,8,["expenses"])]))}}),Vr={key:0,class:"text-center text-gray-600"},Ur={key:1,class:"w-full h-full p-2 flex gap-4 flex-col overflow-auto thin-scrollbar"},Xr=F({__name:"index",setup(e){ka();const l=fe(),{currentTravel:a,travelPlans:d,travelChecklists:c,travelExpenses:t}=$e(l),v=T(()=>{if(!a.value||!a.value.startDateTime||!a.value.endDateTime)return 0;const r=a.value.endDateTime-a.value.startDateTime;return Math.ceil(r/(1e3*60*60*24))+1}),s=async()=>{console.log("Loading data for travel")};return be(()=>{s()}),(r,o)=>V(a)?(y(),w("div",Ur,[p(gl,{travel:V(a),travelDays:v.value},null,8,["travel","travelDays"]),V(d)?(y(),se(zl,{key:0,plans:V(d),travelId:V(a).travelId,class:"bg-white rounded-lg shadow p-6"},null,8,["plans","travelId"])):z("",!0),V(c)?(y(),se(rr,{key:1,items:V(c),class:"bg-white rounded-lg shadow p-6"},null,8,["items"])):z("",!0),V(t)?(y(),se(Hr,{key:2,expenses:V(t),class:"bg-white rounded-lg shadow p-6 mb-8"},null,8,["expenses"])):z("",!0),o[0]||(o[0]=n("div",{class:"shrink-0 h-[220px]"},null,-1))])):(y(),w("div",Vr," 请先创建旅行 "))}}),Kr={class:"travel-plans-app"},Zr={class:"w-full h-full overflow-hidden rounded-lg shadow-lg thin-scrollbar"},qr=F({__name:"index",setup(e){const l=Lt(),a=fe(),d=$a(),{currentTravel:c,travelPlansBeforeToday:t,travelPlansFromToday:v,travelPlans:s}=$e(a),{activeTabName:r}=$e(d),o=M(!1),m=T(()=>{var g;return(g=a.travels)==null?void 0:g.map(u=>({text:u.name,value:u.travelId}))}),$=()=>{switch(r.value){case"plan":l.push({name:"CreatePlan"});break;case"checklist":l.push({name:"CreateChecklist"});break;case"expense":l.push({name:"CreateExpense"});break;case"stats":l.push({name:"stats"});break;default:console.error("无效的选项");return}},h=g=>{var b;const u=(b=a.travels)==null?void 0:b.find(_=>_.travelId===g.selectedValues[0]);u&&(a.switchTravel(u),o.value=!1)};be(async()=>{await Xa(1e3),c.value||Ne({title:"提示",message:"您还没有创建任何旅行, 是否立即创建?",confirmButtonText:"创建旅行",cancelButtonText:"取消"}).then(()=>{l.push({name:"CreateTravel"})})});const f=M(!1),i=[{name:"创建新旅行",color:"green",callback:()=>{l.push({name:"CreateTravel"})}},{name:"重命名旅行",color:"#1E90FF",callback:()=>{c.value&&l.push({name:"EditTravel",params:{travelId:c.value.travelId}})}},{name:"删除此旅行",color:"red",callback:()=>{Ne({title:"提示",message:"确定要删除此旅行吗?",confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{c.value&&a.deleteTravel(c.value)})}}];return(g,u)=>{var D;const b=Ee,_=Ia,S=Pn,P=Sn,x=Qn,O=Pa,I=Wt,U=Ie;return y(),w("div",Kr,[p(_,{title:((D=V(c))==null?void 0:D.name)||"旅行计划",class:"app-nav-bar",border:!1},Ta({right:A(()=>[p(b,{name:"ellipsis",size:"18",color:"white",onClick:u[0]||(u[0]=B=>f.value=!0)})]),_:2},[V(c)?{name:"title",fn:A(()=>{var B;return[n("div",{onClick:u[1]||(u[1]=H=>o.value=!0),class:"active:scale-95 transition-all"},[J(k(((B=V(c))==null?void 0:B.name)||"旅行计划")+" ",1),p(b,{name:"arrow-down",size:"14",color:"white"})])]}),key:"0"}:void 0]),1032,["title"]),u[6]||(u[6]=n("div",{class:"app-background"},null,-1)),n("div",Zr,[p(P,{active:V(r),"onUpdate:active":u[2]||(u[2]=B=>Ca(r)?r.value=B:null),background:"linear-gradient(135deg, #6a11cb 0%, #2575fc 100%)",color:"#fff","title-active-color":"#fff","title-inactive-color":"rgba(255,255,255,0.7)",sticky:"",shrink:"",swipeable:!1,animated:"","lazy-render":"","offset-top":46,class:"w-full h-full overflow-hidden"},{default:A(()=>[p(S,{title:"计划",name:"plan",class:"w-full h-full overflow-hidden"},{default:A(()=>[p(fo)]),_:1}),p(S,{title:"清单",name:"checklist",class:"w-full h-full overflow-hidden"},{default:A(()=>[p(Do)]),_:1}),p(S,{title:"花费",name:"expense",class:"w-full h-full overflow-hidden"},{default:A(()=>[p(sl)]),_:1}),p(S,{title:"统计",name:"stats",class:"w-full h-full overflow-hidden"},{default:A(()=>[p(Xr)]),_:1})]),_:1},8,["active"])]),V(r)!=="stats"?(y(),se(x,{key:0,axis:"xy",magnetic:"x",icon:"plus",onClick:$,class:"add-button"})):z("",!0),p(I,{show:o.value,"onUpdate:show":u[4]||(u[4]=B=>o.value=B),position:"bottom"},{default:A(()=>[p(O,{title:"选择旅行",columns:m.value,onCancel:u[3]||(u[3]=B=>o.value=!1),onConfirm:h},null,8,["columns"])]),_:1},8,["show"]),p(U,{teleport:"body","cancel-text":"取消",show:f.value,"onUpdate:show":u[5]||(u[5]=B=>f.value=B),actions:i,"close-on-click-action":""},null,8,["show"])])}}}),ui=he(qr,[["__scopeId","data-v-e7055ce1"]]);export{ui as default};
